import{q as te,s as se,A as H,u as oe,_ as E,r as $,o as d,c as f,a as e,e as y,t as h,F as N,d as D,n as W,f as S,b as B,m as T,x as V,y as R,z as J,B as K,C as Y,D as G,E as Q,G as w,i as j,l as M,I as Z,j as ae,w as ie,v as ne,H as re,J as ce,K as le}from"./index-4b94f5ff.js";import{$ as q}from"./slick-theme-af7533ef.js";const de={name:"WebsiteCategories",computed:{...te("websiteCategories",{categories:s=>s.items,loading:s=>s.loading,error:s=>s.error})},created(){this.loadCategories()},methods:{...se("websiteCategories",{fetchCategories:"fetchWebsiteCategories"}),getProductImage(s){if(!s.image)return"/placeholder-image.jpg";const a=s.image,_=`${H}/public/storage/`;if(a.startsWith(_))return a;if(a.startsWith(H)){const g=a.substring(H.length);return`${_}${g.startsWith("/")?g.substring(1):g}`}return a.startsWith("http")?a:`${_}${a}`},async loadCategories(){try{await this.fetchCategories(),await oe();const s=q(this.$refs.slider);s.hasClass("slick-initialized")&&s.slick("unslick"),s.slick({slidesToShow:7,slidesToScroll:1,rtl:this.$i18n.locale==="ar",responsive:[{breakpoint:1200,settings:{slidesToShow:5}},{breakpoint:992,settings:{slidesToShow:4}},{breakpoint:768,settings:{slidesToShow:3}},{breakpoint:576,settings:{slidesToShow:2}},{breakpoint:400,settings:{slidesToShow:1}}]})}catch(s){console.error("Failed to load categories:",s)}},scrollLeft(){const s=q(this.$refs.slider);s.length&&s.hasClass("slick-initialized")&&s.slick("slickPrev")},scrollRight(){const s=q(this.$refs.slider);s.length&&s.hasClass("slick-initialized")&&s.slick("slickNext")},getAlt(s){return this.$i18n.locale==="ar"?s.name_ar:s.name}},beforeUnmount(){const s=q(this.$refs.slider);s.length&&s.hasClass("slick-initialized")&&s.slick("unslick")}},ue={class:"all-categories py-4"},_e={class:"container"},he={class:"title"},ge={class:"slider-wrapper"},fe={class:"scrollers ms-3 mb-2"},pe={class:"slider",ref:"slider"},ve=["href"],me={class:"category-content"},ye=["src"],be={key:0,class:"loading-overlay"},we={key:1,class:"error-message"};function $e(s,a,_,g,l,u){const k=$("fa");return d(),f("section",ue,[e("div",_e,[e("div",he,[y(k,{class:"fa-icon",icon:["fas","cubes"]}),e("h2",null,h(s.$t("home.categories")),1)]),e("div",ge,[e("div",fe,[e("button",{class:"btn nav-button left",onClick:a[0]||(a[0]=(...c)=>u.scrollLeft&&u.scrollLeft(...c))},[y(k,{icon:"arrow-left"})]),e("button",{class:"btn nav-button right",onClick:a[1]||(a[1]=(...c)=>u.scrollRight&&u.scrollRight(...c))},[y(k,{icon:"arrow-right"})])]),e("div",pe,[(d(!0),f(N,null,D(s.categories,c=>(d(),f("a",{key:c.id,class:"card",href:`/category/${c.id}`},[e("div",me,[e("img",{src:u.getProductImage(c)},null,8,ye),e("p",{class:W({rtl:s.$i18n.locale==="ar"})},h(s.$i18n.locale==="ar"?c.name_ar:c.name),3)])],8,ve))),128))],512),s.loading?(d(),f("div",be,a[2]||(a[2]=[e("div",{class:"loading-spinner"},null,-1)]))):S("",!0),s.error?(d(),f("div",we,h(s.error),1)):S("",!0)])])])}const ke=E(de,[["render",$e],["__scopeId","data-v-07b6dc6c"]]);const Se={name:"HomeBrands",data(){return{brands:[]}},created(){this.fetchBrands()},methods:{async fetchBrands(){try{const s=await B.get("https://backend.webenia.org/api/website/brands/section");this.brands=s.data.data}catch(s){console.error("Error fetching brands:",s)}},getImageUrl(s){return`https://backend.webenia.org/public/storage/${s}`}}},Ce={class:"our-brands py-5"},Pe={class:"container"},xe={class:"section-title d-flex align-items-center gap-2 mb-4"},Fe={class:"m-0"},Ie={class:"d-flex flex-wrap justify-content-center gap-4"},Oe=["src","alt"],Be={key:1,class:"no-image"};function Te(s,a,_,g,l,u){const k=$("fa"),c=$("router-link");return d(),f("section",Ce,[e("div",Pe,[e("div",xe,[y(k,{class:"icon",icon:["fas","diagram-project"]}),e("h2",Fe,h(s.$t("home.brands")),1)]),e("div",Ie,[(d(!0),f(N,null,D(l.brands,x=>(d(),f("div",{key:x.id,class:"brand-card d-flex align-items-center justify-content-center"},[y(c,{to:`/brand/${x.id}`,class:"brand-link text-decoration-none"},{default:T(()=>[x.images.length?(d(),f("img",{key:0,src:u.getImageUrl(x.images[0].path),alt:x.name_en,class:"brand-image",loading:"lazy"},null,8,Oe)):(d(),f("div",Be,"No Image"))]),_:2},1032,["to"])]))),128))])])])}const Ve=E(Se,[["render",Te],["__scopeId","data-v-88987ccf"]]);const Le={class:"products-section"},Ue={class:"container"},Ae={class:"title section-header d-flex align-items-center mb-4"},Ee={class:"mb-0"},je={key:0,class:"text-center my-4"},Ne={key:1},ze={class:"row g-3"},We={class:"product-card card border-0 h-100"},De={class:"position-relative overflow-hidden bg-light"},qe=["src","alt"],Me={key:0,class:"sale-badge"},He={class:"product-actions d-flex justify-content-center gap-2 w-100"},Re=["onClick","disabled"],Je=["onClick"],Ke=["onClick","title"],Ge={class:"card-body"},Qe={class:"card-title"},Xe={class:"price-container"},Ye={key:0,class:"discount-badge"},Ze={key:1,class:"price-old"},et={class:"card-text card-price"},tt={class:"d-flex justify-content-center mt-4"},st={__name:"ProductSection",setup(s){const a=V([]),_=V([]),g=V(!1),l=R(),u=J(),{locale:k,t:c}=K(),x=Y(),I=t=>`https://backend.webenia.org/public/storage/${t}`,L=async()=>{try{const t=await B.get("https://backend.webenia.org/api/currencies");t.data.currencies&&(_.value=t.data.currencies)}catch(t){console.error("Error fetching currencies:",t)}},F=async()=>{try{const t=JSON.parse(localStorage.getItem("selectedCurrency"))||{code:"USD"},m=await B.get("https://backend.webenia.org/api/website/products/section",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,Currency:t.code}});m.data.status&&(a.value=m.data.data,await U())}catch(t){console.error("Error fetching products:",t),w({title:"Error",message:"Failed to load products.",type:"error"})}finally{g.value=!1}},U=async()=>{try{const t=await B.get("https://backend.webenia.org/api/favorites",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});t.data.status&&t.data.data&&l.setFavorites(t.data.data)}catch(t){console.error("Error fetching favorites:",t)}},O=t=>l.favorites.some(m=>m.product_id===t),A=t=>{var m,p;return((m=l.favorites.find(P=>P.product_id===t))==null?void 0:m.favorite_id)||((p=l.favorites.find(P=>P.product_id===t))==null?void 0:p.id)},n=async t=>{var m,p,P,o;try{if(O(t.id)){const C=A(t.id);C&&(await l.removeFromFavorites(C),w({title:c("success"),message:c("favorite_removed")||"Product removed from favorites",type:"success"}))}else{const C=await l.addToFavorites(t.id);w({title:c("success"),message:c("favorite_added"),type:"success"})}}catch(C){if(((p=(m=C.response)==null?void 0:m.data)==null?void 0:p.message)==="Unauthenticated."){w({title:c("error"),message:c("unauthenticated"),type:"warning",duration:4e3});return}w({title:c("error"),message:((o=(P=C.response)==null?void 0:P.data)==null?void 0:o.message)||c("login_required_favorite")||"Login required to favorite product",type:"error"})}},b=async t=>{var m,p,P,o;try{let C=0;if(t.discount&&t.discount.is_active){const ee=parseFloat(t.discount.discount_value),X=parseFloat(t.price);C=X-X*(ee/100)}else C=parseFloat(t.price);const z=await B.post("https://backend.webenia.org/api/cart-items",{product_id:t.id,quantity:1,price:C},{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});z.data.status?(w({title:c("success"),message:c("cart.added_to_cart"),type:"success"}),u.incrementCount(),await u.fetchCartCount()):w.error(z.data.message)}catch(C){if(((p=(m=C.response)==null?void 0:m.data)==null?void 0:p.message)==="Unauthenticated."){w({title:c("error"),message:c("unauthenticated"),type:"warning",duration:4e3});return}w.error(((o=(P=C.response)==null?void 0:P.data)==null?void 0:o.message)||"Error adding product to cart")}},i=t=>{if(t.discount&&t.discount.is_active){const m=parseFloat(t.discount.discount_value),p=parseFloat(t.converted_price||t.price);return(p-p*(m/100)).toFixed(2)}return t.converted_price||t.price},r=t=>{if(t.discount&&t.discount.is_active){const m=parseFloat(t.discount.discount_value);return Math.round(m)}return 0},v=()=>{x.push("/product-listing")};return G(async()=>{await L(),await F(),window.addEventListener("currency-changed",()=>{F()})}),(t,m)=>{const p=$("fa"),P=$("router-link");return d(),f("div",Le,[e("div",Ue,[e("div",Ae,[y(p,{class:"fa-icon me-2",icon:["fas","shopping-basket"]}),e("h2",Ee,h(t.$t("home.products")),1)]),g.value?(d(),f("div",je,"Loading products...")):(d(),f("div",Ne,[e("div",ze,[(d(!0),f(N,null,D(a.value,o=>(d(),f("div",{key:o.id,class:"col-sm-6 col-md-4 col-lg-3"},[e("div",We,[e("div",De,[y(P,{to:`/read/products/${o.id}`},{default:T(()=>[o.images&&o.images.length?(d(),f("img",{key:0,src:I(o.images[0].path),alt:o.name_en,class:"card-img-top product-img"},null,8,qe)):S("",!0)]),_:2},1032,["to"]),o.is_available?S("",!0):(d(),f("div",Me,h(t.$t("products.outOfStock")),1)),e("div",He,[y(P,{to:`/read/products/${o.id}`,class:"btn btn-light rounded-circle shadow-sm",title:"View"},{default:T(()=>[y(p,{icon:"eye"})]),_:2},1032,["to"]),e("button",{onClick:C=>b(o),class:W(["btn btn-light shadow-sm disable",{disabled:!o.is_available}]),disabled:!o.is_available},h(t.$t("home.add-to-cart")),11,Re),e("button",{onClick:C=>b(o),class:"d-none btn rounded-circle shadow-sm btn-light enable"},[y(p,{icon:"shopping-cart"})],8,Je),e("button",{onClick:C=>n(o),class:W(["btn rounded-circle shadow-sm btn-light",O(o.id)?"text-danger":""]),title:O(o.id)?"Remove from favorites":"Add to favorites"},[y(p,{icon:O(o.id)?"fas fa-heart":"far fa-heart"},null,8,["icon"])],10,Ke)])]),e("div",Ge,[e("h5",Qe,h(Q(k)==="ar"?o.name_ar:o.name_en),1),e("div",Xe,[o.discount&&o.discount.is_active?(d(),f("span",Ye,h(r(o))+"% OFF ",1)):S("",!0),o.discount&&o.discount.is_active?(d(),f("span",Ze,h(o.converted_price)+" "+h(o.currency_code),1)):S("",!0),e("span",et,h(i(o))+" "+h(o.currency_code),1)])])])]))),128))]),e("div",tt,[e("button",{class:"btn view-all-btn",onClick:v},h(t.$t("home.view-all-products")),1)])]))])])}}},ot=E(st,[["__scopeId","data-v-83a4cf96"]]);const at={class:"products-section"},it={class:"container"},nt={class:"title mt-5"},rt={class:"row g-4"},ct={class:"card my-3 p-sm-4"},lt={class:"img-container rounded position-relative"},dt=["src","alt"],ut={key:0,class:"sale-badge"},_t={class:"body-container"},ht={class:"card-body"},gt={class:"card-title"},ft={class:"price-container"},pt={key:0,class:"discount-badge"},vt={key:1,class:"price-old"},mt={class:"card-text card-price"},yt={class:"product-actions d-flex justify-content-center flex-wrap gap-2"},bt=["disabled","onClick"],wt=["onClick","title"],$t={__name:"BestSelling",setup(s){const a=V([]),_=V(!1),g=V(""),l=R(),u=J(),{locale:k,t:c}=K();V([]),V({code:"USD"});const x=async()=>{try{const i=JSON.parse(localStorage.getItem("selectedCurrency"))||{code:"USD"},r=await B.get("https://backend.webenia.org/api/website/best-selling/products",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,Currency:i.code}});r.data.status&&r.data.data&&(a.value=r.data.data,await I())}catch(i){console.error("Error fetching products:",i),w({title:"Error",message:"Failed to load products.",type:"error"})}},I=async()=>{try{const i=await B.get("https://backend.webenia.org/api/favorites",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});i.data.status&&i.data.data&&l.setFavorites(i.data.data)}catch(i){console.error("Error fetching favorites:",i)}},L=i=>`https://backend.webenia.org/public/storage/${i}`,F=i=>l.favorites.some(r=>r.product_id===i),U=i=>{const r=l.favorites.find(v=>v.product_id===i);return r?r.favorite_id||r.id:null},O=async i=>{var r,v,t,m;try{if(F(i.id)){const p=U(i.id);p&&(await l.removeFromFavorites(p),w({title:c("success"),message:c("favorite_removed")||"Product removed from favorites",type:"success"}))}else{const p=await l.addToFavorites(i.id);w({title:c("success"),message:p.message||c("favorite_added")||"Product added to favorites",type:"success"})}}catch(p){if(((v=(r=p.response)==null?void 0:r.data)==null?void 0:v.message)==="Unauthenticated."){w({title:c("error"),message:c("unauthenticated"),type:"warning",duration:4e3});return}w({title:c("error"),message:((m=(t=p.response)==null?void 0:t.data)==null?void 0:m.message)||c("login_required_favorite")||"Login required to favorite product",type:"error"})}},A=async i=>{var r,v,t,m;try{let p=0;if(i.discount&&i.discount.is_active){const C=parseFloat(i.discount.discount_value),z=parseFloat(i.converted_price||i.price);p=z-z*(C/100)}else p=parseFloat(i.converted_price||i.price);const P=localStorage.getItem("user_id"),o=await B.post("https://backend.webenia.org/api/cart-items",{product_id:i.id,quantity:1,price:p,user_id:P},{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});o.data.status?(w({title:c("success"),message:o.data.message,type:"success"}),u.incrementCount(),await u.fetchCartCount()):w({title:c("error"),message:o.data.message,type:"error"})}catch(p){if(((v=(r=p.response)==null?void 0:r.data)==null?void 0:v.message)==="Unauthenticated."){w({title:c("error"),message:c("unauthenticated"),type:"warning",duration:4e3});return}w({title:c("error"),message:(m=(t=p.response)==null?void 0:t.data)==null?void 0:m.message,type:"error"})}},n=i=>{if(i.discount&&i.discount.is_active){const r=parseFloat(i.discount.discount_value),v=parseFloat(i.converted_price||i.price);return(v-v*(r/100)).toFixed(2)}return i.converted_price||i.price},b=i=>{if(i.discount&&i.discount.is_active){const r=parseFloat(i.discount.discount_value);return Math.round(r)}return 0};return G(()=>{x(),window.addEventListener("currency-changed",()=>{x()})}),(i,r)=>{const v=$("fa"),t=$("router-link"),m=$("el-col"),p=$("el-button"),P=$("el-dialog");return d(),f("div",at,[e("div",it,[e("div",nt,[y(v,{class:"fa-icon",icon:["fas","star"]}),e("h2",null,h(i.$t("home.best-selling")),1)]),e("div",rt,[(d(!0),f(N,null,D(a.value,o=>(d(),j(m,{key:o.id,xs:24,sm:24,md:12,lg:12},{default:T(()=>[e("div",ct,[e("div",lt,[y(t,{to:`/read/products/${o.id}`},{default:T(()=>[o.images.length?(d(),f("img",{key:0,src:L(o.images[0].path),alt:o.name_en,class:"product-img card-img bg-light"},null,8,dt)):S("",!0)]),_:2},1032,["to"]),o.is_available?S("",!0):(d(),f("div",ut,h(i.$t("products.outOfStock")),1))]),e("div",_t,[e("div",ht,[e("h5",gt,h(Q(k)==="ar"?o.name_ar:o.name_en),1),e("div",ft,[o.discount&&o.discount.is_active?(d(),f("span",pt,h(b(o))+"% OFF ",1)):S("",!0),o.discount&&o.discount.is_active?(d(),f("span",vt,h(o.price)+" "+h(o.currency_code),1)):S("",!0),e("span",mt,h(n(o))+" "+h(o.currency_code),1)])]),e("div",yt,[y(t,{to:`/read/products/${o.id}`,class:"btn btn-light rounded-circle shadow-sm",title:"View"},{default:T(()=>[y(v,{icon:"eye"})]),_:2},1032,["to"]),e("button",{disabled:!o.is_available,onClick:C=>A(o),class:"btn btn-light shadow-sm rounded-circle"},[y(v,{icon:"cart-plus"})],8,bt),e("button",{onClick:C=>O(o),class:W(["btn rounded-circle shadow-sm btn-light",F(o.id)?"text-danger":""]),title:F(o.id)?"Remove from favorites":"Add to favorites"},[y(v,{icon:F(o.id)?"fas fa-heart":"far fa-heart"},null,8,["icon"])],10,wt)])])])]),_:2},1024))),128))])]),y(P,{modelValue:_.value,"onUpdate:modelValue":r[1]||(r[1]=o=>_.value=o),title:"ðŸŽ‰ Success",width:"30%","before-close":()=>_.value=!1,center:!0,"close-on-click-modal":!1,"show-close":!1},{footer:T(()=>[y(p,{type:"primary",onClick:r[0]||(r[0]=o=>_.value=!1)},{default:T(()=>r[2]||(r[2]=[M("OK")])),_:1,__:[2]})]),default:T(()=>[e("span",null,h(g.value),1)]),_:1},8,["modelValue","before-close"])])}}},kt=E($t,[["__scopeId","data-v-f494e031"]]),St="/assets/3-adbf781a.png",Ct="/assets/2-1da5d603.png",Pt="/assets/icon 1 -ced21c67.png",xt="/assets/4-b68b6467.png",Ft="/assets/elegancewebsiteleft-524d19b0.png",It="/assets/elegancewebsiteright-4654db9e.png";const Ot={name:"WhyChooseUs",data(){return{}}},Bt={class:"why-choose-us"},Tt={class:"container"},Vt={class:"title mt-5"},Lt={class:"row row-cols-xl-5 row-cols-lg-4 row-cols-md-3 row-cols-sm-2 row-cols-1 row--20 d-flex justify-content-around"},Ut={class:"col"},At={class:"service-box card"},Et={class:"title"},jt={class:"col"},Nt={class:"service-box card"},zt={class:"title"},Wt={class:"col"},Dt={class:"service-box card"},qt={class:"title"},Mt={class:"col"},Ht={class:"service-box card"},Rt={class:"title"};function Jt(s,a,_,g,l,u){const k=$("fa");return d(),f(N,null,[e("section",Bt,[e("div",Tt,[e("div",Vt,[y(k,{class:"fa-icon",icon:["fas","shopping-basket"]}),e("h2",null,h(s.$t("home.why-us")),1)]),e("div",Lt,[e("div",Ut,[e("div",At,[a[0]||(a[0]=e("div",{class:"icon"},[e("img",{src:St,class:"img-fluid",alt:"Service"})],-1)),e("h6",Et,h(s.$t("home.why.fast_delivery")),1)])]),e("div",jt,[e("div",Nt,[a[1]||(a[1]=e("div",{class:"icon"},[e("img",{src:Ct,class:"img-fluid",alt:"Service"})],-1)),e("h6",zt,h(s.$t("home.why.guarantee")),1)])]),e("div",Wt,[e("div",Dt,[a[2]||(a[2]=e("div",{class:"icon"},[e("img",{src:Pt,class:"img-fluid",alt:"Service"})],-1)),e("h6",qt,h(s.$t("home.why.return_policy")),1)])]),e("div",Mt,[e("div",Ht,[a[3]||(a[3]=e("div",{class:"icon"},[e("img",{src:xt,class:"img-fluid",alt:"Service"})],-1)),e("h6",Rt,h(s.$t("home.why.pro_quality")),1)])])])])]),a[4]||(a[4]=Z('<div class="axil-poster mt-3" data-v-537f384d><div class="container" data-v-537f384d><div class="row" data-v-537f384d><div class="col-lg-6 mb--30" data-v-537f384d><div class="single-poster" data-v-537f384d><a data-v-537f384d><img src="'+Ft+'" data-v-537f384d></a></div></div><div class="col-lg-6 mb--30" data-v-537f384d><div class="single-poster" data-v-537f384d><a data-v-537f384d><img src="'+It+'" data-v-537f384d></a></div></div></div></div></div>',1))],64)}const Kt=E(Ot,[["render",Jt],["__scopeId","data-v-537f384d"]]);const Gt={class:"products-section py-5"},Qt={class:"container"},Xt={class:"title section-header d-flex align-items-center mb-4"},Yt={class:"mb-0"},Zt={class:"row justify-content-center g-4"},es={class:"product-card card h-100 w-100"},ts={class:"img-container overflow-hidden bg-light m-2 rounded-circle"},ss=["src","alt"],os={key:0,class:"sale-badge"},as={class:"card-body"},is={class:"card-title"},ns={class:"price-container"},rs={key:0,class:"discount-badge"},cs={key:1,class:"price-old"},ls={class:"card-text card-price"},ds={class:"product-actions d-flex justify-content-center flex-wrap gap-2"},us=["onClick","disabled"],_s=["onClick","title"],hs={__name:"LatestProducts",setup(s){const a=V([]);V(!1),V("");const _=R(),g=J(),{locale:l,t:u}=K();Y();const k=async()=>{try{const n=JSON.parse(localStorage.getItem("selectedCurrency"))||{code:"USD"},b=await B.get("https://backend.webenia.org/api/website/latest/products",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,Currency:n.code}});b.data.status&&b.data.data&&(a.value=b.data.data,await c())}catch(n){console.error("Error fetching products:",n)}},c=async()=>{try{const n=await B.get("https://backend.webenia.org/api/favorites",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});n.data.status&&n.data.data&&_.setFavorites(n.data.data)}catch(n){console.error("Error fetching favorites:",n)}},x=n=>`https://backend.webenia.org/public/storage/${n}`,I=n=>_.favorites.some(b=>b.product_id===n),L=n=>{var b,i;return((b=_.favorites.find(r=>r.product_id===n))==null?void 0:b.favorite_id)||((i=_.favorites.find(r=>r.product_id===n))==null?void 0:i.id)},F=async n=>{var b,i,r,v;try{if(I(n.id)){const t=L(n.id);t&&(await _.removeFromFavorites(t),w({title:u("success"),message:u("favorite_removed")||"Product removed from favorites",type:"success"}))}else{const t=await _.addToFavorites(n.id);w({title:u("success"),message:t.message||u("favorite_added")||"Product added to favorites",type:"success"})}}catch(t){if(((i=(b=t.response)==null?void 0:b.data)==null?void 0:i.message)==="Unauthenticated."){w({title:u("error"),message:u("unauthenticated"),type:"warning",duration:4e3});return}w({title:u("error"),message:((v=(r=t.response)==null?void 0:r.data)==null?void 0:v.message)||u("login_required_favorite")||"Login required to favorite product",type:"error"})}},U=n=>{if(n.discount&&n.discount.is_active){const b=parseFloat(n.discount.discount_value),i=parseFloat(n.converted_price||n.price);return(i-i*(b/100)).toFixed(2)}return n.converted_price||n.price},O=n=>{if(n.discount&&n.discount.is_active){const b=parseFloat(n.discount.discount_value);return Math.round(b)}return 0},A=async n=>{var b,i,r,v;try{let t=0;if(n.discount&&n.discount.is_active){const P=parseFloat(n.discount.discount_value),o=parseFloat(n.converted_price||n.price);t=o-o*(P/100)}else t=parseFloat(n.converted_price||n.price);const m={product_id:n.id,quantity:1,price:t};n.amounts&&n.amounts.length>0&&(m.amount_id=n.amounts[0].id);const p=await B.post("https://backend.webenia.org/api/cart-items",m,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json",Accept:"application/json"}});p.data.status?(w({title:u("success"),message:u("cart.added_to_cart"),type:"success"}),g.incrementCount(),await g.fetchCartCount()):w({title:u("error"),message:p.data.message,type:"error"})}catch(t){if(((i=(b=t.response)==null?void 0:b.data)==null?void 0:i.message)==="Unauthenticated."){w({title:u("error"),message:u("unauthenticated"),type:"warning",duration:4e3});return}w({title:u("error"),message:(v=(r=t.response)==null?void 0:r.data)==null?void 0:v.message,type:"error"})}};return G(()=>{k(),window.addEventListener("currency-changed",()=>{k()})}),(n,b)=>{const i=$("fa"),r=$("router-link"),v=$("el-col");return d(),f("div",Gt,[e("div",Qt,[e("div",Xt,[y(i,{class:"fa-icon me-2",icon:["fas","shopping-basket"]}),e("h2",Yt,h(n.$t("LatestProducts.LatestProducts")),1)]),e("div",Zt,[(d(!0),f(N,null,D(a.value,t=>(d(),j(v,{key:t.id,xs:24,sm:12,md:8,lg:6,class:"d-flex justify-content-center"},{default:T(()=>[e("div",es,[e("div",ts,[y(r,{to:`/read/products/${t.id}`},{default:T(()=>[t.images.length?(d(),f("img",{key:0,src:x(t.images[0].path),alt:t.name_en,class:"product-img card-img-top"},null,8,ss)):S("",!0)]),_:2},1032,["to"]),t.is_available?S("",!0):(d(),f("div",os,h(n.$t("products.outOfStock")),1))]),e("div",as,[e("h5",is,h(Q(l)==="ar"?t.name_ar:t.name_en),1),e("div",ns,[t.discount&&t.discount.is_active?(d(),f("span",rs,h(O(t))+"% OFF ",1)):S("",!0),t.discount&&t.discount.is_active?(d(),f("span",cs,h(t.converted_price)+" "+h(t.currency_code),1)):S("",!0),e("span",ls,h(U(t))+" "+h(t.currency_code),1)]),e("div",ds,[y(r,{to:`/read/products/${t.id}`,class:"btn btn-light rounded-circle shadow-sm",title:"View"},{default:T(()=>[y(i,{icon:"eye"})]),_:2},1032,["to"]),e("button",{onClick:m=>A(t),disabled:!t.is_available,class:"btn btn-light shadow-sm"},h(n.$t("home.add-to-cart")),9,us),e("button",{onClick:m=>F(t),class:W(["btn rounded-circle shadow-sm btn-light",I(t.id)?"text-danger":""]),title:I(t.id)?"Remove from favorites":"Add to favorites"},[y(i,{icon:I(t.id)?"fas fa-heart":"far fa-heart"},null,8,["icon"])],10,_s)])])])]),_:2},1024))),128))])])])}}},gs=E(hs,[["__scopeId","data-v-e53b66d5"]]);const fs={name:"Loader"},ps={class:"loader-svg-wrapper"};function vs(s,a,_,g,l,u){return d(),f("div",ps,a[0]||(a[0]=[e("div",{class:"loader"},null,-1)]))}const ms=E(fs,[["render",vs],["__scopeId","data-v-417d877b"]]);const ys={name:"VerifyOtp",emits:["close"],data(){return{success:"",error:"",showOtpInput:!0,otp:""}},methods:{async handleActiveNow(){this.success="",this.error="",await this.resendOtp(),this.showOtpInput=!0},async resendOtp(){var s,a,_;try{const g=localStorage.getItem("otp_email");if(!g){this.error="No email found. Please login again.";return}const l=await B.post("https://backend.webenia.org/api/resend-otp",{email:g});(s=l.data)!=null&&s.success?this.success=((a=l.data)==null?void 0:a.message)||"OTP resent successfully.":this.error=((_=l.data)==null?void 0:_.message)||"Failed to resend OTP."}catch(g){console.error(g),this.error="Something went wrong. Please try again."}},async verifyOtp(){var g,l,u,k,c,x,I,L,F,U,O,A,n,b,i;this.success="",this.error="",this.otpMessage="";const s=Array.isArray(this.otp)?this.otp.join(""):this.otp,a=s&&/^\d{4}$/.test(s);if(!s||!a){const r=((g=this.$t)==null?void 0:g.call(this,"otp.invalidLength"))||"Please enter a valid 4-digit code";this.otpMessage=r,(u=(l=this.$toast)==null?void 0:l.error)==null||u.call(l,r);return}const _=localStorage.getItem("otp_email");if(!_){const r=((k=this.$t)==null?void 0:k.call(this,"otp.emailMissing"))||"No email found. Please login again.";this.error=r,(x=(c=this.$toast)==null?void 0:c.error)==null||x.call(c,r);return}try{const r=await B.post("https://backend.webenia.org/api/client/verify-otp",{email:_,otp:s});if(r.data.status===!0){const v={...this.user,...r.data.data.user};localStorage.setItem("user",JSON.stringify(v)),localStorage.setItem("auth_token",r.data.data.token),this.success=((I=this.$t)==null?void 0:I.call(this,"otp.success"))||"OTP verified successfully!",this.otpMessage="",window.location.reload()}else{const v=r.data.message||((L=this.$t)==null?void 0:L.call(this,"otp.failed"))||"OTP verification failed.";this.otpMessage=v,(U=(F=this.$toast)==null?void 0:F.error)==null||U.call(F,v)}}catch(r){console.error("OTP verification error:",r);const v=((A=(O=r.response)==null?void 0:O.data)==null?void 0:A.message)||((n=this.$t)==null?void 0:n.call(this,"otp.error"))||"OTP verification failed";this.otpMessage=v,(i=(b=this.$toast)==null?void 0:b.error)==null||i.call(b,v)}}}},bs={class:"modal-overlay d-flex justify-content-center align-items-center"},ws={class:"cart-modal bg-white rounded-4 shadow p-4 position-relative"},$s={class:"cart-content overflow-auto d-flex align-items-center flex-column",style:{"max-height":"70vh"}},ks={class:"w-50 d-flex align-items-center flex-column text-center"},Ss={key:0,class:"w-100 d-flex flex-column align-items-center mt-3"},Cs={key:1,class:"success-message"},Ps={key:2,class:"error-message"};function xs(s,a,_,g,l,u){const k=$("fa");return d(),f("div",bs,[e("div",ws,[a[6]||(a[6]=e("div",{class:"mb-4 d-flex justify-content-center align-items-center w-100 logo-container"},[e("img",{src:ae,alt:"Logo"})],-1)),e("button",{type:"button",class:"btn-close m-3",onClick:a[0]||(a[0]=c=>s.$emit("close")),"aria-label":"Close"}),e("div",$s,[e("div",ks,[a[4]||(a[4]=e("p",{class:"text-center mb-4"},"sorry to say",-1)),y(k,{icon:"circle-exclamation",size:"xl",class:"icon mb-2"}),a[5]||(a[5]=e("h5",null,[M("Enter the "),e("span",null,"OTP"),M(" sent in the email to "),e("span",null,"active"),M(" your "),e("span",null,"account")],-1)),e("button",{type:"button",onClick:a[1]||(a[1]=(...c)=>u.handleActiveNow&&u.handleActiveNow(...c)),class:"login-btn btn my-4"},"active now")]),l.showOtpInput?(d(),f("div",Ss,[ie(e("input",{"onUpdate:modelValue":a[2]||(a[2]=c=>l.otp=c),type:"text",maxlength:"6",placeholder:"Enter OTP",class:"form-control mb-2",style:{"max-width":"200px","text-align":"center"}},null,512),[[ne,l.otp]]),e("button",{type:"button",onClick:a[3]||(a[3]=(...c)=>u.verifyOtp&&u.verifyOtp(...c)),class:"btn btn-success mb-2"},"Verify OTP")])):S("",!0),l.success?(d(),f("div",Cs,h(l.success),1)):S("",!0),l.error?(d(),f("div",Ps,h(l.error),1)):S("",!0)])])])}const Fs=E(ys,[["render",xs]]),Is="/assets/1-620e7f4b.jpg",Os="/assets/2-eb18b474.jpg",Bs="/assets/3-0dfdaf9f.jpg";const Ts={name:"Home",components:{Header:re,Categories:ke,HomeBrands:Ve,LatestProducts:gs,Products:ot,BestSelling:kt,WhyChooseUs:Kt,Footer:ce,Loader:ms,VerifyOtpPopup:Fs},computed:{showVerifyOtp(){return this.user&&!this.user.is_verified},direction(){return le.global.locale==="ar"?"rtl":"ltr"}},data(){return{showBrand:!1,showOurProducts:!1,showLatestProducts:!1,showBestSelling:!1,loading:!0,user:null,token:null,showVerifyOtpPopup:!1}},mounted(){this.fetchSettings(),localStorage.getItem("showVerifyOtpPopup")==="true"&&(this.showVerifyOtpPopup=!0,localStorage.removeItem("showVerifyOtpPopup"))},methods:{async fetchSettings(){try{const _=(await(await fetch("https://backend.webenia.org/api/settings")).json()).data,g=l=>{const u=_.find(k=>k.key===l);return u&&u.value==="1"};this.showBrand=g("show_brand"),this.showOurProducts=g("show_our_products"),this.showLatestProducts=g("show_latest_products"),this.showBestSelling=g("show_best_selling_products")}catch(s){console.error("Failed to fetch settings:",s)}finally{setTimeout(()=>{this.loading=!1},3e3)}},scrollLeft(){const s=window.innerWidth,_=this.$refs.slider.querySelector(".card").offsetWidth;s<=440?this.$refs.slider.scrollBy({left:-(_*2+26),behavior:"smooth"}):s<=768?this.$refs.slider.scrollBy({left:-(_*3+50),behavior:"smooth"}):s<=1200?this.$refs.slider.scrollBy({left:-(_*4+50),behavior:"smooth"}):this.$refs.slider.scrollBy({left:-(_*7+30),behavior:"smooth"})},scrollRight(){const s=window.innerWidth,_=this.$refs.slider.querySelector(".card").offsetWidth;s<=440?this.$refs.slider.scrollBy({left:_*2+26,behavior:"smooth"}):s<=768?this.$refs.slider.scrollBy({left:_*3+50,behavior:"smooth"}):s<=1200?this.$refs.slider.scrollBy({left:_*4+50,behavior:"smooth"}):this.$refs.slider.scrollBy({left:_*7+30,behavior:"smooth"})},handleCloseOtp(){this.showVerifyOtpPopup=!1,this.user.is_verified=!0}},created(){const s=localStorage.getItem("auth_user"),a=localStorage.getItem("token");s&&(this.user=JSON.parse(s)),a&&(this.token=a)}},Vs={class:"home"};function Ls(s,a,_,g,l,u){const k=$("Loader"),c=$("Header"),x=$("verify-otp-popup"),I=$("Categories"),L=$("HomeBrands"),F=$("Products"),U=$("LatestProducts"),O=$("BestSelling"),A=$("WhyChooseUs"),n=$("Footer");return d(),f("div",Vs,[l.loading?(d(),j(k,{key:0})):S("",!0),y(c),u.showVerifyOtp||l.showVerifyOtpPopup?(d(),j(x,{key:1,user:l.user,token:l.token,onClose:u.handleCloseOtp},null,8,["user","token","onClose"])):S("",!0),a[0]||(a[0]=Z('<section class="hero-section" data-v-0a73c2f4><div id="carouselExample" class="carousel slide" data-v-0a73c2f4><div class="carousel-inner" data-v-0a73c2f4><div class="carousel-item active" data-v-0a73c2f4><img src="'+Is+'" class="d-block w-100" alt="..." data-v-0a73c2f4></div><div class="carousel-item" data-v-0a73c2f4><img src="'+Os+'" class="d-block w-100" alt="..." data-v-0a73c2f4></div><div class="carousel-item" data-v-0a73c2f4><img src="'+Bs+'" class="d-block w-100" alt="..." data-v-0a73c2f4></div></div><button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev" data-v-0a73c2f4><span class="carousel-control-prev-icon" aria-hidden="true" data-v-0a73c2f4></span><span class="visually-hidden" data-v-0a73c2f4>Previous</span></button><button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next" data-v-0a73c2f4><span class="carousel-control-next-icon" aria-hidden="true" data-v-0a73c2f4></span><span class="visually-hidden" data-v-0a73c2f4>Next</span></button></div></section>',1)),y(I),l.showBrand?(d(),j(L,{key:2})):S("",!0),l.showOurProducts?(d(),j(F,{key:3})):S("",!0),l.showLatestProducts?(d(),j(U,{key:4})):S("",!0),l.showBestSelling?(d(),j(O,{key:5})):S("",!0),y(A),y(n)])}const Es=E(Ts,[["render",Ls],["__scopeId","data-v-0a73c2f4"]]);export{Es as default};
