import{_ as f,H as m,b as g,o as a,c as l,a as s,t as d,g as k,w as h,m as u,f as w,k as c}from"./index-8fc7e8a4.js";const _={components:{Header:m},data(){return{email:"",password:"",password_confirmation:"",loading:!1,error:null,success:null,showPassword:!1,showConfirmPassword:!1}},mounted(){const t=localStorage.getItem("user");if(t)try{const e=JSON.parse(t);this.email=e.email||""}catch{this.email=localStorage.getItem("user_email")||""}else this.email=localStorage.getItem("user_email")||""},methods:{async resetPassword(){var t,e,p;if(this.error=null,this.success=null,this.password!==this.password_confirmation){this.error=this.$t("profile.passwordsDoNotMatch");return}if(this.password.length<8){this.error=this.$t("profile.passwordTooShort");return}if(!this.email){this.error="Email is required.";return}this.loading=!0;try{const r=await g.post("api/reset-password",{email:this.email,password:this.password,password_confirmation:this.password_confirmation});if(r.data&&r.data.status&&r.data.token&&r.data.user)localStorage.setItem("auth_token",r.data.token),localStorage.setItem("user",JSON.stringify(r.data.user)),this.success=r.data.message||this.$t("profile.passwordResetSuccess"),this.password="",this.password_confirmation="",setTimeout(()=>{this.$router.push("/")},2e3);else throw new Error(((t=r.data)==null?void 0:t.message)||"Failed to reset password")}catch(r){this.error=((p=(e=r.response)==null?void 0:e.data)==null?void 0:p.message)||this.$t("profile.passwordResetFailed")}finally{this.loading=!1}},goBackToProfile(){this.$router.push({name:"Profile"})}}},v={class:"reset-password-outer"},P={class:"reset-password-card"},y={class:"reset-password-header"},b={class:"form-group password-group"},M={for:"password"},S={class:"password-input-wrapper"},B=["type","placeholder"],C={key:0,width:"20",height:"20",fill:"none",viewBox:"0 0 24 24"},x={key:1,width:"20",height:"20",fill:"none",viewBox:"0 0 24 24"},T={class:"form-group password-group"},I={for:"password_confirmation"},N={class:"password-input-wrapper"},D=["type","placeholder"],V={key:0,width:"20",height:"20",fill:"none",viewBox:"0 0 24 24"},A={key:1,width:"20",height:"20",fill:"none",viewBox:"0 0 24 24"},R=["disabled"],q={key:0,class:"loader-small"},E={key:0,class:"error-message"},H={key:1,class:"success-message"},O={class:"back-to-profile"};function j(t,e,p,r,o,n){return a(),l("div",v,[s("div",P,[s("div",y,[s("h2",null,d(t.$t("profile.resetPassword")),1),s("p",null,d(t.$t("profile.resetPasswordDesc")),1)]),s("form",{onSubmit:e[4]||(e[4]=k((...i)=>n.resetPassword&&n.resetPassword(...i),["prevent"])),class:"reset-password-form"},[s("div",b,[s("label",M,d(t.$t("profile.newPassword")),1),s("div",S,[h(s("input",{type:o.showPassword?"text":"password","onUpdate:modelValue":e[0]||(e[0]=i=>o.password=i),id:"password",required:"",placeholder:t.$t("profile.newPasswordPlaceholder")},null,8,B),[[u,o.password]]),s("button",{type:"button",class:"toggle-password",onClick:e[1]||(e[1]=i=>o.showPassword=!o.showPassword),tabindex:"-1"},[o.showPassword?(a(),l("svg",C,e[6]||(e[6]=[s("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z",stroke:"#667eea","stroke-width":"2"},null,-1),s("circle",{cx:"12",cy:"12",r:"3",stroke:"#667eea","stroke-width":"2"},null,-1)]))):(a(),l("svg",x,e[7]||(e[7]=[s("path",{d:"M17.94 17.94A10.94 10.94 0 0112 19c-7 0-11-7-11-7a21.77 21.77 0 015.06-6.06M9.88 9.88A3 3 0 0112 9c1.66 0 3 1.34 3 3 0 .52-.13 1.01-.35 1.43",stroke:"#667eea","stroke-width":"2"},null,-1),s("path",{d:"M1 1l22 22",stroke:"#667eea","stroke-width":"2"},null,-1)])))])])]),s("div",T,[s("label",I,d(t.$t("profile.confirmPassword")),1),s("div",N,[h(s("input",{type:o.showConfirmPassword?"text":"password","onUpdate:modelValue":e[2]||(e[2]=i=>o.password_confirmation=i),id:"password_confirmation",required:"",placeholder:t.$t("profile.confirmPasswordPlaceholder")},null,8,D),[[u,o.password_confirmation]]),s("button",{type:"button",class:"toggle-password",onClick:e[3]||(e[3]=i=>o.showConfirmPassword=!o.showConfirmPassword),tabindex:"-1"},[o.showConfirmPassword?(a(),l("svg",V,e[8]||(e[8]=[s("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z",stroke:"#667eea","stroke-width":"2"},null,-1),s("circle",{cx:"12",cy:"12",r:"3",stroke:"#667eea","stroke-width":"2"},null,-1)]))):(a(),l("svg",A,e[9]||(e[9]=[s("path",{d:"M17.94 17.94A10.94 10.94 0 0112 19c-7 0-11-7-11-7a21.77 21.77 0 015.06-6.06M9.88 9.88A3 3 0 0112 9c1.66 0 3 1.34 3 3 0 .52-.13 1.01-.35 1.43",stroke:"#667eea","stroke-width":"2"},null,-1),s("path",{d:"M1 1l22 22",stroke:"#667eea","stroke-width":"2"},null,-1)])))])])]),s("button",{type:"submit",disabled:o.loading,class:"submit-btn"},[o.loading?(a(),l("span",q)):w("",!0),c(" "+d(o.loading?t.$t("profile.loading"):t.$t("profile.submit")),1)],8,R),o.error?(a(),l("div",E,d(o.error),1)):w("",!0),o.success?(a(),l("div",H,d(o.success),1)):w("",!0)],32),s("div",O,[s("button",{onClick:e[5]||(e[5]=(...i)=>n.goBackToProfile&&n.goBackToProfile(...i)),class:"back-btn"},[e[10]||(e[10]=s("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 24 24"},[s("path",{d:"M19 12H5M12 19l-7-7 7-7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),c(" "+d(t.$t("profile.backToProfile")),1)])])])])}const F=f(_,[["render",j],["__scopeId","data-v-6f785571"]]);export{F as default};
