import{_ as Q,C as X,D as Z,y as s,L as x,E as ee,r as p,o as u,c as v,e as a,p as r,b as m,W as w,a as U,t as C,F as g,m as R,d as V,k as f,f as I}from"./index-2c18e476.js";const le={class:"product-create-container"},ae={class:"el-upload__text"},P="https://backend.webenia.org",te={__name:"create",setup(re){X();const q=Z(),S=s(null),o=s({name_en:"",name_ar:"",price:"",is_available:1,description_en:"",description_ar:"",category_id:null,currency_id:null,country_id:null,parent_id:null,brand_id:null}),_=s({unit_id:null,weight:null,price:null}),i=localStorage.getItem("lang")||"en",$=s(!1),k=s([]),D=s([]),N=s([]),B=s([]),A=s([]),E=s([]),F=s([]),L={name_en:[{required:!0,message:i==="en"?"Please input product name (EN)":"من فضلك ادخل اسم المنتج بالانجليزي",trigger:"blur"}],price:[{required:!0,message:i==="en"?"Please input product price":"من فضلك ادخل سعر المنتج",trigger:"blur"}],category_id:[{required:!0,message:i==="en"?"Please select a category":"من فضلك اختر فئة",trigger:"change"}],currency_id:[{required:!0,message:i==="en"?"Please select a currency":"من فضلك اختر عملة",trigger:"change"}],country_id:[{required:!0,message:i==="en"?"Please select a country":"من فضلك اختر بلد",trigger:"change"}],brand_id:[{required:!0,message:i==="en"?"Please select a brand":"من فضلك اختر براند",trigger:"change"}]},O=async()=>{try{const t=JSON.parse(localStorage.getItem("tokenData"));m.defaults.headers.common.Authorization=`Bearer ${t.token}`;const[l,d,n,c,h]=await Promise.all([m.get(`${P}/api/categories`),m.get(`${P}/api/currencies`),m.get(`${P}/api/countries`),m.get(`${P}/api/products`),m.get(`${P}/api/units`)]);D.value=l.data.data||[],N.value=d.data||[],B.value=n.data.data||[],A.value=c.data.data||[],E.value=h.data.data||[]}catch{w.error(i==="en"?"Failed to load options":"فشل تحميل الخيارات")}},z=async()=>{try{const t=JSON.parse(localStorage.getItem("tokenData"));m.defaults.headers.common.Authorization=`Bearer ${t.token}`;const l=await m.get("https://backend.webenia.org/api/brands");F.value=Array.isArray(l.data.data)?l.data.data:[l.data.data]}catch{w.error(i==="en"?"Failed to load brands":"فشل تحميل البراندات")}},J=x(()=>N.value.filter(t=>!t.is_deleted)),M=t=>(localStorage.getItem("lang")||"en")==="ar"?t.name_ar:t.name_en,T=(t,l)=>k.value=l,W=(t,l)=>k.value=l,Y=()=>{S.value.validate(async t=>{if(t)try{const l=new FormData;for(const c in o.value)o.value[c]!==null&&l.append(c,o.value[c]);k.value.forEach(c=>l.append("images[]",c.raw)),$.value&&(l.append("unit_id",_.value.unit_id),l.append("weight",_.value.weight),l.append("price",_.value.price));const d=JSON.parse(localStorage.getItem("tokenData"));m.defaults.headers.common.Authorization=`Bearer ${d.token}`;const n=await m.post(`${P}/api/products`,l,{headers:{"Content-Type":"multipart/form-data"}});if(n.data.status)w.success(i==="en"?"Product created successfully":"تم إنشاء المنتج بنجاح"),q.push("/products");else throw new Error(n.data.message||"Failed to create product")}catch{w.error(i==="en"?"Failed to create product":"فشل إنشاء المنتج")}})};return ee(()=>{O(),z()}),(t,l)=>{const d=p("el-input"),n=p("el-form-item"),c=p("el-switch"),h=p("el-divider"),b=p("el-option"),y=p("el-select"),j=p("el-upload"),G=p("el-button"),H=p("el-form"),K=p("el-card");return u(),v("div",le,[a(K,{class:"product-card"},{default:r(()=>[U("h2",null,C(t.$t("Products.CreateProduct")),1),a(H,{model:o.value,ref_key:"formRef",ref:S,rules:L,"label-width":"120px",enctype:"multipart/form-data"},{default:r(()=>[a(n,{label:t.$t("Products.NameEn"),prop:"name_en"},{default:r(()=>[a(d,{modelValue:o.value.name_en,"onUpdate:modelValue":l[0]||(l[0]=e=>o.value.name_en=e)},null,8,["modelValue"])]),_:1},8,["label"]),a(n,{label:t.$t("Products.NameAr"),prop:"name_ar"},{default:r(()=>[a(d,{modelValue:o.value.name_ar,"onUpdate:modelValue":l[1]||(l[1]=e=>o.value.name_ar=e)},null,8,["modelValue"])]),_:1},8,["label"]),a(n,{label:t.$t("Products.Availability"),prop:"is_available"},{default:r(()=>[a(c,{modelValue:o.value.is_available,"onUpdate:modelValue":l[2]||(l[2]=e=>o.value.is_available=e),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])]),_:1},8,["label"]),a(n,{label:"Needs Amount?"},{default:r(()=>[a(c,{modelValue:$.value,"onUpdate:modelValue":l[3]||(l[3]=e=>$.value=e),"active-text":"Yes","inactive-text":"No"},null,8,["modelValue"])]),_:1}),$.value?(u(),v(g,{key:0},[a(h,{"content-position":"left"},{default:r(()=>l[15]||(l[15]=[R("Amount Info")])),_:1,__:[15]}),a(n,{label:"Unit"},{default:r(()=>[a(y,{modelValue:_.value.unit_id,"onUpdate:modelValue":l[4]||(l[4]=e=>_.value.unit_id=e),placeholder:"Select Unit"},{default:r(()=>[(u(!0),v(g,null,V(E.value,e=>(u(),f(b,{key:e.id,label:e.name_en,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(n,{label:"Weight"},{default:r(()=>[a(d,{modelValue:_.value.weight,"onUpdate:modelValue":l[5]||(l[5]=e=>_.value.weight=e),type:"number",placeholder:"Enter weight"},null,8,["modelValue"])]),_:1}),a(n,{label:"Price"},{default:r(()=>[a(d,{modelValue:_.value.price,"onUpdate:modelValue":l[6]||(l[6]=e=>_.value.price=e),type:"number",placeholder:"Enter price"},null,8,["modelValue"])]),_:1})],64)):I("",!0),$.value?I("",!0):(u(),f(n,{key:1,label:t.$t("Products.Price"),prop:"price"},{default:r(()=>[a(d,{modelValue:o.value.price,"onUpdate:modelValue":l[7]||(l[7]=e=>o.value.price=e),type:"number"},null,8,["modelValue"])]),_:1},8,["label"])),a(n,{label:t.$t("Products.DescriptionEn"),prop:"description_en"},{default:r(()=>[a(d,{type:"textarea",modelValue:o.value.description_en,"onUpdate:modelValue":l[8]||(l[8]=e=>o.value.description_en=e)},null,8,["modelValue"])]),_:1},8,["label"]),a(n,{label:t.$t("Products.DescriptionAr"),prop:"description_ar"},{default:r(()=>[a(d,{type:"textarea",modelValue:o.value.description_ar,"onUpdate:modelValue":l[9]||(l[9]=e=>o.value.description_ar=e)},null,8,["modelValue"])]),_:1},8,["label"]),a(n,{label:t.$t("Products.Category"),prop:"category_id"},{default:r(()=>[a(y,{modelValue:o.value.category_id,"onUpdate:modelValue":l[10]||(l[10]=e=>o.value.category_id=e),placeholder:t.$t("Products.SelectCategory"),filterable:"",clearable:""},{default:r(()=>[(u(!0),v(g,null,V(D.value,e=>(u(),f(b,{key:e.id,label:e.name_en||e.name_ar,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{label:"Brand",prop:"brand_id"},{default:r(()=>[a(y,{modelValue:o.value.brand_id,"onUpdate:modelValue":l[11]||(l[11]=e=>o.value.brand_id=e),placeholder:"Select Brand",filterable:"",clearable:""},{default:r(()=>[(u(!0),v(g,null,V(F.value,e=>(u(),f(b,{key:e.id,label:e.name_en,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(n,{label:t.$t("Products.Currency"),prop:"currency_id"},{default:r(()=>[a(y,{modelValue:o.value.currency_id,"onUpdate:modelValue":l[12]||(l[12]=e=>o.value.currency_id=e),placeholder:t.$t("Products.SelectCurrency"),filterable:"",clearable:""},{default:r(()=>[(u(!0),v(g,null,V(J.value,e=>(u(),f(b,{key:e.id,label:M(e),value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{label:t.$t("Products.Country"),prop:"country_id"},{default:r(()=>[a(y,{modelValue:o.value.country_id,"onUpdate:modelValue":l[13]||(l[13]=e=>o.value.country_id=e),placeholder:t.$t("Products.SelectCountry"),filterable:"",clearable:""},{default:r(()=>[(u(!0),v(g,null,V(B.value,e=>(u(),f(b,{key:e.id,label:e.name_en||e.name_ar,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{label:t.$t("Products.ParentProduct"),prop:"parent_id"},{default:r(()=>[a(y,{modelValue:o.value.parent_id,"onUpdate:modelValue":l[14]||(l[14]=e=>o.value.parent_id=e),placeholder:t.$t("Products.SelectParentProduct"),clearable:""},{default:r(()=>[a(b,{label:t.$t("Products.None"),value:null},null,8,["label"]),(u(!0),v(g,null,V(A.value,e=>(u(),f(b,{key:e.id,label:e.name_en,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{label:t.$t("Products.Images"),prop:"images"},{default:r(()=>[a(j,{class:"upload-demo",drag:"",action:"","auto-upload":!1,limit:5,"file-list":k.value,"list-type":"picture","on-change":T,"on-remove":W},{default:r(()=>[l[16]||(l[16]=U("i",{class:"el-icon-upload"},null,-1)),U("div",ae,C(t.$t("Products.DropFiles")),1)]),_:1,__:[16]},8,["file-list"])]),_:1},8,["label"]),a(n,null,{default:r(()=>[a(G,{type:"primary",onClick:Y},{default:r(()=>[R(C(t.$t("Products.CreateButton")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}},ne=Q(te,[["__scopeId","data-v-2e8e8606"]]);export{ne as default};
