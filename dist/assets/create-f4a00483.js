import{_ as V,D as k,y as i,r as u,o as w,c as E,e as n,p as l,a as $,t as _,m as D,b as p,W as m}from"./index-2c18e476.js";const R={class:"currency-create-container"},A="https://backend.webenia.org",B={__name:"create",setup(C){const f=k(),c=localStorage.getItem("lang")||"en",d=i(null),a=i({name_en:"",name_ar:"",exchange_rate:""}),g={name_en:[{required:!0,message:c==="en"?"Please input currency name (EN)":"من فضلك ادخل سعر العملة بالانجليزي",trigger:"blur"}],name_ar:[{required:!0,message:c==="en"?"Please input currency name (AR)":"من فضلك ادخل سعر العملة بالعربي",trigger:"blur"}],exchange_rate:[{required:!0,message:c==="en"?"Please input exchange rate":"من فضلك ادخل سعر الصرف",trigger:"blur"},{pattern:/^\d+(\.\d{1,2})?$/,message:c==="en"?"Exchange rate must be a valid number":"سعر الصرف يجب ان يكون رقم صحيح",trigger:"blur"}]},v=`${A}/api/currencies`,y=()=>{d.value.validate(async o=>{if(o)try{const e=new FormData;e.append("name_en",a.value.name_en),e.append("name_ar",a.value.name_ar),e.append("exchange_rate",a.value.exchange_rate);const r=JSON.parse(localStorage.getItem("tokenData"));if(!r||!r.token)throw new Error("Authentication token not found");p.defaults.headers.common.Authorization=`Bearer ${r.token}`;const t=await p.post(v,e,{headers:{"Content-Type":"multipart/form-data"}});if(t.data.status)m.success("Currency created successfully"),f.push("/currencies");else throw new Error(t.data.message||"Failed to create currency")}catch(e){if(e.response&&e.response.status===422){const r=e.response.data.errors;for(const t in r)m.error(r[t][0])}else m.error(e.message||"Failed to create currency")}else return console.log("Form validation failed"),!1})};return(o,e)=>{const r=u("el-input"),t=u("el-form-item"),b=u("el-button"),h=u("el-form"),x=u("el-card");return w(),E("div",R,[n(x,{class:"currency-card"},{default:l(()=>[$("h2",null,_(o.$t("input.currencies.add-currency")),1),n(h,{model:a.value,ref_key:"formRef",ref:d,rules:g,"label-width":"120px"},{default:l(()=>[n(t,{label:o.$t("input.currencies.name-en"),prop:"name_en"},{default:l(()=>[n(r,{modelValue:a.value.name_en,"onUpdate:modelValue":e[0]||(e[0]=s=>a.value.name_en=s)},null,8,["modelValue"])]),_:1},8,["label"]),n(t,{label:o.$t("input.currencies.name-ar"),prop:"name_ar"},{default:l(()=>[n(r,{modelValue:a.value.name_ar,"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.name_ar=s)},null,8,["modelValue"])]),_:1},8,["label"]),n(t,{label:o.$t("input.currencies.exchangeRate"),prop:"exchange_rate"},{default:l(()=>[n(r,{modelValue:a.value.exchange_rate,"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.exchange_rate=s)},null,8,["modelValue"])]),_:1},8,["label"]),n(t,null,{default:l(()=>[n(b,{type:"primary",onClick:y},{default:l(()=>[D(_(o.$t("input.currencies.create")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}},N=V(B,[["__scopeId","data-v-87ff3d57"]]);export{N as default};
