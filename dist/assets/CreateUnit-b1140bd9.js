import{_ as k,M as y,x as m,r as l,o as w,c as C,e as t,p as s,a as V,t as _,l as N,b as c,W as d}from"./index-07d675ee.js";const E={class:"unit-create-container"},B="https://backend.webenia.org",$={__name:"CreateUnit",setup(x){const p=y(),i=m(null),a=m({name_en:"",name_ar:"",description_en:"",description_ar:""}),f={name_en:[{required:!0,message:"Please input unit name (EN)",trigger:"blur"}]},v=`${B}/api/units`,U=()=>{i.value.validate(async n=>{if(n)try{const e=new FormData;e.append("name_en",a.value.name_en),e.append("name_ar",a.value.name_ar);const o=JSON.parse(localStorage.getItem("tokenData"));if(!o||!o.token)throw new Error("Authentication token not found");c.defaults.headers.common.Authorization=`Bearer ${o.token}`;const r=await c.post(v,e,{headers:{"Content-Type":"multipart/form-data"}});if(r.data.status)d.success("Unit created successfully"),p.push("/units/list");else throw new Error(r.data.message||"Failed to create unit")}catch(e){console.error("Unit creation error:",e),d.error(e.message||"Failed to create unit")}else return console.log("Form validation failed"),!1})};return(n,e)=>{const o=l("el-input"),r=l("el-form-item"),b=l("el-button"),g=l("el-form"),h=l("el-card");return w(),C("div",E,[t(h,{class:"unit-card"},{default:s(()=>[V("h2",null,_(n.$t("Units.CreateUnit")),1),t(g,{model:a.value,ref_key:"formRef",ref:i,rules:f,"label-width":"120px"},{default:s(()=>[t(r,{label:n.$t("Units.NameEn"),prop:"name_en"},{default:s(()=>[t(o,{modelValue:a.value.name_en,"onUpdate:modelValue":e[0]||(e[0]=u=>a.value.name_en=u)},null,8,["modelValue"])]),_:1},8,["label"]),t(r,{label:n.$t("Units.NameAr"),prop:"name_ar"},{default:s(()=>[t(o,{modelValue:a.value.name_ar,"onUpdate:modelValue":e[1]||(e[1]=u=>a.value.name_ar=u)},null,8,["modelValue"])]),_:1},8,["label"]),t(r,null,{default:s(()=>[t(b,{type:"primary",onClick:U},{default:s(()=>[N(_(n.$t("Units.CreateButton")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}},D=k($,[["__scopeId","data-v-54595d0a"]]);export{D as default};
