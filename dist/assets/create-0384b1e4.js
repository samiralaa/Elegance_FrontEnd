import{_ as K,C as Q,x as s,L as X,D as Z,r as c,o as n,c as b,e as a,m as r,b as p,W as k,a as h,t as U,i as f,f as R,F as g,l as E,d as y}from"./index-943297ff.js";const x={class:"product-create-container"},ee={class:"el-upload__text"},V="https://backend.webenia.org",le={__name:"create",setup(ae){const q=Q(),C=s(null),o=s({name_en:"",name_ar:"",price:"",is_available:1,description_en:"",description_ar:"",category_id:null,currency_id:null,country_id:null,parent_id:null,brand_id:null}),m=s({unit_id:null,weight:null,price:null}),P=s(!1),$=s([]),S=s([]),D=s([]),N=s([]),B=s([]),A=s([]),F=s([]),I={name_en:[{required:!0,message:"Please input product name (EN)",trigger:"blur"}],price:[{required:!0,message:"Please input product price",trigger:"blur"}],category_id:[{required:!0,message:"Please select a category",trigger:"change"}],currency_id:[{required:!0,message:"Please select a currency",trigger:"change"}],country_id:[{required:!0,message:"Please select a country",trigger:"change"}],brand_id:[{required:!0,message:"Please select a brand",trigger:"change"}]},L=async()=>{var t,e;try{const d=JSON.parse(localStorage.getItem("tokenData"));p.defaults.headers.common.Authorization=`Bearer ${d.token}`;const[u,i,w,_,v]=await Promise.all([p.get(`${V}/api/categories`),p.get(`${V}/api/currencies`),p.get(`${V}/api/countries`),p.get(`${V}/api/products`),p.get(`${V}/api/units`)]);S.value=u.data.data||[],D.value=i.data||[],N.value=w.data.data||[],B.value=_.data.data||[],A.value=v.data.data||[]}catch(d){k.error(((e=(t=d.response)==null?void 0:t.data)==null?void 0:e.message)||"Failed to load form options")}},O=async()=>{try{const t=JSON.parse(localStorage.getItem("tokenData"));p.defaults.headers.common.Authorization=`Bearer ${t.token}`;const e=await p.get("https://backend.webenia.org/api/brands");F.value=Array.isArray(e.data.data)?e.data.data:[e.data.data]}catch{k.error("Failed to load brands")}},z=X(()=>D.value.filter(t=>!t.is_deleted)),J=t=>(localStorage.getItem("lang")||"en")==="ar"?t.name_ar:t.name_en,M=(t,e)=>$.value=e,T=(t,e)=>$.value=e,W=()=>{C.value.validate(async t=>{if(t)try{const e=new FormData;for(const i in o.value)o.value[i]!==null&&e.append(i,o.value[i]);$.value.forEach(i=>e.append("images[]",i.raw)),P.value&&(e.append("unit_id",m.value.unit_id),e.append("weight",m.value.weight),e.append("price",m.value.price));const d=JSON.parse(localStorage.getItem("tokenData"));p.defaults.headers.common.Authorization=`Bearer ${d.token}`;const u=await p.post(`${V}/api/products`,e,{headers:{"Content-Type":"multipart/form-data"}});if(u.data.status)k.success("Product created successfully"),q.push("/products");else throw new Error(u.data.message||"Failed to create product")}catch(e){k.error(e.message||"Failed to create product")}})};return Z(()=>{L(),O()}),(t,e)=>{const d=c("el-input"),u=c("el-form-item"),i=c("el-switch"),w=c("el-divider"),_=c("el-option"),v=c("el-select"),Y=c("el-upload"),j=c("el-button"),G=c("el-form"),H=c("el-card");return n(),b("div",x,[a(H,{class:"product-card"},{default:r(()=>[h("h2",null,U(t.$t("Products.CreateProduct")),1),a(G,{model:o.value,ref_key:"formRef",ref:C,rules:I,"label-width":"120px",enctype:"multipart/form-data"},{default:r(()=>[a(u,{label:t.$t("Products.NameEn"),prop:"name_en"},{default:r(()=>[a(d,{modelValue:o.value.name_en,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.name_en=l)},null,8,["modelValue"])]),_:1},8,["label"]),a(u,{label:t.$t("Products.NameAr"),prop:"name_ar"},{default:r(()=>[a(d,{modelValue:o.value.name_ar,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.name_ar=l)},null,8,["modelValue"])]),_:1},8,["label"]),P.value?R("",!0):(n(),f(u,{key:0,label:t.$t("Products.Price"),prop:"price"},{default:r(()=>[a(d,{modelValue:o.value.price,"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.price=l),type:"number"},null,8,["modelValue"])]),_:1},8,["label"])),a(u,{label:"Needs Amount?"},{default:r(()=>[a(i,{modelValue:P.value,"onUpdate:modelValue":e[3]||(e[3]=l=>P.value=l),"active-text":"Yes","inactive-text":"No"},null,8,["modelValue"])]),_:1}),P.value?(n(),b(g,{key:1},[a(w,{"content-position":"left"},{default:r(()=>e[15]||(e[15]=[E("Amount Info")])),_:1,__:[15]}),a(u,{label:"Unit"},{default:r(()=>[a(v,{modelValue:m.value.unit_id,"onUpdate:modelValue":e[4]||(e[4]=l=>m.value.unit_id=l),placeholder:"Select Unit"},{default:r(()=>[(n(!0),b(g,null,y(A.value,l=>(n(),f(_,{key:l.id,label:l.name_en,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(u,{label:"Weight"},{default:r(()=>[a(d,{modelValue:m.value.weight,"onUpdate:modelValue":e[5]||(e[5]=l=>m.value.weight=l),type:"number",placeholder:"Enter weight"},null,8,["modelValue"])]),_:1}),a(u,{label:"Price"},{default:r(()=>[a(d,{modelValue:m.value.price,"onUpdate:modelValue":e[6]||(e[6]=l=>m.value.price=l),type:"number",placeholder:"Enter price"},null,8,["modelValue"])]),_:1})],64)):R("",!0),a(u,{label:t.$t("Products.Availability"),prop:"is_available"},{default:r(()=>[a(i,{modelValue:o.value.is_available,"onUpdate:modelValue":e[7]||(e[7]=l=>o.value.is_available=l),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])]),_:1},8,["label"]),a(u,{label:t.$t("Products.DescriptionEn"),prop:"description_en"},{default:r(()=>[a(d,{type:"textarea",modelValue:o.value.description_en,"onUpdate:modelValue":e[8]||(e[8]=l=>o.value.description_en=l)},null,8,["modelValue"])]),_:1},8,["label"]),a(u,{label:t.$t("Products.DescriptionAr"),prop:"description_ar"},{default:r(()=>[a(d,{type:"textarea",modelValue:o.value.description_ar,"onUpdate:modelValue":e[9]||(e[9]=l=>o.value.description_ar=l)},null,8,["modelValue"])]),_:1},8,["label"]),a(u,{label:t.$t("Products.Category"),prop:"category_id"},{default:r(()=>[a(v,{modelValue:o.value.category_id,"onUpdate:modelValue":e[10]||(e[10]=l=>o.value.category_id=l),placeholder:t.$t("Products.SelectCategory"),filterable:"",clearable:""},{default:r(()=>[(n(!0),b(g,null,y(S.value,l=>(n(),f(_,{key:l.id,label:l.name_en||l.name_ar,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),a(u,{label:"Brand",prop:"brand_id"},{default:r(()=>[a(v,{modelValue:o.value.brand_id,"onUpdate:modelValue":e[11]||(e[11]=l=>o.value.brand_id=l),placeholder:"Select Brand",filterable:"",clearable:""},{default:r(()=>[(n(!0),b(g,null,y(F.value,l=>(n(),f(_,{key:l.id,label:l.name_en,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(u,{label:t.$t("Products.Currency"),prop:"currency_id"},{default:r(()=>[a(v,{modelValue:o.value.currency_id,"onUpdate:modelValue":e[12]||(e[12]=l=>o.value.currency_id=l),placeholder:t.$t("Products.SelectCurrency"),filterable:"",clearable:""},{default:r(()=>[(n(!0),b(g,null,y(z.value,l=>(n(),f(_,{key:l.id,label:J(l),value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),a(u,{label:t.$t("Products.Country"),prop:"country_id"},{default:r(()=>[a(v,{modelValue:o.value.country_id,"onUpdate:modelValue":e[13]||(e[13]=l=>o.value.country_id=l),placeholder:t.$t("Products.SelectCountry"),filterable:"",clearable:""},{default:r(()=>[(n(!0),b(g,null,y(N.value,l=>(n(),f(_,{key:l.id,label:l.name_en||l.name_ar,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),a(u,{label:t.$t("Products.ParentProduct"),prop:"parent_id"},{default:r(()=>[a(v,{modelValue:o.value.parent_id,"onUpdate:modelValue":e[14]||(e[14]=l=>o.value.parent_id=l),placeholder:t.$t("Products.SelectParentProduct"),clearable:""},{default:r(()=>[a(_,{label:t.$t("Products.None"),value:null},null,8,["label"]),(n(!0),b(g,null,y(B.value,l=>(n(),f(_,{key:l.id,label:l.name_en,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),a(u,{label:t.$t("Products.Images"),prop:"images"},{default:r(()=>[a(Y,{class:"upload-demo",drag:"",action:"","auto-upload":!1,limit:5,"file-list":$.value,"list-type":"picture","on-change":M,"on-remove":T},{default:r(()=>[e[16]||(e[16]=h("i",{class:"el-icon-upload"},null,-1)),h("div",ee,U(t.$t("Products.DropFiles")),1)]),_:1,__:[16]},8,["file-list"])]),_:1},8,["label"]),a(u,null,{default:r(()=>[a(j,{type:"primary",onClick:W},{default:r(()=>[E(U(t.$t("Products.CreateButton")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}},re=K(le,[["__scopeId","data-v-c0dd5061"]]);export{re as default};
