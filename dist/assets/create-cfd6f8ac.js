import{_ as Q,C as X,D as Z,y as i,L as x,E as ee,r as p,o as u,c as b,e as t,p as r,b as c,W as h,a as w,t as C,F as f,m as R,d as V,k as g,f as G}from"./index-ecb0d7d7.js";const le={class:"product-create-container"},ae={class:"el-upload__text"},$="https://backend.webenia.org",te={__name:"create",setup(re){const{t:y}=X(),I=Z(),U=i(null),o=i({name_en:"",name_ar:"",price:"",is_available:1,description_en:"",description_ar:"",category_id:null,currency_id:null,country_id:null,parent_id:null,brand_id:null}),m=i({unit_id:null,weight:null,price:null}),P=i(!1),k=i([]),B=i([]),D=i([]),N=i([]),A=i([]),E=i([]),F=i([]),q={name_en:[{required:!0,message:y("Validation.ProductNameEn"),trigger:"blur"}],price:[{required:!0,message:y("Validation.ProductPrice"),trigger:"blur"}],category_id:[{required:!0,message:y("Validation.SelectCategory"),trigger:"change"}],currency_id:[{required:!0,message:y("Validation.SelectCurrency"),trigger:"change"}],country_id:[{required:!0,message:y("Validation.SelectCountry"),trigger:"change"}],brand_id:[{required:!0,message:y("Validation.SelectBrand"),trigger:"change"}]},L=async()=>{var a,l;try{const d=JSON.parse(localStorage.getItem("tokenData"));c.defaults.headers.common.Authorization=`Bearer ${d.token}`;const[n,s,S,v,_]=await Promise.all([c.get(`${$}/api/categories`),c.get(`${$}/api/currencies`),c.get(`${$}/api/countries`),c.get(`${$}/api/products`),c.get(`${$}/api/units`)]);B.value=n.data.data||[],D.value=s.data||[],N.value=S.data.data||[],A.value=v.data.data||[],E.value=_.data.data||[]}catch(d){h.error(((l=(a=d.response)==null?void 0:a.data)==null?void 0:l.message)||"Failed to load form options")}},O=async()=>{try{const a=JSON.parse(localStorage.getItem("tokenData"));c.defaults.headers.common.Authorization=`Bearer ${a.token}`;const l=await c.get("https://backend.webenia.org/api/brands");F.value=Array.isArray(l.data.data)?l.data.data:[l.data.data]}catch{h.error("Failed to load brands")}},z=x(()=>D.value.filter(a=>!a.is_deleted)),J=a=>(localStorage.getItem("lang")||"en")==="ar"?a.name_ar:a.name_en,W=(a,l)=>k.value=l,M=(a,l)=>k.value=l,T=()=>{U.value.validate(async a=>{if(a)try{const l=new FormData;for(const s in o.value)o.value[s]!==null&&l.append(s,o.value[s]);k.value.forEach(s=>l.append("images[]",s.raw)),P.value&&(l.append("unit_id",m.value.unit_id),l.append("weight",m.value.weight),l.append("price",m.value.price));const d=JSON.parse(localStorage.getItem("tokenData"));c.defaults.headers.common.Authorization=`Bearer ${d.token}`;const n=await c.post(`${$}/api/products`,l,{headers:{"Content-Type":"multipart/form-data"}});if(n.data.status)h.success("Product created successfully"),I.push("/products");else throw new Error(n.data.message||"Failed to create product")}catch(l){h.error(l.message||"Failed to create product")}})};return ee(()=>{L(),O()}),(a,l)=>{const d=p("el-input"),n=p("el-form-item"),s=p("el-switch"),S=p("el-divider"),v=p("el-option"),_=p("el-select"),Y=p("el-upload"),j=p("el-button"),H=p("el-form"),K=p("el-card");return u(),b("div",le,[t(K,{class:"product-card"},{default:r(()=>[w("h2",null,C(a.$t("Products.CreateProduct")),1),t(H,{model:o.value,ref_key:"formRef",ref:U,rules:q,"label-width":"120px",enctype:"multipart/form-data"},{default:r(()=>[t(n,{label:a.$t("Products.NameEn"),prop:"name_en"},{default:r(()=>[t(d,{modelValue:o.value.name_en,"onUpdate:modelValue":l[0]||(l[0]=e=>o.value.name_en=e)},null,8,["modelValue"])]),_:1},8,["label"]),t(n,{label:a.$t("Products.NameAr"),prop:"name_ar"},{default:r(()=>[t(d,{modelValue:o.value.name_ar,"onUpdate:modelValue":l[1]||(l[1]=e=>o.value.name_ar=e)},null,8,["modelValue"])]),_:1},8,["label"]),t(n,{label:a.$t("Products.Availability"),prop:"is_available"},{default:r(()=>[t(s,{modelValue:o.value.is_available,"onUpdate:modelValue":l[2]||(l[2]=e=>o.value.is_available=e),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])]),_:1},8,["label"]),t(n,{label:a.$t("General.NeedsAmount")},{default:r(()=>[t(s,{modelValue:P.value,"onUpdate:modelValue":l[3]||(l[3]=e=>P.value=e),"active-text":a.$t("General.Yes"),"inactive-text":a.$t("General.No")},null,8,["modelValue","active-text","inactive-text"])]),_:1},8,["label"]),P.value?(u(),b(f,{key:0},[t(S,{"content-position":"left"},{default:r(()=>[R(C(a.$t("General.AmountInfo")),1)]),_:1}),t(n,{label:a.$t("General.Unit"),prop:"unit_id"},{default:r(()=>[t(_,{modelValue:m.value.unit_id,"onUpdate:modelValue":l[4]||(l[4]=e=>m.value.unit_id=e),placeholder:a.$t("General.SelectUnit")},{default:r(()=>[(u(!0),b(f,null,V(E.value,e=>(u(),g(v,{key:e.id,label:e.name_en,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(n,{label:a.$t("General.Weight"),prop:"weight"},{default:r(()=>[t(d,{modelValue:m.value.weight,"onUpdate:modelValue":l[5]||(l[5]=e=>m.value.weight=e),type:"number",placeholder:a.$t("General.EnterWeight")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(n,{label:a.$t("Products.Price"),prop:"price"},{default:r(()=>[t(d,{modelValue:m.value.price,"onUpdate:modelValue":l[6]||(l[6]=e=>m.value.price=e),type:"number",placeholder:a.$t("General.EnterPrice")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])],64)):G("",!0),P.value?G("",!0):(u(),g(n,{key:1,label:a.$t("Products.Price"),prop:"price"},{default:r(()=>[t(d,{modelValue:o.value.price,"onUpdate:modelValue":l[7]||(l[7]=e=>o.value.price=e),type:"number"},null,8,["modelValue"])]),_:1},8,["label"])),t(n,{label:a.$t("Products.DescriptionEn"),prop:"description_en"},{default:r(()=>[t(d,{type:"textarea",modelValue:o.value.description_en,"onUpdate:modelValue":l[8]||(l[8]=e=>o.value.description_en=e)},null,8,["modelValue"])]),_:1},8,["label"]),t(n,{label:a.$t("Products.DescriptionAr"),prop:"description_ar"},{default:r(()=>[t(d,{type:"textarea",modelValue:o.value.description_ar,"onUpdate:modelValue":l[9]||(l[9]=e=>o.value.description_ar=e)},null,8,["modelValue"])]),_:1},8,["label"]),t(n,{label:a.$t("Products.Category"),prop:"category_id"},{default:r(()=>[t(_,{modelValue:o.value.category_id,"onUpdate:modelValue":l[10]||(l[10]=e=>o.value.category_id=e),placeholder:a.$t("Products.SelectCategory"),filterable:"",clearable:""},{default:r(()=>[(u(!0),b(f,null,V(B.value,e=>(u(),g(v,{key:e.id,label:e.name_en||e.name_ar,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(n,{label:a.$t("Products.Brand"),prop:"brand_id"},{default:r(()=>[t(_,{modelValue:o.value.brand_id,"onUpdate:modelValue":l[11]||(l[11]=e=>o.value.brand_id=e),placeholder:"Select Brand",filterable:"",clearable:""},{default:r(()=>[(u(!0),b(f,null,V(F.value,e=>(u(),g(v,{key:e.id,label:e.name_en,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(n,{label:a.$t("Products.Currency"),prop:"currency_id"},{default:r(()=>[t(_,{modelValue:o.value.currency_id,"onUpdate:modelValue":l[12]||(l[12]=e=>o.value.currency_id=e),placeholder:a.$t("Products.SelectCurrency"),filterable:"",clearable:""},{default:r(()=>[(u(!0),b(f,null,V(z.value,e=>(u(),g(v,{key:e.id,label:J(e),value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(n,{label:a.$t("Products.Country"),prop:"country_id"},{default:r(()=>[t(_,{modelValue:o.value.country_id,"onUpdate:modelValue":l[13]||(l[13]=e=>o.value.country_id=e),placeholder:a.$t("Products.SelectCountry"),filterable:"",clearable:""},{default:r(()=>[(u(!0),b(f,null,V(N.value,e=>(u(),g(v,{key:e.id,label:e.name_en||e.name_ar,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(n,{label:a.$t("Products.ParentProduct"),prop:"parent_id"},{default:r(()=>[t(_,{modelValue:o.value.parent_id,"onUpdate:modelValue":l[14]||(l[14]=e=>o.value.parent_id=e),placeholder:a.$t("Products.SelectParentProduct"),clearable:""},{default:r(()=>[t(v,{label:a.$t("Products.None"),value:null},null,8,["label"]),(u(!0),b(f,null,V(A.value,e=>(u(),g(v,{key:e.id,label:e.name_en,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(n,{label:a.$t("Products.Images"),prop:"images"},{default:r(()=>[t(Y,{class:"upload-demo",drag:"",action:"","auto-upload":!1,limit:5,"file-list":k.value,"list-type":"picture","on-change":W,"on-remove":M},{default:r(()=>[l[15]||(l[15]=w("i",{class:"el-icon-upload"},null,-1)),w("div",ae,C(a.$t("Products.DropFiles")),1)]),_:1,__:[15]},8,["file-list"])]),_:1},8,["label"]),t(n,null,{default:r(()=>[t(j,{type:"primary",onClick:T},{default:r(()=>[R(C(a.$t("Products.CreateButton")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}},ne=Q(te,[["__scopeId","data-v-9560c0d9"]]);export{ne as default};
