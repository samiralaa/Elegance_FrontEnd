import{_ as k,y as m,D as B,r as n,a5 as U,o as f,c as A,a as g,e as a,q as o,b as i,m as c,g as D,j as E,a4 as N}from"./index-e527976a.js";const C={class:"units-container"},$={class:"header"},z="https://backend.webenia.org",F={__name:"index",setup(I){const d=m([]),s=m(!1),u=`${z}/api/units`,_=async()=>{s.value=!0;try{const t=JSON.parse(localStorage.getItem("tokenData"));if(!t||!t.token)throw new Error("Authentication token not found");i.defaults.headers.common.Authorization=`Bearer ${t.token}`;const e=await i.get(u);if(e.data.status)d.value=e.data.data;else throw new Error(e.data.message||"Failed to fetch units")}catch(t){console.error("Fetch units error:",t)}finally{s.value=!1}};B(()=>{_()});const v=t=>{console.log("Update unit:",t)},w=async t=>{try{await N.confirm("Are you sure you want to delete this unit?","Warning",{confirmButtonText:"Yes",cancelButtonText:"No",type:"warning"});const e=await i.delete(`${u}/${t.id}`);if(e.data.status)console.log("Unit deleted successfully"),_();else throw new Error(e.data.message||"Failed to delete unit")}catch(e){console.error("Delete unit error:",e)}};return(t,e)=>{const l=n("el-button"),r=n("el-table-column"),y=n("el-table"),h=n("el-card"),x=U("loading");return f(),A("div",C,[g("div",$,[e[1]||(e[1]=g("h2",null,"Units List",-1)),a(l,{type:"primary",to:"/units/create",tag:"router-link"},{default:o(()=>e[0]||(e[0]=[c("Add Unit")])),_:1,__:[0]})]),a(h,{class:"units-table"},{default:o(()=>[D((f(),E(y,{data:d.value,style:{width:"100%"}},{default:o(()=>[a(r,{prop:"name_ar",label:"Name (Arabic)"}),a(r,{prop:"name_en",label:"Name (English)"}),a(r,{label:"Actions"},{default:o(p=>[a(l,{type:"text",size:"small",onClick:b=>v(p.row)},{default:o(()=>e[2]||(e[2]=[c("Update")])),_:2,__:[2]},1032,["onClick"]),a(l,{type:"text",size:"small",onClick:b=>w(p.row)},{default:o(()=>e[3]||(e[3]=[c("Delete")])),_:2,__:[3]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[x,s.value]])]),_:1})])}}},S=k(F,[["__scopeId","data-v-1c4ac316"]]);export{S as default};
