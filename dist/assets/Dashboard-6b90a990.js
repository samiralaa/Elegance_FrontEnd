import{_ as D,R as z,S as B,y as _,E as k,O as I,r as O,o as v,c as f,a as e,e as i,p as o,t,n as N,f as T,m as x,F as R,d as L,T as P,U as V,b as h}from"./index-734559de.js";const J=z({name:"DashboardView",setup(){const s=B(),c=_(0),g=_(0),w=_(0),b=_(0),m=_([]),n=_({today_sales:0,this_month_sales:0,last_month_sales:0,month_over_month_growth:0,daily_sales:[],top_selling_products:[],converted_total_sales:0,converted_currency:""});let d=null;const l=()=>{const a=document.getElementById("salesChart");a&&(d=P(a),p())},p=()=>{if(!d)return;const a=n.value.daily_sales.map(u=>u.date),r=n.value.daily_sales.map(u=>parseFloat(u.total_sales)),F=n.value.daily_sales.map(u=>u.total_orders),A={tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["Sales","Orders"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:a},yAxis:[{type:"value",name:"Sales ($)",position:"left"},{type:"value",name:"Orders",position:"right"}],series:[{name:"Sales",type:"line",smooth:!0,data:r,itemStyle:{color:"#409EFF"},areaStyle:{color:new V(0,0,0,1,[{offset:0,color:"rgba(64,158,255,0.3)"},{offset:1,color:"rgba(64,158,255,0.1)"}])}},{name:"Orders",type:"line",smooth:!0,yAxisIndex:1,data:F,itemStyle:{color:"#67C23A"}}]};d.setOption(A)},y=()=>{d&&d.resize()};k(()=>{l(),window.addEventListener("resize",y)}),I(()=>{d&&d.dispose(),window.removeEventListener("resize",y)});const $=async()=>{try{const a=JSON.parse(localStorage.getItem("tokenData"));if(!a||!a.token)throw new Error("Authentication token not found");h.defaults.headers.common.Authorization=`Bearer ${a.token}`;const r=await h.get("https://backend.webenia.org/api/dashboard/sales-overview");r.data.status===!0&&(n.value=r.data.data,c.value=parseFloat(r.data.data.this_month_sales||0),c.value=parseFloat(r.data.data.converted_total_sales||0),p())}catch(a){console.error("Error fetching sales overview:",a)}},S=async()=>{try{const a=JSON.parse(localStorage.getItem("tokenData"));if(!a||!a.token)throw new Error("Authentication token not found");h.defaults.headers.common.Authorization=`Bearer ${a.token}`;const r=await h.get("https://backend.webenia.org/api/dashboard/total-products");r.data.status===!0&&(b.value=r.data.data.total_products)}catch(a){console.error("Error fetching total products:",a)}},C=async()=>{try{const a=JSON.parse(localStorage.getItem("tokenData"));if(!a||!a.token)throw new Error("Authentication token not found");h.defaults.headers.common.Authorization=`Bearer ${a.token}`;const r=await h.get("https://backend.webenia.org/api/dashboard/total-orders");r.data.status===!0&&(g.value=r.data.data.total_orders)}catch(a){console.error("Error fetching total orders:",a)}},E=async()=>{try{const a=JSON.parse(localStorage.getItem("tokenData"));if(!a||!a.token)throw new Error("Authentication token not found");h.defaults.headers.common.Authorization=`Bearer ${a.token}`;const r=await h.get("https://backend.webenia.org/api/orders/count/new");r.data.status===!0&&(m.value=r.data.data,console.log("Recent Orders:",m.value))}catch(a){console.error("Error fetching recent orders:",a)}};return k(async()=>{try{await C(),await s.dispatch("fetchCustomers"),await S(),await E(),await $(),w.value=s.getters.totalCustomers||0}catch(a){console.error("Error fetching dashboard data:",a)}}),{totalRevenue:c,totalOrders:g,totalCustomers:w,totalProducts:b,orders:m,salesOverview:n}}}),M={class:"dashboard d-flex flex-wrap flex-grow-1 container-fluid px-2 px-md-4"},U={class:"row w-100 g-3"},G={class:"card-header"},j={class:"card-content"},q={key:0},H={class:"card-header"},K={class:"card-content"},Q={class:"card-header"},W={class:"card-content"},X={class:"card-header"},Y={class:"card-content"},Z={class:"container-fluid mt-3"},ee={class:"w-100 mb-3"},te={class:"card-header"},se={class:"sales-overview"},ae={class:"sales-metrics"},oe={class:"metric"},re={class:"label"},ne={class:"value"},de={class:"metric"},le={class:"label"},ie={class:"value"},ce={class:"metric"},he={class:"label"},_e={class:"value"},ue={class:"w-100"},me={class:"d-flex gap-2 align-items-center"},pe={class:"badge text-bg-secondary p-2 position-relative"},ve={class:"overflow-auto"},fe={class:"table table-hover table-responsive align-middle"},ge={scope:"col"},we={scope:"col"},be={scope:"col"},ye={scope:"col"},ke={scope:"col"},Oe={class:"align-middle"},$e={class:"d-flex align-items-center gap-2"},Se={class:"avatar bg-primary text-white rounded-circle d-flex justify-content-center px-3 py-2 align-items-center"},Ce={class:"user-info"},Ee={class:"mb-0"},Fe={class:"text-muted"},Ae={class:"align-middle"},De={class:"align-middle"},ze={class:"align-middle text-capitalize text-center"},Be={class:"align-middle"};function Ie(s,c,g,w,b,m){const n=O("el-card"),d=O("el-col");return v(),f("div",M,[e("div",U,[i(d,{span:6,xs:24,sm:12,md:6},{default:o(()=>[i(n,{class:"summary-card h-100"},{header:o(()=>[e("div",G,[e("span",null,t(s.$t("dashboard.Total-Revenue")),1)])]),default:o(()=>[e("div",j,[e("h2",null,"$"+t(s.totalRevenue.toFixed(2)),1),e("span",{class:N(["trend",s.salesOverview.month_over_month_growth>=0?"positive":"negative"])},t(s.salesOverview.month_over_month_growth>=0?"+":"")+t(s.salesOverview.month_over_month_growth)+"% ",3),s.salesOverview.converted_total_sales?(v(),f("div",q,[e("small",null," ("+t(s.salesOverview.converted_total_sales.toFixed(2))+" "+t(s.salesOverview.converted_currency)+") ",1)])):T("",!0)])]),_:1})]),_:1}),i(d,{span:6,xs:24,sm:12,md:6},{default:o(()=>[i(n,{class:"summary-card h-100"},{header:o(()=>[e("div",H,[e("span",null,t(s.$t("dashboard.total-Orders")),1)])]),default:o(()=>[e("div",K,[e("h2",null,t(s.totalOrders),1)])]),_:1})]),_:1}),i(d,{span:6,xs:24,sm:12,md:6},{default:o(()=>[i(n,{class:"summary-card h-100"},{header:o(()=>[e("div",Q,[e("span",null,t(s.$t("dashboard.total-Customers")),1)])]),default:o(()=>[e("div",W,[e("h2",null,t(s.totalCustomers),1)])]),_:1})]),_:1}),i(d,{span:6,xs:24,sm:12,md:6},{default:o(()=>[i(n,{class:"summary-card h-100"},{header:o(()=>[e("div",X,[e("span",null,t(s.$t("dashboard.total-Products")),1)])]),default:o(()=>[e("div",Y,[e("h2",null,t(s.totalProducts),1)])]),_:1})]),_:1})]),e("div",Z,[e("div",ee,[i(n,{class:"w-100"},{header:o(()=>[e("div",te,[e("span",null,t(s.$t("dashboard.Sales-Overview")),1)])]),default:o(()=>[e("div",se,[e("div",ae,[e("div",oe,[e("span",re,t(s.$t("dashboard.Today-Sales")),1),e("span",ne,"$"+t(parseFloat(s.salesOverview.today_sales||0).toFixed(2)),1)]),e("div",de,[e("span",le,t(s.$t("dashboard.This-Month")),1),e("span",ie,"$"+t(parseFloat(s.salesOverview.this_month_sales||0).toFixed(2)),1)]),e("div",ce,[e("span",he,t(s.$t("dashboard.Last-Month")),1),e("span",_e,"$"+t(parseFloat(s.salesOverview.last_month_sales||0).toFixed(2)),1)])]),c[0]||(c[0]=e("div",{id:"salesChart",class:"chart-container"},null,-1))])]),_:1})]),e("div",ue,[i(n,{class:"w-100"},{header:o(()=>[e("div",me,[e("span",null,t(s.$t("dashboard.recent-Orders")),1),e("span",pe,[x(" +"+t(s.orders.count)+" ",1),c[1]||(c[1]=e("span",{class:"position-absolute top-0 start-100 translate-middle p-2 bg-danger border border-light rounded-circle"},null,-1))])])]),default:o(()=>[e("div",ve,[e("table",fe,[e("thead",null,[e("tr",null,[e("th",ge,t(s.$t("dashboard.customer")),1),e("th",we,t(s.$t("dashboard.address")),1),e("th",be,t(s.$t("dashboard.Total")),1),e("th",ye,t(s.$t("dashboard.payment-method")),1),e("th",ke,t(s.$t("dashboard.Order-Date")),1)])]),e("tbody",null,[(v(!0),f(R,null,L(s.orders.orders,(l,p)=>(v(),f("tr",{key:p},[e("td",Oe,[e("div",$e,[e("div",Se,t(l.user.name?l.user.name.charAt(0).toUpperCase():"?"),1),e("div",Ce,[e("h6",Ee,t(l.user.name),1),e("small",Fe,t(l.user.email),1)])])]),e("td",Ae,t(l.address.country.name_en),1),e("td",De,t(l.total_price)+" "+t(l.currency),1),e("td",ze,t(l.payment_method),1),e("td",Be,t(l.ordered_at),1)]))),128))])])])]),_:1})])])])}const Te=D(J,[["render",Ie],["__scopeId","data-v-4b9ef056"]]);export{Te as default};
