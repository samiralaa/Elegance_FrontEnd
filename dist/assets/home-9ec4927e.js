import{q as Y,s as Z,A as q,u as ee,_ as A,r as $,o as l,c as f,a as t,e as y,t as v,F as N,d as z,n as W,f as w,b as I,p as O,x as V,y as M,z as H,B as R,C as J,D as G,E as S,i as E,l as D,G as Q,j as te,w as se,v as oe,H as ae,I as ie,J as re}from"./index-b9e1cd55.js";import{$ as j}from"./slick-theme-614b323e.js";const ne={name:"WebsiteCategories",computed:{...Y("websiteCategories",{categories:s=>s.items,loading:s=>s.loading,error:s=>s.error})},created(){this.loadCategories()},methods:{...Z("websiteCategories",{fetchCategories:"fetchWebsiteCategories"}),getProductImage(s){if(!s.image)return"/placeholder-image.jpg";const o=s.image,_=`${q}/public/storage/`;if(o.startsWith(_))return o;if(o.startsWith(q)){const h=o.substring(q.length);return`${_}${h.startsWith("/")?h.substring(1):h}`}return o.startsWith("http")?o:`${_}${o}`},async loadCategories(){try{await this.fetchCategories(),await ee();const s=j(this.$refs.slider);s.hasClass("slick-initialized")&&s.slick("unslick"),s.slick({slidesToShow:7,slidesToScroll:1,rtl:this.$i18n.locale==="ar",responsive:[{breakpoint:1200,settings:{slidesToShow:5}},{breakpoint:992,settings:{slidesToShow:4}},{breakpoint:768,settings:{slidesToShow:3}},{breakpoint:576,settings:{slidesToShow:2}},{breakpoint:400,settings:{slidesToShow:1}}]})}catch(s){console.error("Failed to load categories:",s)}},scrollLeft(){const s=j(this.$refs.slider);s.length&&s.hasClass("slick-initialized")&&s.slick("slickPrev")},scrollRight(){const s=j(this.$refs.slider);s.length&&s.hasClass("slick-initialized")&&s.slick("slickNext")},getAlt(s){return this.$i18n.locale==="ar"?s.name_ar:s.name}},beforeUnmount(){const s=j(this.$refs.slider);s.length&&s.hasClass("slick-initialized")&&s.slick("unslick")}},ce={class:"all-categories py-4"},le={class:"container"},de={class:"title"},_e={class:"slider-wrapper"},ue={class:"scrollers ms-3 mb-2"},he={class:"slider",ref:"slider"},ge=["href"],fe={class:"category-content"},ve=["src"],pe={key:0,class:"loading-overlay"},me={key:1,class:"error-message"};function be(s,o,_,h,n,g){const k=$("fa");return l(),f("section",ce,[t("div",le,[t("div",de,[y(k,{class:"fa-icon",icon:["fas","cubes"]}),t("h2",null,v(s.$t("home.categories")),1)]),t("div",_e,[t("div",ue,[t("button",{class:"btn nav-button left",onClick:o[0]||(o[0]=(...d)=>g.scrollLeft&&g.scrollLeft(...d))},"←"),t("button",{class:"btn nav-button right",onClick:o[1]||(o[1]=(...d)=>g.scrollRight&&g.scrollRight(...d))},"→")]),t("div",he,[(l(!0),f(N,null,z(s.categories,d=>(l(),f("a",{key:d.id,class:"card",href:`/category/${d.id}`},[t("div",fe,[t("img",{src:g.getProductImage(d)},null,8,ve),t("p",{class:W({rtl:s.$i18n.locale==="ar"})},v(s.$i18n.locale==="ar"?d.name_ar:d.name),3)])],8,ge))),128))],512),s.loading?(l(),f("div",pe,o[2]||(o[2]=[t("div",{class:"loading-spinner"},null,-1)]))):w("",!0),s.error?(l(),f("div",me,v(s.error),1)):w("",!0)])])])}const ye=A(ne,[["render",be],["__scopeId","data-v-9a4f0c77"]]);const $e={name:"HomeBrands",data(){return{brands:[]}},created(){this.fetchBrands()},methods:{async fetchBrands(){try{const s=await I.get("https://backend.webenia.org/api/website/brands/section");this.brands=s.data.data}catch(s){console.error("Error fetching brands:",s)}},getImageUrl(s){return`https://backend.webenia.org/public/storage/${s}`},likeBrand(s){console.log(`Brand ${s} liked!`)}}},we={class:"our-brands"},ke={class:"container"},Se={class:"title mt-5"},Pe={class:"content"},Ce=["src","alt"],Fe={key:1,class:"text-muted small"};function xe(s,o,_,h,n,g){const k=$("fa"),d=$("router-link");return l(),f("section",we,[t("div",ke,[t("div",Se,[y(k,{class:"fa-icon",icon:["fas","diagram-project"]}),t("h2",null,v(s.$t("home.brands")),1)]),t("div",Pe,[(l(!0),f(N,null,z(n.brands,P=>(l(),f("div",{key:P.id,class:"brand-img"},[y(d,{to:`/brand/${P.id}`,class:"text-decoration-none"},{default:O(()=>[P.images.length?(l(),f("img",{key:0,src:g.getImageUrl(P.images[0].path),alt:P.name_en,class:"img-fluid"},null,8,Ce)):(l(),f("span",Fe,"No Image"))]),_:2},1032,["to"])]))),128))])])])}const Ie=A($e,[["render",xe],["__scopeId","data-v-e9c8270b"]]);const Oe={class:"products-section"},Be={class:"container"},Ve={class:"title section-header d-flex align-items-center mb-4"},Te={class:"mb-0"},Le={key:0,class:"text-center my-4"},Ee={key:1,class:"row g-3"},Ae={class:"product-card card border-0 h-100"},Ue={class:"position-relative overflow-hidden bg-light"},Ne=["src","alt"],We={key:0,class:"sale-badge"},ze={class:"product-actions d-flex justify-content-center gap-2 w-100"},je=["onClick","disabled"],De=["onClick"],qe=["onClick","title"],Me={class:"card-body"},He={class:"card-title"},Re={class:"price-container"},Je={key:0,class:"discount-badge"},Ge={key:1,class:"price-old"},Ke={class:"card-text card-price"},Qe={__name:"ProductSection",setup(s){const o=V([]),_=V([]),h=V(!1),n=M(),g=H(),{locale:k,t:d}=R(),P=e=>`https://backend.webenia.org/public/storage/${e}`,F=async()=>{try{const e=await I.get("https://backend.webenia.org/api/currencies");e.data.currencies&&(_.value=e.data.currencies)}catch(e){console.error("Error fetching currencies:",e)}},B=async()=>{try{const e=JSON.parse(localStorage.getItem("selectedCurrency"))||{code:"USD"},c=await I.get("https://backend.webenia.org/api/website/products/section",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,Currency:e.code}});c.data.status&&(o.value=c.data.data,await C())}catch(e){console.error("Error fetching products:",e),S({title:"Error",message:"Failed to load products.",type:"error"})}finally{h.value=!1}},C=async()=>{try{const e=await I.get("https://backend.webenia.org/api/favorites",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});e.data.status&&e.data.data&&n.setFavorites(e.data.data)}catch(e){console.error("Error fetching favorites:",e)}},x=e=>n.favorites.some(c=>c.product_id===e),T=e=>{var c,i;return((c=n.favorites.find(b=>b.product_id===e))==null?void 0:c.favorite_id)||((i=n.favorites.find(b=>b.product_id===e))==null?void 0:i.id)},L=async e=>{var c,i;try{if(x(e.id)){const b=T(e.id);b&&(await n.removeFromFavorites(b),S({title:d("success"),message:d("favorite_removed")||"Product removed from favorites",type:"success"}))}else{const b=await n.addToFavorites(e.id);S({title:d("success"),message:b.message||d("favorite_added")||"Product added to favorites",type:"success"})}}catch(b){console.error("Favorite error:",b),S({title:d("error"),message:((i=(c=b.response)==null?void 0:c.data)==null?void 0:i.message)||d("login_required_favorite")||"Login required to favorite product",type:"error"})}},r=async e=>{var c,i;try{let b=0;if(e.discount&&e.discount.is_active){const U=parseFloat(e.discount.discount_value),p=parseFloat(e.converted_price||e.price);b=p-p*(U/100)}else b=parseFloat(e.converted_price)||parseFloat(e.price);const u=await I.post("https://backend.webenia.org/api/cart-items",{product_id:e.id,quantity:1,price:b},{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});u.data.status?(S.success(u.data.message),g.incrementCount(),await g.fetchCartCount()):S.error(u.data.message)}catch(b){console.error("Error adding to cart:",b),S.error(((i=(c=b.response)==null?void 0:c.data)==null?void 0:i.message)||"Error adding product to cart")}},m=e=>{if(e.discount&&e.discount.is_active){const c=parseFloat(e.discount.discount_value),i=parseFloat(e.converted_price||e.price);return(i-i*(c/100)).toFixed(2)}return e.converted_price||e.price},a=e=>{if(e.discount&&e.discount.is_active){const c=parseFloat(e.discount.discount_value);return Math.round(c)}return 0};return J(async()=>{await F(),await B(),window.addEventListener("currency-changed",()=>{B()})}),(e,c)=>{const i=$("fa"),b=$("router-link");return l(),f("div",Oe,[t("div",Be,[t("div",Ve,[y(i,{class:"fa-icon me-2",icon:["fas","shopping-basket"]}),t("h2",Te,v(e.$t("home.products")),1)]),h.value?(l(),f("div",Le,"Loading products...")):(l(),f("div",Ee,[(l(!0),f(N,null,z(o.value,u=>(l(),f("div",{key:u.id,class:"col-sm-6 col-md-4 col-lg-3"},[t("div",Ae,[t("div",Ue,[y(b,{to:`/read/products/${u.id}`},{default:O(()=>[u.images&&u.images.length?(l(),f("img",{key:0,src:P(u.images[0].path),alt:u.name_en,class:"card-img-top product-img"},null,8,Ne)):w("",!0)]),_:2},1032,["to"]),u.is_available?w("",!0):(l(),f("div",We,v(e.$t("products.outOfStock")),1)),t("div",ze,[y(b,{to:`/read/products/${u.id}`,class:"btn btn-light rounded-circle shadow-sm",title:"View"},{default:O(()=>[y(i,{icon:"eye"})]),_:2},1032,["to"]),t("button",{onClick:U=>r(u),class:W(["btn btn-light shadow-sm disable",{disabled:!u.is_available}]),disabled:!u.is_available},v(e.$t("home.add-to-cart")),11,je),t("button",{onClick:U=>r(u),class:"d-none btn rounded-circle shadow-sm btn-light enable"},[y(i,{icon:"shopping-cart"})],8,De),t("button",{onClick:U=>L(u),class:W(["btn rounded-circle shadow-sm btn-light",x(u.id)?"text-danger":""]),title:x(u.id)?"Remove from favorites":"Add to favorites"},[y(i,{icon:x(u.id)?"fas fa-heart":"far fa-heart"},null,8,["icon"])],10,qe)])]),t("div",Me,[t("h5",He,v(G(k)==="ar"?u.name_ar:u.name_en),1),t("div",Re,[u.discount&&u.discount.is_active?(l(),f("span",Je,v(a(u))+"% OFF ",1)):w("",!0),u.discount&&u.discount.is_active?(l(),f("span",Ge,v(u.converted_price)+" "+v(u.currency_code),1)):w("",!0),t("span",Ke,v(m(u))+" "+v(u.currency_code),1)])])])]))),128))]))])])}}},Xe=A(Qe,[["__scopeId","data-v-d1bf4f19"]]);const Ye={class:"products-section"},Ze={class:"container"},et={class:"title mt-5"},tt={class:"row g-4"},st={class:"card my-3 p-sm-4"},ot={class:"img-container rounded position-relative"},at=["src","alt"],it={key:0,class:"sale-badge"},rt={class:"body-container"},nt={class:"card-body"},ct={class:"card-title"},lt={class:"price-container"},dt={key:0,class:"discount-badge"},_t={key:1,class:"price-old"},ut={class:"card-text card-price"},ht={class:"product-actions d-flex justify-content-center flex-wrap gap-2"},gt=["disabled","onClick"],ft=["onClick","title"],vt={__name:"BestSelling",setup(s){const o=V([]),_=V(!1),h=V(""),n=M(),g=H(),{locale:k,t:d}=R();V([]),V({code:"USD"});const P=async()=>{try{const a=JSON.parse(localStorage.getItem("selectedCurrency"))||{code:"USD"},e=await I.get("https://backend.webenia.org/api/website/best-selling/products",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,Currency:a.code}});e.data.status&&e.data.data&&(o.value=e.data.data,await F())}catch(a){console.error("Error fetching products:",a),S({title:"Error",message:"Failed to load products.",type:"error"})}},F=async()=>{try{const a=await I.get("https://backend.webenia.org/api/favorites",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});a.data.status&&a.data.data&&n.setFavorites(a.data.data)}catch(a){console.error("Error fetching favorites:",a)}},B=a=>`https://backend.webenia.org/public/storage/${a}`,C=a=>n.favorites.some(e=>e.product_id===a),x=a=>{const e=n.favorites.find(c=>c.product_id===a);return e?e.favorite_id||e.id:null},T=async a=>{var e,c;try{if(C(a.id)){const i=x(a.id);i&&(await n.removeFromFavorites(i),S({title:d("success"),message:d("favorite_removed")||"Product removed from favorites",type:"success"}))}else{const i=await n.addToFavorites(a.id);S({title:d("success"),message:i.message||d("favorite_added")||"Product added to favorites",type:"success"})}}catch(i){console.error("Favorite error:",i),S({title:d("error"),message:((c=(e=i.response)==null?void 0:e.data)==null?void 0:c.message)||d("login_required_favorite")||"Login required to favorite product",type:"error"})}},L=async a=>{var e,c;try{let i=0;if(a.discount&&a.discount.is_active){const U=parseFloat(a.discount.discount_value),p=parseFloat(a.converted_price||a.price);i=p-p*(U/100)}else i=parseFloat(a.converted_price)||parseFloat(a.price);const b=localStorage.getItem("user_id"),u=await I.post("https://backend.webenia.org/api/cart-items",{product_id:a.id,quantity:1,price:i,user_id:b},{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});u.data.status?(S({title:d("success"),message:u.data.message,type:"success"}),g.incrementCount(),await g.fetchCartCount()):S({title:d("error"),message:u.data.message,type:"error"})}catch(i){console.error("Error adding to cart:",i),S({title:d("error"),message:(c=(e=i.response)==null?void 0:e.data)==null?void 0:c.message,type:"error"})}},r=a=>{if(a.discount&&a.discount.is_active){const e=parseFloat(a.discount.discount_value),c=parseFloat(a.converted_price||a.price);return(c-c*(e/100)).toFixed(2)}return(a.converted_price||a.price).toFixed(2)},m=a=>a.discount&&a.discount.is_active?Math.round(parseFloat(a.discount.discount_value)):0;return J(()=>{P(),window.addEventListener("currency-changed",()=>{P()})}),(a,e)=>{const c=$("fa"),i=$("router-link"),b=$("el-col"),u=$("el-button"),U=$("el-dialog");return l(),f("div",Ye,[t("div",Ze,[t("div",et,[y(c,{class:"fa-icon",icon:["fas","star"]}),t("h2",null,v(a.$t("home.best-selling")),1)]),t("div",tt,[(l(!0),f(N,null,z(o.value,p=>(l(),E(b,{key:p.id,xs:24,sm:24,md:12,lg:12},{default:O(()=>[t("div",st,[t("div",ot,[y(i,{to:`/read/products/${p.id}`},{default:O(()=>[p.images.length?(l(),f("img",{key:0,src:B(p.images[0].path),alt:p.name_en,class:"product-img card-img bg-light"},null,8,at)):w("",!0)]),_:2},1032,["to"]),p.is_available?w("",!0):(l(),f("div",it,v(a.$t("products.outOfStock")),1))]),t("div",rt,[t("div",nt,[t("h5",ct,v(G(k)==="ar"?p.name_ar:p.name_en),1),t("div",lt,[p.discount&&p.discount.is_active?(l(),f("span",dt,v(m(p))+"% OFF ",1)):w("",!0),p.discount&&p.discount.is_active?(l(),f("span",_t,v((p.converted_price||p.price).toFixed(2))+" "+v(p.currency_code),1)):w("",!0),t("span",ut,v(r(p))+" "+v(p.currency_code),1)])]),t("div",ht,[y(i,{to:`/read/products/${p.id}`,class:"btn btn-light rounded-circle shadow-sm",title:"View"},{default:O(()=>[y(c,{icon:"eye"})]),_:2},1032,["to"]),t("button",{disabled:!p.is_available,onClick:X=>L(p),class:"btn btn-light shadow-sm rounded-circle"},[y(c,{icon:"cart-plus"})],8,gt),t("button",{onClick:X=>T(p),class:W(["btn rounded-circle shadow-sm btn-light",C(p.id)?"text-danger":""]),title:C(p.id)?"Remove from favorites":"Add to favorites"},[y(c,{icon:C(p.id)?"fas fa-heart":"far fa-heart"},null,8,["icon"])],10,ft)])])])]),_:2},1024))),128))])]),y(U,{modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=p=>_.value=p),title:"🎉 Success",width:"30%","before-close":()=>_.value=!1,center:!0,"close-on-click-modal":!1,"show-close":!1},{footer:O(()=>[y(u,{type:"primary",onClick:e[0]||(e[0]=p=>_.value=!1)},{default:O(()=>e[2]||(e[2]=[D("OK")])),_:1,__:[2]})]),default:O(()=>[t("span",null,v(h.value),1)]),_:1},8,["modelValue","before-close"])])}}},pt=A(vt,[["__scopeId","data-v-3f18a790"]]),mt="/assets/3-adbf781a.png",bt="/assets/2-1da5d603.png",yt="/assets/icon 1 -ced21c67.png",$t="/assets/4-b68b6467.png",wt="/assets/elegancewebsiteleft-524d19b0.png",kt="/assets/elegancewebsiteright-4654db9e.png";const St={name:"WhyChooseUs",data(){return{}}},Pt={class:"why-choose-us"},Ct={class:"container"},Ft={class:"title mt-5"},xt={class:"row row-cols-xl-5 row-cols-lg-4 row-cols-md-3 row-cols-sm-2 row-cols-1 row--20 d-flex justify-content-around"},It={class:"col"},Ot={class:"service-box card"},Bt={class:"title"},Vt={class:"col"},Tt={class:"service-box card"},Lt={class:"title"},Et={class:"col"},At={class:"service-box card"},Ut={class:"title"},Nt={class:"col"},Wt={class:"service-box card"},zt={class:"title"};function jt(s,o,_,h,n,g){const k=$("fa");return l(),f(N,null,[t("section",Pt,[t("div",Ct,[t("div",Ft,[y(k,{class:"fa-icon",icon:["fas","shopping-basket"]}),t("h2",null,v(s.$t("home.why-us")),1)]),t("div",xt,[t("div",It,[t("div",Ot,[o[0]||(o[0]=t("div",{class:"icon"},[t("img",{src:mt,class:"img-fluid",alt:"Service"})],-1)),t("h6",Bt,v(s.$t("home.why.fast_delivery")),1)])]),t("div",Vt,[t("div",Tt,[o[1]||(o[1]=t("div",{class:"icon"},[t("img",{src:bt,class:"img-fluid",alt:"Service"})],-1)),t("h6",Lt,v(s.$t("home.why.guarantee")),1)])]),t("div",Et,[t("div",At,[o[2]||(o[2]=t("div",{class:"icon"},[t("img",{src:yt,class:"img-fluid",alt:"Service"})],-1)),t("h6",Ut,v(s.$t("home.why.return_policy")),1)])]),t("div",Nt,[t("div",Wt,[o[3]||(o[3]=t("div",{class:"icon"},[t("img",{src:$t,class:"img-fluid",alt:"Service"})],-1)),t("h6",zt,v(s.$t("home.why.pro_quality")),1)])])])])]),o[4]||(o[4]=Q('<div class="axil-poster mt-3" data-v-537f384d><div class="container" data-v-537f384d><div class="row" data-v-537f384d><div class="col-lg-6 mb--30" data-v-537f384d><div class="single-poster" data-v-537f384d><a data-v-537f384d><img src="'+wt+'" data-v-537f384d></a></div></div><div class="col-lg-6 mb--30" data-v-537f384d><div class="single-poster" data-v-537f384d><a data-v-537f384d><img src="'+kt+'" data-v-537f384d></a></div></div></div></div></div>',1))],64)}const Dt=A(St,[["render",jt],["__scopeId","data-v-537f384d"]]);const qt={class:"products-section py-5"},Mt={class:"container"},Ht={class:"title section-header d-flex align-items-center mb-4"},Rt={class:"mb-0"},Jt={class:"row justify-content-center g-4"},Gt={class:"product-card card h-100 w-100"},Kt={class:"img-container overflow-hidden bg-light m-2 rounded-circle"},Qt=["src","alt"],Xt={key:0,class:"sale-badge"},Yt={class:"card-body"},Zt={class:"card-title"},es={class:"price-container"},ts={key:0,class:"discount-badge"},ss={key:1,class:"price-old"},os={class:"card-text card-price"},as={class:"product-actions d-flex justify-content-center flex-wrap gap-2"},is=["onClick","disabled"],rs=["onClick","title"],ns={__name:"LatestProducts",setup(s){const o=V([]);V(!1),V("");const _=M(),h=H(),{locale:n,t:g}=R(),k=async()=>{try{const r=JSON.parse(localStorage.getItem("selectedCurrency"))||{code:"USD"},m=await I.get("https://backend.webenia.org/api/website/latest/products",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,Currency:r.code}});m.data.status&&m.data.data&&(o.value=m.data.data,await d())}catch(r){console.error("Error fetching products:",r)}},d=async()=>{try{const r=await I.get("https://backend.webenia.org/api/favorites",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});r.data.status&&r.data.data&&_.setFavorites(r.data.data)}catch(r){console.error("Error fetching favorites:",r)}},P=r=>`https://backend.webenia.org/public/storage/${r}`,F=r=>_.favorites.some(m=>m.product_id===r),B=r=>{var m,a;return((m=_.favorites.find(e=>e.product_id===r))==null?void 0:m.favorite_id)||((a=_.favorites.find(e=>e.product_id===r))==null?void 0:a.id)},C=async r=>{var m,a;try{if(F(r.id)){const e=B(r.id);e&&(await _.removeFromFavorites(e),S({title:g("success"),message:g("favorite_removed")||"Product removed from favorites",type:"success"}))}else{const e=await _.addToFavorites(r.id);S({title:g("success"),message:e.message||g("favorite_added")||"Product added to favorites",type:"success"})}}catch(e){console.error("Favorite error:",e),S({title:g("error"),message:((a=(m=e.response)==null?void 0:m.data)==null?void 0:a.message)||g("login_required_favorite")||"Login required to favorite product",type:"error"})}},x=r=>{if(r.discount&&r.discount.is_active){const m=parseFloat(r.discount.discount_value),a=parseFloat(r.converted_price);return(a-a*(m/100)).toFixed(2)}return r.converted_price},T=async r=>{var m,a;try{let e=0;if(r.discount&&r.discount.is_active){const b=parseFloat(r.discount.discount_value),u=parseFloat(r.converted_price);e=u-u*(b/100)}else e=parseFloat(r.converted_price);const c={product_id:r.id,quantity:1,price:e};r.amounts&&r.amounts.length>0&&(c.amount_id=r.amounts[0].id);const i=await I.post("https://backend.webenia.org/api/cart-items",c,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json",Accept:"application/json"}});i.data.status?(S({title:g("success"),message:i.data.message,type:"success"}),h.incrementCount(),await h.fetchCartCount()):S({title:g("error"),message:i.data.message,type:"error"})}catch(e){console.error("Error adding to cart:",e),S({title:g("error"),message:(a=(m=e.response)==null?void 0:m.data)==null?void 0:a.message,type:"error"})}},L=r=>{if(r.discount&&r.discount.is_active){const m=parseFloat(r.discount.discount_value);return Math.round(m)}return 0};return J(()=>{k(),window.addEventListener("currency-changed",()=>{k()})}),(r,m)=>{const a=$("fa"),e=$("router-link"),c=$("el-col");return l(),f("div",qt,[t("div",Mt,[t("div",Ht,[y(a,{class:"fa-icon me-2",icon:["fas","shopping-basket"]}),t("h2",Rt,v(r.$t("LatestProducts.LatestProducts")),1)]),t("div",Jt,[(l(!0),f(N,null,z(o.value,i=>(l(),E(c,{key:i.id,xs:24,sm:12,md:8,lg:6,class:"d-flex justify-content-center"},{default:O(()=>[t("div",Gt,[t("div",Kt,[y(e,{to:`/read/products/${i.id}`},{default:O(()=>[i.images.length?(l(),f("img",{key:0,src:P(i.images[0].path),alt:i.name_en,class:"product-img card-img-top"},null,8,Qt)):w("",!0)]),_:2},1032,["to"]),i.is_available?w("",!0):(l(),f("div",Xt,v(r.$t("products.outOfStock")),1))]),t("div",Yt,[t("h5",Zt,v(G(n)==="ar"?i.name_ar:i.name_en),1),t("div",es,[i.discount&&i.discount.is_active?(l(),f("span",ts,v(L(i))+"% OFF ",1)):w("",!0),i.discount&&i.discount.is_active?(l(),f("span",ss,v(i.converted_price)+" "+v(i.currency_code),1)):w("",!0),t("span",os,v(x(i))+" "+v(i.currency_code),1)]),t("div",as,[y(e,{to:`/read/products/${i.id}`,class:"btn btn-light rounded-circle shadow-sm",title:"View"},{default:O(()=>[y(a,{icon:"eye"})]),_:2},1032,["to"]),t("button",{onClick:b=>T(i),disabled:!i.is_available,class:"btn btn-light shadow-sm"},v(r.$t("home.add-to-cart")),9,is),t("button",{onClick:b=>C(i),class:W(["btn rounded-circle shadow-sm btn-light",F(i.id)?"text-danger":""]),title:F(i.id)?"Remove from favorites":"Add to favorites"},[y(a,{icon:F(i.id)?"fas fa-heart":"far fa-heart"},null,8,["icon"])],10,rs)])])])]),_:2},1024))),128))])])])}}},cs=A(ns,[["__scopeId","data-v-5883e107"]]);const ls={name:"Loader"},ds={class:"loader-svg-wrapper"};function _s(s,o,_,h,n,g){return l(),f("div",ds,o[0]||(o[0]=[t("div",{class:"loader"},null,-1)]))}const us=A(ls,[["render",_s],["__scopeId","data-v-417d877b"]]);const hs={name:"VerifyOtp",data(){return{success:"",error:"",showOtpInput:!0,otp:""}},methods:{async handleActiveNow(){this.success="",this.error="",await this.resendOtp(),this.showOtpInput=!0},async resendOtp(){var s,o,_;try{const h=localStorage.getItem("otp_email");if(!h){this.error="No email found. Please login again.";return}const n=await I.post("https://backend.webenia.org/api/resend-otp",{email:h});(s=n.data)!=null&&s.success?this.success=((o=n.data)==null?void 0:o.message)||"OTP resent successfully.":this.error=((_=n.data)==null?void 0:_.message)||"Failed to resend OTP."}catch(h){console.error(h),this.error="Something went wrong. Please try again."}},async verifyOtp(){var h,n,g,k,d,P,F,B,C,x,T,L,r,m,a;this.success="",this.error="",this.otpMessage="";const s=Array.isArray(this.otp)?this.otp.join(""):this.otp,o=s&&/^\d{4}$/.test(s);if(!s||!o){const e=((h=this.$t)==null?void 0:h.call(this,"otp.invalidLength"))||"Please enter a valid 4-digit code";this.otpMessage=e,(g=(n=this.$toast)==null?void 0:n.error)==null||g.call(n,e);return}const _=localStorage.getItem("otp_email");if(!_){const e=((k=this.$t)==null?void 0:k.call(this,"otp.emailMissing"))||"No email found. Please login again.";this.error=e,(P=(d=this.$toast)==null?void 0:d.error)==null||P.call(d,e);return}try{const e=await I.post("https://backend.webenia.org/api/client/verify-otp",{email:_,otp:s});if(e.data.status===!0){const c={...this.user,...e.data.data.user};localStorage.setItem("user",JSON.stringify(c)),localStorage.setItem("auth_token",e.data.data.token),this.success=((F=this.$t)==null?void 0:F.call(this,"otp.success"))||"OTP verified successfully!",this.otpMessage="",window.location.reload()}else{const c=e.data.message||((B=this.$t)==null?void 0:B.call(this,"otp.failed"))||"OTP verification failed.";this.otpMessage=c,(x=(C=this.$toast)==null?void 0:C.error)==null||x.call(C,c)}}catch(e){console.error("OTP verification error:",e);const c=((L=(T=e.response)==null?void 0:T.data)==null?void 0:L.message)||((r=this.$t)==null?void 0:r.call(this,"otp.error"))||"OTP verification failed";this.otpMessage=c,(a=(m=this.$toast)==null?void 0:m.error)==null||a.call(m,c)}}}},gs={class:"modal-overlay d-flex justify-content-center align-items-center"},fs={class:"cart-modal bg-white rounded-4 shadow p-4 position-relative"},vs={class:"cart-content overflow-auto d-flex align-items-center flex-column",style:{"max-height":"70vh"}},ps={class:"w-50 d-flex align-items-center flex-column text-center"},ms={key:0,class:"w-100 d-flex flex-column align-items-center mt-3"},bs={key:1,class:"success-message"},ys={key:2,class:"error-message"};function $s(s,o,_,h,n,g){const k=$("fa");return l(),f("div",gs,[t("div",fs,[o[6]||(o[6]=t("div",{class:"mb-4 d-flex justify-content-center align-items-center w-100 logo-container"},[t("img",{src:te,alt:"Logo"})],-1)),t("button",{class:"close-btn",onClick:o[0]||(o[0]=d=>s.$emit("close"))},"×"),t("div",vs,[t("div",ps,[o[4]||(o[4]=t("p",{class:"text-center mb-4"},"sorry to say",-1)),y(k,{icon:"circle-exclamation",size:"xl",class:"icon mb-2"}),o[5]||(o[5]=t("h5",null,[D("Enter the "),t("span",null,"OTP"),D(" sent in the email to "),t("span",null,"active"),D(" your "),t("span",null,"account")],-1)),t("button",{type:"button",onClick:o[1]||(o[1]=(...d)=>g.handleActiveNow&&g.handleActiveNow(...d)),class:"login-btn btn my-4"},"active now")]),n.showOtpInput?(l(),f("div",ms,[se(t("input",{"onUpdate:modelValue":o[2]||(o[2]=d=>n.otp=d),type:"text",maxlength:"6",placeholder:"Enter OTP",class:"form-control mb-2",style:{"max-width":"200px","text-align":"center"}},null,512),[[oe,n.otp]]),t("button",{type:"button",onClick:o[3]||(o[3]=(...d)=>g.verifyOtp&&g.verifyOtp(...d)),class:"btn btn-success mb-2"},"Verify OTP")])):w("",!0),n.success?(l(),f("div",bs,v(n.success),1)):w("",!0),n.error?(l(),f("div",ys,v(n.error),1)):w("",!0)])])])}const K=A(hs,[["render",$s]]),ws="/assets/slider1-d6efcb08.png",ks="/assets/slider2-c32800b9.png",Ss="/assets/Slider3-24a08685.png";const Ps={name:"Home",components:{Header:ae,Categories:ye,HomeBrands:Ie,LatestProducts:cs,Products:Xe,BestSelling:pt,WhyChooseUs:Dt,Footer:ie,Loader:us,VerifyOtp:K,VerifyOtpPopup:K},computed:{showVerifyOtp(){return this.user&&!this.user.is_verified},direction(){return re.global.locale==="ar"?"rtl":"ltr"}},data(){return{showBrand:!1,showOurProducts:!1,showLatestProducts:!1,showBestSelling:!1,loading:!0,user:null,token:null,showVerifyOtpPopup:!1}},mounted(){this.fetchSettings(),localStorage.getItem("showVerifyOtpPopup")==="true"&&(this.showVerifyOtpPopup=!0,localStorage.removeItem("showVerifyOtpPopup"))},methods:{async fetchSettings(){try{const _=(await(await fetch("https://backend.webenia.org/api/settings")).json()).data,h=n=>{const g=_.find(k=>k.key===n);return g&&g.value==="1"};this.showBrand=h("show_brand"),this.showOurProducts=h("show_our_products"),this.showLatestProducts=h("show_latest_products"),this.showBestSelling=h("show_best_selling_products")}catch(s){console.error("Failed to fetch settings:",s)}finally{setTimeout(()=>{this.loading=!1},3e3)}},scrollLeft(){const s=window.innerWidth,_=this.$refs.slider.querySelector(".card").offsetWidth;s<=440?this.$refs.slider.scrollBy({left:-(_*2+26),behavior:"smooth"}):s<=768?this.$refs.slider.scrollBy({left:-(_*3+50),behavior:"smooth"}):s<=1200?this.$refs.slider.scrollBy({left:-(_*4+50),behavior:"smooth"}):this.$refs.slider.scrollBy({left:-(_*7+30),behavior:"smooth"})},scrollRight(){const s=window.innerWidth,_=this.$refs.slider.querySelector(".card").offsetWidth;s<=440?this.$refs.slider.scrollBy({left:_*2+26,behavior:"smooth"}):s<=768?this.$refs.slider.scrollBy({left:_*3+50,behavior:"smooth"}):s<=1200?this.$refs.slider.scrollBy({left:_*4+50,behavior:"smooth"}):this.$refs.slider.scrollBy({left:_*7+30,behavior:"smooth"})}},created(){const s=localStorage.getItem("user"),o=localStorage.getItem("token");s&&(this.user=JSON.parse(s)),o&&(this.token=o)}},Cs={class:"home"};function Fs(s,o,_,h,n,g){const k=$("Loader"),d=$("Header"),P=$("VerifyOtp"),F=$("verify-otp-popup"),B=$("Categories"),C=$("HomeBrands"),x=$("Products"),T=$("LatestProducts"),L=$("BestSelling"),r=$("WhyChooseUs"),m=$("Footer");return l(),f("div",Cs,[n.loading?(l(),E(k,{key:0})):w("",!0),y(d),g.showVerifyOtp?(l(),E(P,{key:1,user:n.user,token:n.token},null,8,["user","token"])):w("",!0),n.showVerifyOtpPopup?(l(),E(F,{key:2,onClose:o[0]||(o[0]=a=>n.showVerifyOtpPopup=!1)})):w("",!0),o[1]||(o[1]=Q('<section class="hero-section" data-v-6b1fc768><div id="carouselExample" class="carousel slide" data-v-6b1fc768><div class="carousel-inner" data-v-6b1fc768><div class="carousel-item active" data-v-6b1fc768><img src="'+ws+'" class="d-block w-100" alt="..." data-v-6b1fc768></div><div class="carousel-item" data-v-6b1fc768><img src="'+ks+'" class="d-block w-100" alt="..." data-v-6b1fc768></div><div class="carousel-item" data-v-6b1fc768><img src="'+Ss+'" class="d-block w-100" alt="..." data-v-6b1fc768></div></div><button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev" data-v-6b1fc768><span class="carousel-control-prev-icon" aria-hidden="true" data-v-6b1fc768></span><span class="visually-hidden" data-v-6b1fc768>Previous</span></button><button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next" data-v-6b1fc768><span class="carousel-control-next-icon" aria-hidden="true" data-v-6b1fc768></span><span class="visually-hidden" data-v-6b1fc768>Next</span></button></div></section>',1)),y(B),n.showBrand?(l(),E(C,{key:3})):w("",!0),n.showOurProducts?(l(),E(x,{key:4})):w("",!0),n.showLatestProducts?(l(),E(T,{key:5})):w("",!0),n.showBestSelling?(l(),E(L,{key:6})):w("",!0),y(r),y(m)])}const Os=A(Ps,[["render",Fs],["__scopeId","data-v-6b1fc768"]]);export{Os as default};
