import{_ as h,b as f,r as w,o as m,c as u,a as s,t as i,w as b,f as v,g as p,i as k,k as U,e as g,l as _,m as c}from"./index-1a54cba5.js";import{_ as j}from"./perfume-banner-e9b7c37b.js";const y={name:"JoinUs",data(){return{formData:{email:"",password:""},showPassword:!1,errorMessage:""}},methods:{async handleSubmit(){var e,o,d,l,a,n;try{const t=await f.post("http://elegance_backend.test/api/login",this.formData);if(t.data.token&&t.data.user){const r={token:t.data.token,user:t.data.user};localStorage.setItem("auth_token",r.token),localStorage.setItem("auth_user",JSON.stringify(r.user)),this.$store.commit("auth/SET_AUTH",r),await this.$store.dispatch("cart/loadCart"),this.$router.push("/"),this.errorMessage=""}else this.errorMessage=t.data.message||"Login failed."}catch(t){this.errorMessage=((o=(e=t.response)==null?void 0:e.data)==null?void 0:o.message)||((n=(a=(l=(d=t.response)==null?void 0:d.data)==null?void 0:l.errors)==null?void 0:a.email)==null?void 0:n[0])||t.message||"Login failed."}},togglePassword(){this.showPassword=!this.showPassword}}},P={class:"join-us-container"},D={class:"join-us-content"},M={class:"form-header"},S={class:"elegant-title"},V={class:"elegant-description"},C={key:0,class:"error-message"},N={class:"form-group"},$={for:"email"},L={class:"form-group"},T={for:"password"},A={class:"password-input-container"},B=["type"],E={class:"form-links"},I={type:"submit",class:"submit-btn"},q={class:"register-section"};function H(e,o,d,l,a,n){const t=w("router-link");return m(),u("div",P,[o[4]||(o[4]=s("div",{class:"banner-section"},[s("img",{src:j,alt:"Elegance Perfume",class:"banner-image"})],-1)),s("div",D,[s("div",M,[s("h1",S,i(e.$t("joinUs.title")),1),s("p",V,i(e.$t("joinUs.description")),1)]),s("form",{onSubmit:o[3]||(o[3]=b((...r)=>n.handleSubmit&&n.handleSubmit(...r),["prevent"])),class:"join-form"},[a.errorMessage?(m(),u("div",C,i(a.errorMessage),1)):v("",!0),s("div",N,[s("label",$,i(e.$t("joinUs.email")),1),p(s("input",{type:"email",id:"email","onUpdate:modelValue":o[0]||(o[0]=r=>a.formData.email=r),required:""},null,512),[[k,a.formData.email]])]),s("div",L,[s("label",T,i(e.$t("joinUs.password")),1),s("div",A,[p(s("input",{type:a.showPassword?"text":"password",id:"password","onUpdate:modelValue":o[1]||(o[1]=r=>a.formData.password=r),required:""},null,8,B),[[U,a.formData.password]]),s("button",{type:"button",class:"show-password-btn",onClick:o[2]||(o[2]=(...r)=>n.togglePassword&&n.togglePassword(...r))},i(a.showPassword?e.$t("joinUs.hidePassword"):e.$t("joinUs.showPassword")),1)])]),s("div",E,[g(t,{to:"/forgot-password",class:"link"},{default:_(()=>[c(i(e.$t("joinUs.forgotPassword")),1)]),_:1})]),s("button",I,i(e.$t("joinUs.login")),1),s("div",q,[s("p",null,[c(i(e.$t("joinUs.notMember"))+" ",1),g(t,{to:"/register",class:"link"},{default:_(()=>[c(i(e.$t("joinUs.registerHere")),1)]),_:1})])])],32)])])}const z=h(y,[["render",H],["__scopeId","data-v-dccfe402"]]);export{z as default};
