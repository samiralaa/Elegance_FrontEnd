import{_,b as u,r as w,o as d,c as m,a as o,t as a,w as b,g as v,i as P,n as y,f as k,m as p,e as $,l as D}from"./index-f73fdb68.js";import{_ as E}from"./perfume-banner-e9b7c37b.js";const M="https://backend.webenia.org/api",S={name:"ForgotPassword",data(){return{formData:{email:""},errors:{email:""},loading:!1}},methods:{validateEmail(s){s?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)?this.errors.email="":this.errors.email=this.$t("forgotPassword.validation.emailInvalid"):this.errors.email=this.$t("forgotPassword.validation.emailRequired")},async handleSubmit(){var s,r,c,h,e,l,n,i;if(this.validateEmail(this.formData.email),!this.errors.email)try{this.loading=!0;const t=await u.post(`${M}/forgot-password`,{email:this.formData.email});if(t.data.status==="success")(r=(s=this.$toast)==null?void 0:s.success)==null||r.call(s,t.data.message||this.$t("forgotPassword.successMessage")),this.$router.push("/verify-otp");else throw new Error(t.data.message||this.$t("forgotPassword.errorMessage"))}catch(t){if(console.error("Forgot password error:",t),(h=(c=t.response)==null?void 0:c.data)!=null&&h.errors){const g=t.response.data.errors;Object.keys(g).forEach(f=>{this.errors.hasOwnProperty(f)&&(this.errors[f]=g[f][0])})}else(i=(e=this.$toast)==null?void 0:e.error)==null||i.call(e,((n=(l=t.response)==null?void 0:l.data)==null?void 0:n.message)||this.$t("forgotPassword.errorMessage"))}finally{this.loading=!1}}},watch:{"formData.email"(s){this.validateEmail(s)}}},V={class:"join-us-container"},j={class:"join-us-content"},C={class:"form-header"},F={class:"elegant-title"},N={class:"elegant-description"},R={class:"form-group"},x={for:"email"},B=["placeholder"],I={key:0,class:"error-message"},q=["disabled"],O={key:0},T={key:1,class:"loading-spinner"},U={class:"register-section"};function z(s,r,c,h,e,l){const n=w("router-link");return d(),m("div",V,[r[2]||(r[2]=o("div",{class:"banner-section"},[o("img",{src:E,alt:"Elegance Perfume",class:"banner-image"})],-1)),o("div",j,[o("div",C,[o("h1",F,a(s.$t("forgotPassword.title")),1),o("p",N,a(s.$t("forgotPassword.description")),1)]),o("form",{onSubmit:r[1]||(r[1]=b((...i)=>l.handleSubmit&&l.handleSubmit(...i),["prevent"])),class:"join-form"},[o("div",R,[o("label",x,a(s.$t("forgotPassword.email")),1),v(o("input",{type:"email",id:"email","onUpdate:modelValue":r[0]||(r[0]=i=>e.formData.email=i),placeholder:s.$t("forgotPassword.emailPlaceholder"),class:y({error:e.errors.email,valid:e.formData.email&&!e.errors.email}),required:""},null,10,B),[[P,e.formData.email]]),e.errors.email?(d(),m("span",I,a(e.errors.email),1)):k("",!0)]),o("button",{type:"submit",class:"submit-btn",disabled:e.loading},[e.loading?(d(),m("span",T)):(d(),m("span",O,a(s.$t("forgotPassword.submit")),1))],8,q),o("div",U,[o("p",null,[p(a(s.$t("forgotPassword.rememberPassword"))+" ",1),$(n,{to:"/login",class:"link"},{default:D(()=>[p(a(s.$t("forgotPassword.loginHere")),1)]),_:1})])])],32)])])}const L=_(S,[["render",z],["__scopeId","data-v-609d1e97"]]);export{L as default};
