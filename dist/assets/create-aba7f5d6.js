import{_ as x,C as V,x as d,r as c,o as k,c as E,e as t,m as l,a as w,t as _,l as C,b as i,W as u}from"./index-01aaf835.js";const $={class:"currency-create-container"},N="https://backend.webenia.org",A={__name:"create",setup(B){const p=V(),m=d(null),a=d({name_en:"",name_ar:"",exchange_rate:""}),f={name_en:[{required:!0,message:"Please input currency name (EN)",trigger:"blur"}],name_ar:[{required:!0,message:"Please input currency name (AR)",trigger:"blur"}],exchange_rate:[{required:!0,message:"Please input exchange rate",trigger:"blur"},{pattern:/^\d+(\.\d{1,2})?$/,message:"Exchange rate must be a valid number",trigger:"blur"}]},g=`${N}/api/currencies`,b=()=>{m.value.validate(async o=>{if(o)try{const e=new FormData;e.append("name_en",a.value.name_en),e.append("name_ar",a.value.name_ar),e.append("exchange_rate",a.value.exchange_rate);const r=JSON.parse(localStorage.getItem("tokenData"));if(!r||!r.token)throw new Error("Authentication token not found");i.defaults.headers.common.Authorization=`Bearer ${r.token}`;const n=await i.post(g,e,{headers:{"Content-Type":"multipart/form-data"}});if(n.data.status)u.success("Currency created successfully"),p.push("/currencies");else throw new Error(n.data.message||"Failed to create currency")}catch(e){if(e.response&&e.response.status===422){const r=e.response.data.errors;for(const n in r)u.error(r[n][0])}else u.error(e.message||"Failed to create currency")}else return console.log("Form validation failed"),!1})};return(o,e)=>{const r=c("el-input"),n=c("el-form-item"),v=c("el-button"),y=c("el-form"),h=c("el-card");return k(),E("div",$,[t(h,{class:"currency-card"},{default:l(()=>[w("h2",null,_(o.$t("currencies.Createcurrency")),1),t(y,{model:a.value,ref_key:"formRef",ref:m,rules:f,"label-width":"120px"},{default:l(()=>[t(n,{label:o.$t("currencies.NameEn"),prop:"name_en"},{default:l(()=>[t(r,{modelValue:a.value.name_en,"onUpdate:modelValue":e[0]||(e[0]=s=>a.value.name_en=s)},null,8,["modelValue"])]),_:1},8,["label"]),t(n,{label:o.$t("currencies.NameAr"),prop:"name_ar"},{default:l(()=>[t(r,{modelValue:a.value.name_ar,"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.name_ar=s)},null,8,["modelValue"])]),_:1},8,["label"]),t(n,{label:o.$t("currencies.exchange_rate"),prop:"exchange_rate"},{default:l(()=>[t(r,{modelValue:a.value.exchange_rate,"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.exchange_rate=s)},null,8,["modelValue"])]),_:1},8,["label"]),t(n,null,{default:l(()=>[t(v,{type:"primary",onClick:b},{default:l(()=>[C(_(o.$t("currencies.CreateButton")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}},F=x(A,[["__scopeId","data-v-1ce18b2d"]]);export{F as default};
