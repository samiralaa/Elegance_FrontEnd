import{_ as k,C as y,x as m,r as s,o as C,c as V,e as t,m as l,a as w,t as _,l as N,b as c,W as d}from"./index-01aaf835.js";const E={class:"unit-create-container"},B="https://backend.webenia.org",$={__name:"CreateUnit",setup(x){const p=y(),i=m(null),a=m({name_en:"",name_ar:"",description_en:"",description_ar:""}),f={name_en:[{required:!0,message:"Please input unit name (EN)",trigger:"blur"}]},v=`${B}/api/units`,U=()=>{i.value.validate(async n=>{if(n)try{const e=new FormData;e.append("name_en",a.value.name_en),e.append("name_ar",a.value.name_ar);const o=JSON.parse(localStorage.getItem("tokenData"));if(!o||!o.token)throw new Error("Authentication token not found");c.defaults.headers.common.Authorization=`Bearer ${o.token}`;const r=await c.post(v,e,{headers:{"Content-Type":"multipart/form-data"}});if(r.data.status)d.success("Unit created successfully"),p.push("/units/list");else throw new Error(r.data.message||"Failed to create unit")}catch(e){console.error("Unit creation error:",e),d.error(e.message||"Failed to create unit")}else return console.log("Form validation failed"),!1})};return(n,e)=>{const o=s("el-input"),r=s("el-form-item"),b=s("el-button"),g=s("el-form"),h=s("el-card");return C(),V("div",E,[t(h,{class:"unit-card"},{default:l(()=>[w("h2",null,_(n.$t("Units.CreateUnit")),1),t(g,{model:a.value,ref_key:"formRef",ref:i,rules:f,"label-width":"120px"},{default:l(()=>[t(r,{label:n.$t("Units.NameEn"),prop:"name_en"},{default:l(()=>[t(o,{modelValue:a.value.name_en,"onUpdate:modelValue":e[0]||(e[0]=u=>a.value.name_en=u)},null,8,["modelValue"])]),_:1},8,["label"]),t(r,{label:n.$t("Units.NameAr"),prop:"name_ar"},{default:l(()=>[t(o,{modelValue:a.value.name_ar,"onUpdate:modelValue":e[1]||(e[1]=u=>a.value.name_ar=u)},null,8,["modelValue"])]),_:1},8,["label"]),t(r,null,{default:l(()=>[t(b,{type:"primary",onClick:U},{default:l(()=>[N(_(n.$t("Units.CreateButton")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}},D=k($,[["__scopeId","data-v-ecbd6409"]]);export{D as default};
