import{_ as k,D as V,y as m,r as l,o as w,c as U,e as t,p as s,a as C,t as c,m as D,b as _,V as d}from"./index-e6d81d92.js";const E={class:"unit-create-container"},N="https://backend.webenia.org",$={__name:"CreateUnit",setup(B){const p=V(),i=m(null),a=m({name_en:"",name_ar:"",description_en:"",description_ar:""}),f={name_en:[{required:!0,message:"Please input unit name (EN)",trigger:"blur"}]},v=`${N}/api/units`,b=()=>{i.value.validate(async n=>{if(n)try{const e=new FormData;e.append("name_en",a.value.name_en),e.append("name_ar",a.value.name_ar);const o=JSON.parse(localStorage.getItem("tokenData"));if(!o||!o.token)throw new Error("Authentication token not found");_.defaults.headers.common.Authorization=`Bearer ${o.token}`;const r=await _.post(v,e,{headers:{"Content-Type":"multipart/form-data"}});if(r.data.status)d.success("Unit created successfully"),p.push("/units/list");else throw new Error(r.data.message||"Failed to create unit")}catch(e){console.error("Unit creation error:",e),d.error(e.message||"Failed to create unit")}else return console.log("Form validation failed"),!1})};return(n,e)=>{const o=l("el-input"),r=l("el-form-item"),g=l("el-button"),y=l("el-form"),h=l("el-card");return w(),U("div",E,[t(h,{class:"unit-card"},{default:s(()=>[C("h2",null,c(n.$t("input.unites.add-unit")),1),t(y,{model:a.value,ref_key:"formRef",ref:i,rules:f,"label-width":"120px"},{default:s(()=>[t(r,{label:n.$t("input.unites.name-en"),prop:"name_en"},{default:s(()=>[t(o,{modelValue:a.value.name_en,"onUpdate:modelValue":e[0]||(e[0]=u=>a.value.name_en=u)},null,8,["modelValue"])]),_:1},8,["label"]),t(r,{label:n.$t("input.unites.name-ar"),prop:"name_ar"},{default:s(()=>[t(o,{modelValue:a.value.name_ar,"onUpdate:modelValue":e[1]||(e[1]=u=>a.value.name_ar=u)},null,8,["modelValue"])]),_:1},8,["label"]),t(r,null,{default:s(()=>[t(g,{type:"primary",onClick:b},{default:s(()=>[D(c(n.$t("input.unites.create")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}},S=k($,[["__scopeId","data-v-29e6f88c"]]);export{S as default};
