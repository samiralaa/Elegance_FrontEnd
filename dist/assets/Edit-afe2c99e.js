import{_ as k,C,M as E,x as g,D as V,r as c,o as N,c as R,e as a,m as o,W as l,b as m,a as $,l as y,E as A}from"./index-01aaf835.js";const B={class:"currency-edit-container"},U="http://elegance_backend.test",I={__name:"Edit",setup(S){const _=C(),i=E().params.id,p=g(null),t=g({name_en:"",name_ar:"",exchange_rate:""}),v={name_en:[{required:!0,message:"Please enter name (EN)",trigger:"blur"}],name_ar:[{required:!0,message:"Please enter name (AR)",trigger:"blur"}],exchange_rate:[{required:!0,message:"Please enter exchange rate",trigger:"blur"},{pattern:/^\d+(\.\d{1,2})?$/,message:"Must be a valid number",trigger:"blur"}]},f=`${U}/api/currencies`;V(async()=>{try{const n=JSON.parse(localStorage.getItem("tokenData"));if(!(n!=null&&n.token)){l.error("Authorization token is missing");return}m.defaults.headers.common.Authorization=`Bearer ${n.token}`;const{data:e}=await m.get(`${f}/${i}`);e&&e.data?t.value={name_en:e.data.name_en,name_ar:e.data.name_ar,exchange_rate:e.data.exchange_rate}:l.error("Currency not found")}catch{l.error("Failed to fetch currency data")}});const x=()=>{p.value.validate(async n=>{var e;if(n)try{const r=JSON.parse(localStorage.getItem("tokenData"));if(!(r!=null&&r.token)){l.error("Authorization token is missing");return}m.defaults.headers.common.Authorization=`Bearer ${r.token}`,await m.post(`${f}/${i}`,t.value),l.success("Currency updated successfully"),_.push("/currencies")}catch(r){if(((e=r.response)==null?void 0:e.status)===422){const s=r.response.data.errors;for(const d in s)l.error(s[d][0])}else l.error("Failed to update currency")}})};return(n,e)=>{const r=c("el-input"),s=c("el-form-item"),d=c("el-button"),b=c("el-form"),h=c("el-card");return N(),R("div",B,[a(h,{class:"currency-card"},{default:o(()=>[e[6]||(e[6]=$("h2",null,"Edit Currency",-1)),a(b,{model:t.value,ref_key:"formRef",ref:p,rules:v,"label-width":"120px"},{default:o(()=>[a(s,{label:"Name (EN)",prop:"name_en"},{default:o(()=>[a(r,{modelValue:t.value.name_en,"onUpdate:modelValue":e[0]||(e[0]=u=>t.value.name_en=u)},null,8,["modelValue"])]),_:1}),a(s,{label:"Name (AR)",prop:"name_ar"},{default:o(()=>[a(r,{modelValue:t.value.name_ar,"onUpdate:modelValue":e[1]||(e[1]=u=>t.value.name_ar=u)},null,8,["modelValue"])]),_:1}),a(s,{label:"Exchange Rate",prop:"exchange_rate"},{default:o(()=>[a(r,{modelValue:t.value.exchange_rate,"onUpdate:modelValue":e[2]||(e[2]=u=>t.value.exchange_rate=u)},null,8,["modelValue"])]),_:1}),a(s,null,{default:o(()=>[a(d,{type:"primary",onClick:x},{default:o(()=>e[4]||(e[4]=[y("Update")])),_:1,__:[4]}),a(d,{onClick:e[3]||(e[3]=u=>A(_).push("/currencies"))},{default:o(()=>e[5]||(e[5]=[y("Cancel")])),_:1,__:[5]})]),_:1})]),_:1},8,["model"])]),_:1,__:[6]})])}}},P=k(I,[["__scopeId","data-v-dc3fe786"]]);export{P as default};
