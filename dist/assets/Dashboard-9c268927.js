import{_ as A,R as F,S as T,y as h,D as S,O as z,r as m,o as B,c as I,e as o,q as s,a as t,t as d,n as N,m as w,T as R,U as x,b as p}from"./index-710d3685.js";const L=F({name:"DashboardView",setup(){const r=T(),a=h(0),g=h(0),y=h(0),b=h(0),k=h([]),i=h({today_sales:0,this_month_sales:0,last_month_sales:0,month_over_month_growth:0,daily_sales:[],top_selling_products:[]});let n=null;const v=()=>{const e=document.getElementById("salesChart");e&&(n=R(e),u())},u=()=>{if(!n)return;const e=i.value.daily_sales.map(_=>_.date),l=i.value.daily_sales.map(_=>parseFloat(_.total_sales)),E=i.value.daily_sales.map(_=>_.total_orders),$={tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["Sales","Orders"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:e},yAxis:[{type:"value",name:"Sales ($)",position:"left"},{type:"value",name:"Orders",position:"right"}],series:[{name:"Sales",type:"line",smooth:!0,data:l,itemStyle:{color:"#409EFF"},areaStyle:{color:new x(0,0,0,1,[{offset:0,color:"rgba(64,158,255,0.3)"},{offset:1,color:"rgba(64,158,255,0.1)"}])}},{name:"Orders",type:"line",smooth:!0,yAxisIndex:1,data:E,itemStyle:{color:"#67C23A"}}]};n.setOption($)},f=()=>{n&&n.resize()};S(()=>{v(),window.addEventListener("resize",f)}),z(()=>{n&&n.dispose(),window.removeEventListener("resize",f)});const O=async()=>{try{const e=JSON.parse(localStorage.getItem("tokenData"));if(!e||!e.token)throw new Error("Authentication token not found");p.defaults.headers.common.Authorization=`Bearer ${e.token}`;const l=await p.get("https://backend.webenia.org/api/dashboard/sales-overview");l.data.status===!0&&(i.value=l.data.data,a.value=parseFloat(l.data.data.this_month_sales||0),u())}catch(e){console.error("Error fetching sales overview:",e)}},c=async()=>{try{const e=JSON.parse(localStorage.getItem("tokenData"));if(!e||!e.token)throw new Error("Authentication token not found");p.defaults.headers.common.Authorization=`Bearer ${e.token}`;const l=await p.get("https://backend.webenia.org/api/dashboard/total-products");l.data.status===!0&&(b.value=l.data.data.total_products)}catch(e){console.error("Error fetching total products:",e)}},C=async()=>{try{const e=JSON.parse(localStorage.getItem("tokenData"));if(!e||!e.token)throw new Error("Authentication token not found");p.defaults.headers.common.Authorization=`Bearer ${e.token}`;const l=await p.get("https://backend.webenia.org/api/dashboard/total-orders");l.data.status===!0&&(g.value=l.data.data.total_orders)}catch(e){console.error("Error fetching total orders:",e)}},D=async()=>{try{const e=JSON.parse(localStorage.getItem("tokenData"));if(!e||!e.token)throw new Error("Authentication token not found");p.defaults.headers.common.Authorization=`Bearer ${e.token}`;const l=await p.get("https://backend.webenia.org/api/dashboard/recent-orders");l.data.status===!0&&(k.value=l.data.data)}catch(e){console.error("Error fetching recent orders:",e)}};return S(async()=>{try{await C(),await r.dispatch("fetchCustomers"),await c(),await D(),await O(),y.value=r.getters.totalCustomers||0}catch(e){console.error("Error fetching dashboard data:",e)}}),{totalRevenue:a,totalOrders:g,totalCustomers:y,totalProducts:b,orders:k,salesOverview:i}}}),P={class:"dashboard"},J={class:"card-content"},V={class:"card-content"},M={class:"card-content"},G={class:"card-content"},U={class:"sales-overview"},q={class:"sales-metrics"},j={class:"metric"},H={class:"value"},K={class:"metric"},Q={class:"value"},W={class:"metric"},X={class:"value"};function Y(r,a,g,y,b,k){const i=m("el-card"),n=m("el-col"),v=m("el-row"),u=m("el-table-column"),f=m("el-tag"),O=m("el-table");return B(),I("div",P,[o(v,{gutter:20},{default:s(()=>[o(n,{span:6},{default:s(()=>[o(i,{class:"summary-card"},{header:s(()=>a[0]||(a[0]=[t("div",{class:"card-header"},[t("span",null,"Total Revenue")],-1)])),default:s(()=>[t("div",J,[t("h2",null,"$"+d(r.totalRevenue.toFixed(2)),1),t("span",{class:N(["trend",r.salesOverview.month_over_month_growth>=0?"positive":"negative"])},d(r.salesOverview.month_over_month_growth>=0?"+":"")+d(r.salesOverview.month_over_month_growth)+"% ",3)])]),_:1})]),_:1}),o(n,{span:6},{default:s(()=>[o(i,{class:"summary-card"},{header:s(()=>a[1]||(a[1]=[t("div",{class:"card-header"},[t("span",null,"Total Orders")],-1)])),default:s(()=>[t("div",V,[t("h2",null,d(r.totalOrders),1),a[2]||(a[2]=t("span",{class:"trend positive"},"+8%",-1))])]),_:1})]),_:1}),o(n,{span:6},{default:s(()=>[o(i,{class:"summary-card"},{header:s(()=>a[3]||(a[3]=[t("div",{class:"card-header"},[t("span",null,"Total Customers")],-1)])),default:s(()=>[t("div",M,[t("h2",null,d(r.totalCustomers),1),a[4]||(a[4]=t("span",{class:"trend positive"},"+5%",-1))])]),_:1})]),_:1}),o(n,{span:6},{default:s(()=>[o(i,{class:"summary-card"},{header:s(()=>a[5]||(a[5]=[t("div",{class:"card-header"},[t("span",null,"Total Products")],-1)])),default:s(()=>[t("div",G,[t("h2",null,d(r.totalProducts),1),a[6]||(a[6]=t("span",{class:"trend positive"},"+3%",-1))])]),_:1})]),_:1})]),_:1}),o(v,{gutter:20,class:"chart-row"},{default:s(()=>[o(n,{span:12},{default:s(()=>[o(i,null,{header:s(()=>a[7]||(a[7]=[t("div",{class:"card-header"},[t("span",null,"Sales Overview")],-1)])),default:s(()=>[t("div",U,[t("div",q,[t("div",j,[a[8]||(a[8]=t("span",{class:"label"},"Today's Sales",-1)),t("span",H,"$"+d(parseFloat(r.salesOverview.today_sales||0).toFixed(2)),1)]),t("div",K,[a[9]||(a[9]=t("span",{class:"label"},"This Month",-1)),t("span",Q,"$"+d(parseFloat(r.salesOverview.this_month_sales||0).toFixed(2)),1)]),t("div",W,[a[10]||(a[10]=t("span",{class:"label"},"Last Month",-1)),t("span",X,"$"+d(parseFloat(r.salesOverview.last_month_sales||0).toFixed(2)),1)])]),a[11]||(a[11]=t("div",{id:"salesChart",class:"chart-container"},null,-1))])]),_:1})]),_:1}),o(n,{span:12},{default:s(()=>[o(i,null,{header:s(()=>a[12]||(a[12]=[t("div",{class:"card-header"},[t("span",null,"Recent Orders")],-1)])),default:s(()=>[o(O,{data:r.orders,style:{width:"100%"}},{default:s(()=>[o(u,{prop:"id",label:"Order ID",width:"100"}),o(u,{label:"Customer"},{default:s(({row:c})=>[w(d(c.user.name),1)]),_:1}),o(u,{prop:"total_price",label:"Total",width:"120"},{default:s(({row:c})=>[w(" $"+d(c.total_price),1)]),_:1}),o(u,{prop:"status",label:"Status",width:"120"},{default:s(({row:c})=>[o(f,{type:c.status==="completed"?"success":"warning"},{default:s(()=>[w(d(c.status),1)]),_:2},1032,["type"])]),_:1}),o(u,{prop:"ordered_at",label:"Order Date",width:"180"},{default:s(({row:c})=>[w(d(c.ordered_at),1)]),_:1})]),_:1},8,["data"])]),_:1})]),_:1})]),_:1})])}const tt=A(L,[["render",Y],["__scopeId","data-v-24d90b2f"]]);export{tt as default};
