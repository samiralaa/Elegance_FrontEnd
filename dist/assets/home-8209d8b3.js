import{q as Y,s as Z,A as q,u as ee,_ as A,r as $,o as d,c as f,a as s,e as y,t as v,F as N,d as z,n as W,f as w,b as x,x as V,y as M,z as H,B as R,C as J,p as B,D as G,E as S,i as E,l as D,G as Q,j as se,w as te,v as oe,H as ae,I as ie,J as re}from"./index-dc530aff.js";import{$ as j}from"./slick-theme-459fa07d.js";const ne={name:"WebsiteCategories",computed:{...Y("websiteCategories",{categories:t=>t.items,loading:t=>t.loading,error:t=>t.error})},created(){this.loadCategories()},methods:{...Z("websiteCategories",{fetchCategories:"fetchWebsiteCategories"}),getProductImage(t){if(!t.image)return"/placeholder-image.jpg";const o=t.image,_=`${q}/public/storage/`;if(o.startsWith(_))return o;if(o.startsWith(q)){const h=o.substring(q.length);return`${_}${h.startsWith("/")?h.substring(1):h}`}return o.startsWith("http")?o:`${_}${o}`},async loadCategories(){try{await this.fetchCategories(),await ee();const t=j(this.$refs.slider);t.hasClass("slick-initialized")&&t.slick("unslick"),t.slick({slidesToShow:7,slidesToScroll:1,rtl:this.$i18n.locale==="ar",responsive:[{breakpoint:1200,settings:{slidesToShow:5}},{breakpoint:992,settings:{slidesToShow:4}},{breakpoint:768,settings:{slidesToShow:3}},{breakpoint:576,settings:{slidesToShow:2}},{breakpoint:400,settings:{slidesToShow:1}}]})}catch(t){console.error("Failed to load categories:",t)}},scrollLeft(){const t=j(this.$refs.slider);t.length&&t.hasClass("slick-initialized")&&t.slick("slickPrev")},scrollRight(){const t=j(this.$refs.slider);t.length&&t.hasClass("slick-initialized")&&t.slick("slickNext")},getAlt(t){return this.$i18n.locale==="ar"?t.name_ar:t.name}},beforeUnmount(){const t=j(this.$refs.slider);t.length&&t.hasClass("slick-initialized")&&t.slick("unslick")}},ce={class:"all-categories py-4"},le={class:"container"},de={class:"title"},_e={class:"slider-wrapper"},ue={class:"scrollers ms-3 mb-2"},he={class:"slider",ref:"slider"},ge=["href"],fe={class:"category-content"},ve=["src"],pe={key:0,class:"loading-overlay"},me={key:1,class:"error-message"};function be(t,o,_,h,n,g){const k=$("fa");return d(),f("section",ce,[s("div",le,[s("div",de,[y(k,{class:"fa-icon",icon:["fas","cubes"]}),s("h2",null,v(t.$t("home.categories")),1)]),s("div",_e,[s("div",ue,[s("button",{class:"btn nav-button left",onClick:o[0]||(o[0]=(...c)=>g.scrollLeft&&g.scrollLeft(...c))},"←"),s("button",{class:"btn nav-button right",onClick:o[1]||(o[1]=(...c)=>g.scrollRight&&g.scrollRight(...c))},"→")]),s("div",he,[(d(!0),f(N,null,z(t.categories,c=>(d(),f("a",{key:c.id,class:"card",href:`/category/${c.id}`},[s("div",fe,[s("img",{src:g.getProductImage(c)},null,8,ve),s("p",{class:W({rtl:t.$i18n.locale==="ar"})},v(t.$i18n.locale==="ar"?c.name_ar:c.name),3)])],8,ge))),128))],512),t.loading?(d(),f("div",pe,o[2]||(o[2]=[s("div",{class:"loading-spinner"},null,-1)]))):w("",!0),t.error?(d(),f("div",me,v(t.error),1)):w("",!0)])])])}const ye=A(ne,[["render",be],["__scopeId","data-v-9a4f0c77"]]);const $e={name:"HomeBrands",data(){return{brands:[]}},created(){this.fetchBrands()},methods:{async fetchBrands(){try{const t=await x.get("https://backend.webenia.org/api/website/brands/section");this.brands=t.data.data}catch(t){console.error("Error fetching brands:",t)}},getImageUrl(t){return`https://backend.webenia.org/public/storage/${t}`},likeBrand(t){console.log(`Brand ${t} liked!`)}}},we={class:"our-brands"},ke={class:"container"},Se={class:"title mt-5"},Pe={class:"content"},Ce=["src","alt"],Fe={key:1,class:"text-muted small"};function xe(t,o,_,h,n,g){const k=$("fa");return d(),f("section",we,[s("div",ke,[s("div",Se,[y(k,{class:"fa-icon",icon:["fas","diagram-project"]}),s("h2",null,v(t.$t("home.brands")),1)]),s("div",Pe,[(d(!0),f(N,null,z(n.brands,c=>(d(),f("div",{key:c.id,class:"brand-img"},[c.images.length?(d(),f("img",{key:0,src:g.getImageUrl(c.images[0].path),alt:c.name_en,class:"img-fluid"},null,8,Ce)):(d(),f("span",Fe,"No Image"))]))),128))])])])}const Ie=A($e,[["render",xe],["__scopeId","data-v-047fa5dd"]]);const Oe={class:"products-section"},Be={class:"container"},Ve={class:"title section-header d-flex align-items-center mb-4"},Te={class:"mb-0"},Le={key:0,class:"text-center my-4"},Ee={key:1,class:"row g-3"},Ae={class:"product-card card border-0 h-100"},Ue={class:"position-relative overflow-hidden bg-light"},Ne=["src","alt"],We={key:0,class:"sale-badge"},ze={class:"product-actions d-flex justify-content-center gap-2 w-100"},je=["onClick","disabled"],De=["onClick"],qe=["onClick","title"],Me={class:"card-body"},He={class:"card-title"},Re={class:"price-container"},Je={key:0,class:"discount-badge"},Ge={key:1,class:"price-old"},Ke={class:"card-text card-price"},Qe={__name:"ProductSection",setup(t){const o=V([]),_=V([]),h=V(!1),n=M(),g=H(),{locale:k,t:c}=R(),I=e=>`https://backend.webenia.org/public/storage/${e}`,C=async()=>{try{const e=await x.get("https://backend.webenia.org/api/currencies");e.data.currencies&&(_.value=e.data.currencies)}catch(e){console.error("Error fetching currencies:",e)}},O=async()=>{try{const e=JSON.parse(localStorage.getItem("selectedCurrency"))||{code:"USD"},l=await x.get("https://backend.webenia.org/api/website/products/section",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,Currency:e.code}});l.data.status&&(o.value=l.data.data,await P())}catch(e){console.error("Error fetching products:",e),S({title:"Error",message:"Failed to load products.",type:"error"})}finally{h.value=!1}},P=async()=>{try{const e=await x.get("https://backend.webenia.org/api/favorites",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});e.data.status&&e.data.data&&n.setFavorites(e.data.data)}catch(e){console.error("Error fetching favorites:",e)}},F=e=>n.favorites.some(l=>l.product_id===e),T=e=>{var l,i;return((l=n.favorites.find(b=>b.product_id===e))==null?void 0:l.favorite_id)||((i=n.favorites.find(b=>b.product_id===e))==null?void 0:i.id)},L=async e=>{var l,i;try{if(F(e.id)){const b=T(e.id);b&&(await n.removeFromFavorites(b),S({title:c("success"),message:c("favorite_removed")||"Product removed from favorites",type:"success"}))}else{const b=await n.addToFavorites(e.id);S({title:c("success"),message:b.message||c("favorite_added")||"Product added to favorites",type:"success"})}}catch(b){console.error("Favorite error:",b),S({title:c("error"),message:((i=(l=b.response)==null?void 0:l.data)==null?void 0:i.message)||c("login_required_favorite")||"Login required to favorite product",type:"error"})}},r=async e=>{var l,i;try{let b=0;if(e.discount&&e.discount.is_active){const U=parseFloat(e.discount.discount_value),p=parseFloat(e.converted_price||e.price);b=p-p*(U/100)}else b=parseFloat(e.converted_price)||parseFloat(e.price);const u=await x.post("https://backend.webenia.org/api/cart-items",{product_id:e.id,quantity:1,price:b},{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});u.data.status?(S.success(u.data.message),g.incrementCount(),await g.fetchCartCount()):S.error(u.data.message)}catch(b){console.error("Error adding to cart:",b),S.error(((i=(l=b.response)==null?void 0:l.data)==null?void 0:i.message)||"Error adding product to cart")}},m=e=>{if(e.discount&&e.discount.is_active){const l=parseFloat(e.discount.discount_value),i=parseFloat(e.converted_price||e.price);return(i-i*(l/100)).toFixed(2)}return e.converted_price||e.price},a=e=>{if(e.discount&&e.discount.is_active){const l=parseFloat(e.discount.discount_value);return Math.round(l)}return 0};return J(async()=>{await C(),await O(),window.addEventListener("currency-changed",()=>{O()})}),(e,l)=>{const i=$("fa"),b=$("router-link");return d(),f("div",Oe,[s("div",Be,[s("div",Ve,[y(i,{class:"fa-icon me-2",icon:["fas","shopping-basket"]}),s("h2",Te,v(e.$t("home.products")),1)]),h.value?(d(),f("div",Le,"Loading products...")):(d(),f("div",Ee,[(d(!0),f(N,null,z(o.value,u=>(d(),f("div",{key:u.id,class:"col-sm-6 col-md-4 col-lg-3"},[s("div",Ae,[s("div",Ue,[y(b,{to:`/read/products/${u.id}`},{default:B(()=>[u.images&&u.images.length?(d(),f("img",{key:0,src:I(u.images[0].path),alt:u.name_en,class:"card-img-top product-img"},null,8,Ne)):w("",!0)]),_:2},1032,["to"]),u.is_available?w("",!0):(d(),f("div",We,v(e.$t("products.outOfStock")),1)),s("div",ze,[y(b,{to:`/read/products/${u.id}`,class:"btn btn-light rounded-circle shadow-sm",title:"View"},{default:B(()=>[y(i,{icon:"eye"})]),_:2},1032,["to"]),s("button",{onClick:U=>r(u),class:W(["btn btn-light shadow-sm disable",{disabled:!u.is_available}]),disabled:!u.is_available},v(e.$t("home.add-to-cart")),11,je),s("button",{onClick:U=>r(u),class:"d-none btn rounded-circle shadow-sm btn-light enable"},[y(i,{icon:"shopping-cart"})],8,De),s("button",{onClick:U=>L(u),class:W(["btn rounded-circle shadow-sm btn-light",F(u.id)?"text-danger":""]),title:F(u.id)?"Remove from favorites":"Add to favorites"},[y(i,{icon:F(u.id)?"fas fa-heart":"far fa-heart"},null,8,["icon"])],10,qe)])]),s("div",Me,[s("h5",He,v(G(k)==="ar"?u.name_ar:u.name_en),1),s("div",Re,[u.discount&&u.discount.is_active?(d(),f("span",Je,v(a(u))+"% OFF ",1)):w("",!0),u.discount&&u.discount.is_active?(d(),f("span",Ge,v(u.converted_price)+" "+v(u.currency_code),1)):w("",!0),s("span",Ke,v(m(u))+" "+v(u.currency_code),1)])])])]))),128))]))])])}}},Xe=A(Qe,[["__scopeId","data-v-d1bf4f19"]]);const Ye={class:"products-section"},Ze={class:"container"},es={class:"title mt-5"},ss={class:"row g-4"},ts={class:"card my-3 p-sm-4"},os={class:"img-container rounded position-relative"},as=["src","alt"],is={key:0,class:"sale-badge"},rs={class:"body-container"},ns={class:"card-body"},cs={class:"card-title"},ls={class:"price-container"},ds={key:0,class:"discount-badge"},_s={key:1,class:"price-old"},us={class:"card-text card-price"},hs={class:"product-actions d-flex justify-content-center flex-wrap gap-2"},gs=["disabled","onClick"],fs=["onClick","title"],vs={__name:"BestSelling",setup(t){const o=V([]),_=V(!1),h=V(""),n=M(),g=H(),{locale:k,t:c}=R();V([]),V({code:"USD"});const I=async()=>{try{const a=JSON.parse(localStorage.getItem("selectedCurrency"))||{code:"USD"},e=await x.get("https://backend.webenia.org/api/website/best-selling/products",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,Currency:a.code}});e.data.status&&e.data.data&&(o.value=e.data.data,await C())}catch(a){console.error("Error fetching products:",a),S({title:"Error",message:"Failed to load products.",type:"error"})}},C=async()=>{try{const a=await x.get("https://backend.webenia.org/api/favorites",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});a.data.status&&a.data.data&&n.setFavorites(a.data.data)}catch(a){console.error("Error fetching favorites:",a)}},O=a=>`https://backend.webenia.org/public/storage/${a}`,P=a=>n.favorites.some(e=>e.product_id===a),F=a=>{const e=n.favorites.find(l=>l.product_id===a);return e?e.favorite_id||e.id:null},T=async a=>{var e,l;try{if(P(a.id)){const i=F(a.id);i&&(await n.removeFromFavorites(i),S({title:c("success"),message:c("favorite_removed")||"Product removed from favorites",type:"success"}))}else{const i=await n.addToFavorites(a.id);S({title:c("success"),message:i.message||c("favorite_added")||"Product added to favorites",type:"success"})}}catch(i){console.error("Favorite error:",i),S({title:c("error"),message:((l=(e=i.response)==null?void 0:e.data)==null?void 0:l.message)||c("login_required_favorite")||"Login required to favorite product",type:"error"})}},L=async a=>{var e,l;try{let i=0;if(a.discount&&a.discount.is_active){const U=parseFloat(a.discount.discount_value),p=parseFloat(a.converted_price||a.price);i=p-p*(U/100)}else i=parseFloat(a.converted_price)||parseFloat(a.price);const b=localStorage.getItem("user_id"),u=await x.post("https://backend.webenia.org/api/cart-items",{product_id:a.id,quantity:1,price:i,user_id:b},{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});u.data.status?(S({title:c("success"),message:u.data.message,type:"success"}),g.incrementCount(),await g.fetchCartCount()):S({title:c("error"),message:u.data.message,type:"error"})}catch(i){console.error("Error adding to cart:",i),S({title:c("error"),message:(l=(e=i.response)==null?void 0:e.data)==null?void 0:l.message,type:"error"})}},r=a=>{if(a.discount&&a.discount.is_active){const e=parseFloat(a.discount.discount_value),l=parseFloat(a.converted_price||a.price);return(l-l*(e/100)).toFixed(2)}return(a.converted_price||a.price).toFixed(2)},m=a=>a.discount&&a.discount.is_active?Math.round(parseFloat(a.discount.discount_value)):0;return J(()=>{I(),window.addEventListener("currency-changed",()=>{I()})}),(a,e)=>{const l=$("fa"),i=$("router-link"),b=$("el-col"),u=$("el-button"),U=$("el-dialog");return d(),f("div",Ye,[s("div",Ze,[s("div",es,[y(l,{class:"fa-icon",icon:["fas","star"]}),s("h2",null,v(a.$t("home.best-selling")),1)]),s("div",ss,[(d(!0),f(N,null,z(o.value,p=>(d(),E(b,{key:p.id,xs:24,sm:24,md:12,lg:12},{default:B(()=>[s("div",ts,[s("div",os,[y(i,{to:`/read/products/${p.id}`},{default:B(()=>[p.images.length?(d(),f("img",{key:0,src:O(p.images[0].path),alt:p.name_en,class:"product-img card-img bg-light"},null,8,as)):w("",!0)]),_:2},1032,["to"]),p.is_available?w("",!0):(d(),f("div",is,v(a.$t("products.outOfStock")),1))]),s("div",rs,[s("div",ns,[s("h5",cs,v(G(k)==="ar"?p.name_ar:p.name_en),1),s("div",ls,[p.discount&&p.discount.is_active?(d(),f("span",ds,v(m(p))+"% OFF ",1)):w("",!0),p.discount&&p.discount.is_active?(d(),f("span",_s,v((p.converted_price||p.price).toFixed(2))+" "+v(p.currency_code),1)):w("",!0),s("span",us,v(r(p))+" "+v(p.currency_code),1)])]),s("div",hs,[y(i,{to:`/read/products/${p.id}`,class:"btn btn-light rounded-circle shadow-sm",title:"View"},{default:B(()=>[y(l,{icon:"eye"})]),_:2},1032,["to"]),s("button",{disabled:!p.is_available,onClick:X=>L(p),class:"btn btn-light shadow-sm rounded-circle"},[y(l,{icon:"cart-plus"})],8,gs),s("button",{onClick:X=>T(p),class:W(["btn rounded-circle shadow-sm btn-light",P(p.id)?"text-danger":""]),title:P(p.id)?"Remove from favorites":"Add to favorites"},[y(l,{icon:P(p.id)?"fas fa-heart":"far fa-heart"},null,8,["icon"])],10,fs)])])])]),_:2},1024))),128))])]),y(U,{modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=p=>_.value=p),title:"🎉 Success",width:"30%","before-close":()=>_.value=!1,center:!0,"close-on-click-modal":!1,"show-close":!1},{footer:B(()=>[y(u,{type:"primary",onClick:e[0]||(e[0]=p=>_.value=!1)},{default:B(()=>e[2]||(e[2]=[D("OK")])),_:1,__:[2]})]),default:B(()=>[s("span",null,v(h.value),1)]),_:1},8,["modelValue","before-close"])])}}},ps=A(vs,[["__scopeId","data-v-3f18a790"]]),ms="/assets/3-adbf781a.png",bs="/assets/2-1da5d603.png",ys="/assets/icon 1 -ced21c67.png",$s="/assets/4-b68b6467.png",ws="/assets/elegancewebsiteleft-524d19b0.png",ks="/assets/elegancewebsiteright-4654db9e.png";const Ss={name:"WhyChooseUs",data(){return{}}},Ps={class:"why-choose-us"},Cs={class:"container"},Fs={class:"title mt-5"},xs={class:"row row-cols-xl-5 row-cols-lg-4 row-cols-md-3 row-cols-sm-2 row-cols-1 row--20 d-flex justify-content-around"},Is={class:"col"},Os={class:"service-box card"},Bs={class:"title"},Vs={class:"col"},Ts={class:"service-box card"},Ls={class:"title"},Es={class:"col"},As={class:"service-box card"},Us={class:"title"},Ns={class:"col"},Ws={class:"service-box card"},zs={class:"title"};function js(t,o,_,h,n,g){const k=$("fa");return d(),f(N,null,[s("section",Ps,[s("div",Cs,[s("div",Fs,[y(k,{class:"fa-icon",icon:["fas","shopping-basket"]}),s("h2",null,v(t.$t("home.why-us")),1)]),s("div",xs,[s("div",Is,[s("div",Os,[o[0]||(o[0]=s("div",{class:"icon"},[s("img",{src:ms,class:"img-fluid",alt:"Service"})],-1)),s("h6",Bs,v(t.$t("home.why.fast_delivery")),1)])]),s("div",Vs,[s("div",Ts,[o[1]||(o[1]=s("div",{class:"icon"},[s("img",{src:bs,class:"img-fluid",alt:"Service"})],-1)),s("h6",Ls,v(t.$t("home.why.guarantee")),1)])]),s("div",Es,[s("div",As,[o[2]||(o[2]=s("div",{class:"icon"},[s("img",{src:ys,class:"img-fluid",alt:"Service"})],-1)),s("h6",Us,v(t.$t("home.why.return_policy")),1)])]),s("div",Ns,[s("div",Ws,[o[3]||(o[3]=s("div",{class:"icon"},[s("img",{src:$s,class:"img-fluid",alt:"Service"})],-1)),s("h6",zs,v(t.$t("home.why.pro_quality")),1)])])])])]),o[4]||(o[4]=Q('<div class="axil-poster mt-3" data-v-537f384d><div class="container" data-v-537f384d><div class="row" data-v-537f384d><div class="col-lg-6 mb--30" data-v-537f384d><div class="single-poster" data-v-537f384d><a data-v-537f384d><img src="'+ws+'" data-v-537f384d></a></div></div><div class="col-lg-6 mb--30" data-v-537f384d><div class="single-poster" data-v-537f384d><a data-v-537f384d><img src="'+ks+'" data-v-537f384d></a></div></div></div></div></div>',1))],64)}const Ds=A(Ss,[["render",js],["__scopeId","data-v-537f384d"]]);const qs={class:"products-section py-5"},Ms={class:"container"},Hs={class:"title section-header d-flex align-items-center mb-4"},Rs={class:"mb-0"},Js={class:"row justify-content-center g-4"},Gs={class:"product-card card h-100 w-100"},Ks={class:"img-container overflow-hidden bg-light m-2 rounded-circle"},Qs=["src","alt"],Xs={key:0,class:"sale-badge"},Ys={class:"card-body"},Zs={class:"card-title"},et={class:"price-container"},st={key:0,class:"discount-badge"},tt={key:1,class:"price-old"},ot={class:"card-text card-price"},at={class:"product-actions d-flex justify-content-center flex-wrap gap-2"},it=["onClick","disabled"],rt=["onClick","title"],nt={__name:"LatestProducts",setup(t){const o=V([]);V(!1),V("");const _=M(),h=H(),{locale:n,t:g}=R(),k=async()=>{try{const r=JSON.parse(localStorage.getItem("selectedCurrency"))||{code:"USD"},m=await x.get("https://backend.webenia.org/api/website/latest/products",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,Currency:r.code}});m.data.status&&m.data.data&&(o.value=m.data.data,await c())}catch(r){console.error("Error fetching products:",r)}},c=async()=>{try{const r=await x.get("https://backend.webenia.org/api/favorites",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});r.data.status&&r.data.data&&_.setFavorites(r.data.data)}catch(r){console.error("Error fetching favorites:",r)}},I=r=>`https://backend.webenia.org/public/storage/${r}`,C=r=>_.favorites.some(m=>m.product_id===r),O=r=>{var m,a;return((m=_.favorites.find(e=>e.product_id===r))==null?void 0:m.favorite_id)||((a=_.favorites.find(e=>e.product_id===r))==null?void 0:a.id)},P=async r=>{var m,a;try{if(C(r.id)){const e=O(r.id);e&&(await _.removeFromFavorites(e),S({title:g("success"),message:g("favorite_removed")||"Product removed from favorites",type:"success"}))}else{const e=await _.addToFavorites(r.id);S({title:g("success"),message:e.message||g("favorite_added")||"Product added to favorites",type:"success"})}}catch(e){console.error("Favorite error:",e),S({title:g("error"),message:((a=(m=e.response)==null?void 0:m.data)==null?void 0:a.message)||g("login_required_favorite")||"Login required to favorite product",type:"error"})}},F=r=>{if(r.discount&&r.discount.is_active){const m=parseFloat(r.discount.discount_value),a=parseFloat(r.converted_price);return(a-a*(m/100)).toFixed(2)}return r.converted_price},T=async r=>{var m,a;try{let e=0;if(r.discount&&r.discount.is_active){const b=parseFloat(r.discount.discount_value),u=parseFloat(r.converted_price);e=u-u*(b/100)}else e=parseFloat(r.converted_price);const l={product_id:r.id,quantity:1,price:e};r.amounts&&r.amounts.length>0&&(l.amount_id=r.amounts[0].id);const i=await x.post("https://backend.webenia.org/api/cart-items",l,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json",Accept:"application/json"}});i.data.status?(S({title:g("success"),message:i.data.message,type:"success"}),h.incrementCount(),await h.fetchCartCount()):S({title:g("error"),message:i.data.message,type:"error"})}catch(e){console.error("Error adding to cart:",e),S({title:g("error"),message:(a=(m=e.response)==null?void 0:m.data)==null?void 0:a.message,type:"error"})}},L=r=>{if(r.discount&&r.discount.is_active){const m=parseFloat(r.discount.discount_value);return Math.round(m)}return 0};return J(()=>{k(),window.addEventListener("currency-changed",()=>{k()})}),(r,m)=>{const a=$("fa"),e=$("router-link"),l=$("el-col");return d(),f("div",qs,[s("div",Ms,[s("div",Hs,[y(a,{class:"fa-icon me-2",icon:["fas","shopping-basket"]}),s("h2",Rs,v(r.$t("LatestProducts.LatestProducts")),1)]),s("div",Js,[(d(!0),f(N,null,z(o.value,i=>(d(),E(l,{key:i.id,xs:24,sm:12,md:8,lg:6,class:"d-flex justify-content-center"},{default:B(()=>[s("div",Gs,[s("div",Ks,[y(e,{to:`/read/products/${i.id}`},{default:B(()=>[i.images.length?(d(),f("img",{key:0,src:I(i.images[0].path),alt:i.name_en,class:"product-img card-img-top"},null,8,Qs)):w("",!0)]),_:2},1032,["to"]),i.is_available?w("",!0):(d(),f("div",Xs,v(r.$t("products.outOfStock")),1))]),s("div",Ys,[s("h5",Zs,v(G(n)==="ar"?i.name_ar:i.name_en),1),s("div",et,[i.discount&&i.discount.is_active?(d(),f("span",st,v(L(i))+"% OFF ",1)):w("",!0),i.discount&&i.discount.is_active?(d(),f("span",tt,v(i.converted_price)+" "+v(i.currency_code),1)):w("",!0),s("span",ot,v(F(i))+" "+v(i.currency_code),1)]),s("div",at,[y(e,{to:`/read/products/${i.id}`,class:"btn btn-light rounded-circle shadow-sm",title:"View"},{default:B(()=>[y(a,{icon:"eye"})]),_:2},1032,["to"]),s("button",{onClick:b=>T(i),disabled:!i.is_available,class:"btn btn-light shadow-sm"},v(r.$t("home.add-to-cart")),9,it),s("button",{onClick:b=>P(i),class:W(["btn rounded-circle shadow-sm btn-light",C(i.id)?"text-danger":""]),title:C(i.id)?"Remove from favorites":"Add to favorites"},[y(a,{icon:C(i.id)?"fas fa-heart":"far fa-heart"},null,8,["icon"])],10,rt)])])])]),_:2},1024))),128))])])])}}},ct=A(nt,[["__scopeId","data-v-5883e107"]]);const lt={name:"Loader"},dt={class:"loader-svg-wrapper"};function _t(t,o,_,h,n,g){return d(),f("div",dt,o[0]||(o[0]=[s("div",{class:"loader"},null,-1)]))}const ut=A(lt,[["render",_t],["__scopeId","data-v-417d877b"]]);const ht={name:"VerifyOtp",data(){return{success:"",error:"",showOtpInput:!0,otp:""}},methods:{async handleActiveNow(){this.success="",this.error="",await this.resendOtp(),this.showOtpInput=!0},async resendOtp(){var t,o,_;try{const h=localStorage.getItem("otp_email");if(!h){this.error="No email found. Please login again.";return}const n=await x.post("https://backend.webenia.org/api/resend-otp",{email:h});(t=n.data)!=null&&t.success?this.success=((o=n.data)==null?void 0:o.message)||"OTP resent successfully.":this.error=((_=n.data)==null?void 0:_.message)||"Failed to resend OTP."}catch(h){console.error(h),this.error="Something went wrong. Please try again."}},async verifyOtp(){var h,n,g,k,c,I,C,O,P,F,T,L,r,m,a;this.success="",this.error="",this.otpMessage="";const t=Array.isArray(this.otp)?this.otp.join(""):this.otp,o=t&&/^\d{4}$/.test(t);if(!t||!o){const e=((h=this.$t)==null?void 0:h.call(this,"otp.invalidLength"))||"Please enter a valid 4-digit code";this.otpMessage=e,(g=(n=this.$toast)==null?void 0:n.error)==null||g.call(n,e);return}const _=localStorage.getItem("otp_email");if(!_){const e=((k=this.$t)==null?void 0:k.call(this,"otp.emailMissing"))||"No email found. Please login again.";this.error=e,(I=(c=this.$toast)==null?void 0:c.error)==null||I.call(c,e);return}try{const e=await x.post("https://backend.webenia.org/api/client/verify-otp",{email:_,otp:t});if(e.data.status===!0){const l={...this.user,...e.data.data.user};localStorage.setItem("user",JSON.stringify(l)),localStorage.setItem("auth_token",e.data.data.token),this.success=((C=this.$t)==null?void 0:C.call(this,"otp.success"))||"OTP verified successfully!",this.otpMessage="",window.location.reload()}else{const l=e.data.message||((O=this.$t)==null?void 0:O.call(this,"otp.failed"))||"OTP verification failed.";this.otpMessage=l,(F=(P=this.$toast)==null?void 0:P.error)==null||F.call(P,l)}}catch(e){console.error("OTP verification error:",e);const l=((L=(T=e.response)==null?void 0:T.data)==null?void 0:L.message)||((r=this.$t)==null?void 0:r.call(this,"otp.error"))||"OTP verification failed";this.otpMessage=l,(a=(m=this.$toast)==null?void 0:m.error)==null||a.call(m,l)}}}},gt={class:"modal-overlay d-flex justify-content-center align-items-center"},ft={class:"cart-modal bg-white rounded-4 shadow p-4 position-relative"},vt={class:"cart-content overflow-auto d-flex align-items-center flex-column",style:{"max-height":"70vh"}},pt={class:"w-50 d-flex align-items-center flex-column text-center"},mt={key:0,class:"w-100 d-flex flex-column align-items-center mt-3"},bt={key:1,class:"success-message"},yt={key:2,class:"error-message"};function $t(t,o,_,h,n,g){const k=$("fa");return d(),f("div",gt,[s("div",ft,[o[6]||(o[6]=s("div",{class:"mb-4 d-flex justify-content-center align-items-center w-100 logo-container"},[s("img",{src:se,alt:"Logo"})],-1)),s("button",{class:"close-btn",onClick:o[0]||(o[0]=c=>t.$emit("close"))},"×"),s("div",vt,[s("div",pt,[o[4]||(o[4]=s("p",{class:"text-center mb-4"},"sorry to say",-1)),y(k,{icon:"circle-exclamation",size:"xl",class:"icon mb-2"}),o[5]||(o[5]=s("h5",null,[D("Enter the "),s("span",null,"OTP"),D(" sent in the email to "),s("span",null,"active"),D(" your "),s("span",null,"account")],-1)),s("button",{type:"button",onClick:o[1]||(o[1]=(...c)=>g.handleActiveNow&&g.handleActiveNow(...c)),class:"login-btn btn my-4"},"active now")]),n.showOtpInput?(d(),f("div",mt,[te(s("input",{"onUpdate:modelValue":o[2]||(o[2]=c=>n.otp=c),type:"text",maxlength:"6",placeholder:"Enter OTP",class:"form-control mb-2",style:{"max-width":"200px","text-align":"center"}},null,512),[[oe,n.otp]]),s("button",{type:"button",onClick:o[3]||(o[3]=(...c)=>g.verifyOtp&&g.verifyOtp(...c)),class:"btn btn-success mb-2"},"Verify OTP")])):w("",!0),n.success?(d(),f("div",bt,v(n.success),1)):w("",!0),n.error?(d(),f("div",yt,v(n.error),1)):w("",!0)])])])}const K=A(ht,[["render",$t]]),wt="/assets/slider1-d6efcb08.png",kt="/assets/slider2-c32800b9.png",St="/assets/Slider3-24a08685.png";const Pt={name:"Home",components:{Header:ae,Categories:ye,HomeBrands:Ie,LatestProducts:ct,Products:Xe,BestSelling:ps,WhyChooseUs:Ds,Footer:ie,Loader:ut,VerifyOtp:K,VerifyOtpPopup:K},computed:{showVerifyOtp(){return this.user&&!this.user.is_verified},direction(){return re.global.locale==="ar"?"rtl":"ltr"}},data(){return{showBrand:!1,showOurProducts:!1,showLatestProducts:!1,showBestSelling:!1,loading:!0,user:null,token:null,showVerifyOtpPopup:!1}},mounted(){this.fetchSettings(),localStorage.getItem("showVerifyOtpPopup")==="true"&&(this.showVerifyOtpPopup=!0,localStorage.removeItem("showVerifyOtpPopup"))},methods:{async fetchSettings(){try{const _=(await(await fetch("https://backend.webenia.org/api/settings")).json()).data,h=n=>{const g=_.find(k=>k.key===n);return g&&g.value==="1"};this.showBrand=h("show_brand"),this.showOurProducts=h("show_our_products"),this.showLatestProducts=h("show_latest_products"),this.showBestSelling=h("show_best_selling_products")}catch(t){console.error("Failed to fetch settings:",t)}finally{setTimeout(()=>{this.loading=!1},3e3)}},scrollLeft(){const t=window.innerWidth,_=this.$refs.slider.querySelector(".card").offsetWidth;t<=440?this.$refs.slider.scrollBy({left:-(_*2+26),behavior:"smooth"}):t<=768?this.$refs.slider.scrollBy({left:-(_*3+50),behavior:"smooth"}):t<=1200?this.$refs.slider.scrollBy({left:-(_*4+50),behavior:"smooth"}):this.$refs.slider.scrollBy({left:-(_*7+30),behavior:"smooth"})},scrollRight(){const t=window.innerWidth,_=this.$refs.slider.querySelector(".card").offsetWidth;t<=440?this.$refs.slider.scrollBy({left:_*2+26,behavior:"smooth"}):t<=768?this.$refs.slider.scrollBy({left:_*3+50,behavior:"smooth"}):t<=1200?this.$refs.slider.scrollBy({left:_*4+50,behavior:"smooth"}):this.$refs.slider.scrollBy({left:_*7+30,behavior:"smooth"})}},created(){const t=localStorage.getItem("user"),o=localStorage.getItem("token");t&&(this.user=JSON.parse(t)),o&&(this.token=o)}},Ct={class:"home"};function Ft(t,o,_,h,n,g){const k=$("Loader"),c=$("Header"),I=$("VerifyOtp"),C=$("verify-otp-popup"),O=$("Categories"),P=$("HomeBrands"),F=$("Products"),T=$("LatestProducts"),L=$("BestSelling"),r=$("WhyChooseUs"),m=$("Footer");return d(),f("div",Ct,[n.loading?(d(),E(k,{key:0})):w("",!0),y(c),g.showVerifyOtp?(d(),E(I,{key:1,user:n.user,token:n.token},null,8,["user","token"])):w("",!0),n.showVerifyOtpPopup?(d(),E(C,{key:2,onClose:o[0]||(o[0]=a=>n.showVerifyOtpPopup=!1)})):w("",!0),o[1]||(o[1]=Q('<section class="hero-section" data-v-6b1fc768><div id="carouselExample" class="carousel slide" data-v-6b1fc768><div class="carousel-inner" data-v-6b1fc768><div class="carousel-item active" data-v-6b1fc768><img src="'+wt+'" class="d-block w-100" alt="..." data-v-6b1fc768></div><div class="carousel-item" data-v-6b1fc768><img src="'+kt+'" class="d-block w-100" alt="..." data-v-6b1fc768></div><div class="carousel-item" data-v-6b1fc768><img src="'+St+'" class="d-block w-100" alt="..." data-v-6b1fc768></div></div><button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev" data-v-6b1fc768><span class="carousel-control-prev-icon" aria-hidden="true" data-v-6b1fc768></span><span class="visually-hidden" data-v-6b1fc768>Previous</span></button><button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next" data-v-6b1fc768><span class="carousel-control-next-icon" aria-hidden="true" data-v-6b1fc768></span><span class="visually-hidden" data-v-6b1fc768>Next</span></button></div></section>',1)),y(O),n.showBrand?(d(),E(P,{key:3})):w("",!0),n.showOurProducts?(d(),E(F,{key:4})):w("",!0),n.showLatestProducts?(d(),E(T,{key:5})):w("",!0),n.showBestSelling?(d(),E(L,{key:6})):w("",!0),y(r),y(m)])}const Ot=A(Pt,[["render",Ft],["__scopeId","data-v-6b1fc768"]]);export{Ot as default};
