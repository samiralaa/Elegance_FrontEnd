import{_ as h,b as w,r as f,o as c,c as p,a as s,t as i,w as b,f as v,g as u,i as U,k as j,e as g,l as _,m}from"./index-67b7e0a9.js";import{_ as k}from"./perfume-banner-e9b7c37b.js";const y={name:"JoinUs",data(){return{formData:{email:"",password:""},showPassword:!1,errorMessage:""}},methods:{async handleSubmit(){var e,o,d,l,t,n;try{const r=await w.post("http://elegance_backend.test/api/client/login",this.formData);if(r.data.status){const a=r.data.data;localStorage.setItem("auth_token",a.token),localStorage.setItem("auth_user",JSON.stringify(a.user)),this.$store.commit("auth/SET_AUTH",a),await this.$store.dispatch("cart/loadCart"),this.$router.push("/"),this.errorMessage=""}else this.errorMessage=r.data.message||"Login failed."}catch(r){this.errorMessage=((o=(e=r.response)==null?void 0:e.data)==null?void 0:o.message)||((n=(t=(l=(d=r.response)==null?void 0:d.data)==null?void 0:l.errors)==null?void 0:t.email)==null?void 0:n[0])||r.message||"Login failed."}},togglePassword(){this.showPassword=!this.showPassword}}},P={class:"join-us-container"},D={class:"join-us-content"},M={class:"form-header"},S={class:"elegant-title"},V={class:"elegant-description"},C={key:0,class:"error-message"},N={class:"form-group"},$={for:"email"},L={class:"form-group"},T={for:"password"},A={class:"password-input-container"},B=["type"],E={class:"form-links"},I={type:"submit",class:"submit-btn"},q={class:"register-section"};function H(e,o,d,l,t,n){const r=f("router-link");return c(),p("div",P,[o[4]||(o[4]=s("div",{class:"banner-section"},[s("img",{src:k,alt:"Elegance Perfume",class:"banner-image"})],-1)),s("div",D,[s("div",M,[s("h1",S,i(e.$t("joinUs.title")),1),s("p",V,i(e.$t("joinUs.description")),1)]),s("form",{onSubmit:o[3]||(o[3]=b((...a)=>n.handleSubmit&&n.handleSubmit(...a),["prevent"])),class:"join-form"},[t.errorMessage?(c(),p("div",C,i(t.errorMessage),1)):v("",!0),s("div",N,[s("label",$,i(e.$t("joinUs.email")),1),u(s("input",{type:"email",id:"email","onUpdate:modelValue":o[0]||(o[0]=a=>t.formData.email=a),required:""},null,512),[[U,t.formData.email]])]),s("div",L,[s("label",T,i(e.$t("joinUs.password")),1),s("div",A,[u(s("input",{type:t.showPassword?"text":"password",id:"password","onUpdate:modelValue":o[1]||(o[1]=a=>t.formData.password=a),required:""},null,8,B),[[j,t.formData.password]]),s("button",{type:"button",class:"show-password-btn",onClick:o[2]||(o[2]=(...a)=>n.togglePassword&&n.togglePassword(...a))},i(t.showPassword?e.$t("joinUs.hidePassword"):e.$t("joinUs.showPassword")),1)])]),s("div",E,[g(r,{to:"/forgot-password",class:"link"},{default:_(()=>[m(i(e.$t("joinUs.forgotPassword")),1)]),_:1})]),s("button",I,i(e.$t("joinUs.login")),1),s("div",q,[s("p",null,[m(i(e.$t("joinUs.notMember"))+" ",1),g(r,{to:"/register",class:"link"},{default:_(()=>[m(i(e.$t("joinUs.registerHere")),1)]),_:1})])])],32)])])}const z=h(y,[["render",H],["__scopeId","data-v-7b018928"]]);export{z as default};
