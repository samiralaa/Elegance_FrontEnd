import{_ as z,R as B,S as I,y as _,E as $,O as N,r as p,o as S,c as C,e as r,p as s,a as e,t as o,n as T,f as R,m as b,T as L,U as P,b as u}from"./index-3d2ca9dc.js";const V=B({name:"DashboardView",setup(){const t=I(),d=_(0),w=_(0),g=_(0),y=_(0),O=_([]),i=_({today_sales:0,this_month_sales:0,last_month_sales:0,month_over_month_growth:0,daily_sales:[],top_selling_products:[],converted_total_sales:0,converted_currency:""});let l=null;const m=()=>{const a=document.getElementById("salesChart");a&&(l=L(a),h())},h=()=>{if(!l)return;const a=i.value.daily_sales.map(v=>v.date),n=i.value.daily_sales.map(v=>parseFloat(v.total_sales)),F=i.value.daily_sales.map(v=>v.total_orders),A={tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["Sales","Orders"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:a},yAxis:[{type:"value",name:"Sales ($)",position:"left"},{type:"value",name:"Orders",position:"right"}],series:[{name:"Sales",type:"line",smooth:!0,data:n,itemStyle:{color:"#409EFF"},areaStyle:{color:new P(0,0,0,1,[{offset:0,color:"rgba(64,158,255,0.3)"},{offset:1,color:"rgba(64,158,255,0.1)"}])}},{name:"Orders",type:"line",smooth:!0,yAxisIndex:1,data:F,itemStyle:{color:"#67C23A"}}]};l.setOption(A)},f=()=>{l&&l.resize()};$(()=>{m(),window.addEventListener("resize",f)}),N(()=>{l&&l.dispose(),window.removeEventListener("resize",f)});const k=async()=>{try{const a=JSON.parse(localStorage.getItem("tokenData"));if(!a||!a.token)throw new Error("Authentication token not found");u.defaults.headers.common.Authorization=`Bearer ${a.token}`;const n=await u.get("https://backend.webenia.org/api/dashboard/sales-overview");n.data.status===!0&&(i.value=n.data.data,d.value=parseFloat(n.data.data.this_month_sales||0),d.value=parseFloat(n.data.data.converted_total_sales||0),h())}catch(a){console.error("Error fetching sales overview:",a)}},c=async()=>{try{const a=JSON.parse(localStorage.getItem("tokenData"));if(!a||!a.token)throw new Error("Authentication token not found");u.defaults.headers.common.Authorization=`Bearer ${a.token}`;const n=await u.get("https://backend.webenia.org/api/dashboard/total-products");n.data.status===!0&&(y.value=n.data.data.total_products)}catch(a){console.error("Error fetching total products:",a)}},E=async()=>{try{const a=JSON.parse(localStorage.getItem("tokenData"));if(!a||!a.token)throw new Error("Authentication token not found");u.defaults.headers.common.Authorization=`Bearer ${a.token}`;const n=await u.get("https://backend.webenia.org/api/dashboard/total-orders");n.data.status===!0&&(w.value=n.data.data.total_orders)}catch(a){console.error("Error fetching total orders:",a)}},D=async()=>{try{const a=JSON.parse(localStorage.getItem("tokenData"));if(!a||!a.token)throw new Error("Authentication token not found");u.defaults.headers.common.Authorization=`Bearer ${a.token}`;const n=await u.get("https://backend.webenia.org/api/dashboard/recent-orders");n.data.status===!0&&(O.value=n.data.data)}catch(a){console.error("Error fetching recent orders:",a)}};return $(async()=>{try{await E(),await t.dispatch("fetchCustomers"),await c(),await D(),await k(),g.value=t.getters.totalCustomers||0}catch(a){console.error("Error fetching dashboard data:",a)}}),{totalRevenue:d,totalOrders:w,totalCustomers:g,totalProducts:y,orders:O,salesOverview:i}}}),J={class:"dashboard"},M={class:"card-header"},G={class:"card-content"},U={key:0},j={class:"card-header"},q={class:"card-content"},H={class:"card-header"},K={class:"card-content"},Q={class:"card-header"},W={class:"card-content"},X={class:"card-header"},Y={class:"sales-overview"},Z={class:"sales-metrics"},x={class:"metric"},ee={class:"label"},te={class:"value"},ae={class:"metric"},se={class:"label"},oe={class:"value"},re={class:"metric"},ne={class:"label"},le={class:"value"},de={class:"card-header"};function ie(t,d,w,g,y,O){const i=p("el-card"),l=p("el-col"),m=p("el-row"),h=p("el-table-column"),f=p("el-tag"),k=p("el-table");return S(),C("div",J,[r(m,{gutter:20},{default:s(()=>[r(l,{span:6},{default:s(()=>[r(i,{class:"summary-card"},{header:s(()=>[e("div",M,[e("span",null,o(t.$t("dashboard.Total-Revenue")),1)])]),default:s(()=>[e("div",G,[e("h2",null,"$"+o(t.totalRevenue.toFixed(2)),1),e("span",{class:T(["trend",t.salesOverview.month_over_month_growth>=0?"positive":"negative"])},o(t.salesOverview.month_over_month_growth>=0?"+":"")+o(t.salesOverview.month_over_month_growth)+"% ",3),t.salesOverview.converted_total_sales?(S(),C("div",U,[e("small",null," ("+o(t.salesOverview.converted_total_sales.toFixed(2))+" "+o(t.salesOverview.converted_currency)+") ",1)])):R("",!0)])]),_:1})]),_:1}),r(l,{span:6},{default:s(()=>[r(i,{class:"summary-card"},{header:s(()=>[e("div",j,[e("span",null,o(t.$t("dashboard.total-Orders")),1)])]),default:s(()=>[e("div",q,[e("h2",null,o(t.totalOrders),1),d[0]||(d[0]=e("span",{class:"trend positive"},"+8%",-1))])]),_:1})]),_:1}),r(l,{span:6},{default:s(()=>[r(i,{class:"summary-card"},{header:s(()=>[e("div",H,[e("span",null,o(t.$t("dashboard.total-Customers")),1)])]),default:s(()=>[e("div",K,[e("h2",null,o(t.totalCustomers),1),d[1]||(d[1]=e("span",{class:"trend positive"},"+5%",-1))])]),_:1})]),_:1}),r(l,{span:6},{default:s(()=>[r(i,{class:"summary-card"},{header:s(()=>[e("div",Q,[e("span",null,o(t.$t("dashboard.total-Products")),1)])]),default:s(()=>[e("div",W,[e("h2",null,o(t.totalProducts),1),d[2]||(d[2]=e("span",{class:"trend positive"},"+3%",-1))])]),_:1})]),_:1})]),_:1}),r(m,{gutter:20,class:"chart-row"},{default:s(()=>[r(l,{span:12},{default:s(()=>[r(i,null,{header:s(()=>[e("div",X,[e("span",null,o(t.$t("dashboard.Sales-Overview")),1)])]),default:s(()=>[e("div",Y,[e("div",Z,[e("div",x,[e("span",ee,o(t.$t("dashboard.Today-Sales")),1),e("span",te,"$"+o(parseFloat(t.salesOverview.today_sales||0).toFixed(2)),1)]),e("div",ae,[e("span",se,o(t.$t("dashboard.This-Month")),1),e("span",oe,"$"+o(parseFloat(t.salesOverview.this_month_sales||0).toFixed(2)),1)]),e("div",re,[e("span",ne,o(t.$t("dashboard.Last-Month")),1),e("span",le,"$"+o(parseFloat(t.salesOverview.last_month_sales||0).toFixed(2)),1)])]),d[3]||(d[3]=e("div",{id:"salesChart",class:"chart-container"},null,-1))])]),_:1})]),_:1}),r(l,{span:12},{default:s(()=>[r(i,null,{header:s(()=>[e("div",de,[e("span",null,o(t.$t("dashboard.recent-Orders")),1)])]),default:s(()=>[r(k,{data:t.orders,style:{width:"100%"}},{default:s(()=>[r(h,{prop:"id",label:t.$t("dashboard.Order-Id"),width:"100"},null,8,["label"]),r(h,{label:t.$t("dashboard.customer")},{default:s(({row:c})=>[b(o(c.user.name),1)]),_:1},8,["label"]),r(h,{prop:"total_price",label:t.$t("dashboard.Total"),width:"120"},{default:s(({row:c})=>[b(o(c.currency)+o(c.total_price),1)]),_:1},8,["label"]),r(h,{prop:"status",label:t.$t("dashboard.Status"),width:"120"},{default:s(({row:c})=>[r(f,{type:c.status==="completed"?"success":"warning"},{default:s(()=>[b(o(c.status),1)]),_:2},1032,["type"])]),_:1},8,["label"]),r(h,{prop:"ordered_at",label:t.$t("dashboard.Order-Date"),width:"180"},{default:s(({row:c})=>[b(o(c.ordered_at),1)]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})]),_:1})]),_:1})])}const he=z(V,[["render",ie],["__scopeId","data-v-8900ce2b"]]);export{he as default};
