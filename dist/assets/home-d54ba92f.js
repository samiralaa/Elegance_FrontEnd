import{q as Z,s as ee,A as M,u as te,_ as U,r as $,o as l,c as v,a as e,e as m,t as u,F as W,d as z,n as j,f as k,b as O,p as B,x as V,y as H,z as R,B as J,C as se,D as K,E as G,G as P,i as A,l as q,I as Y,j as oe,w as ae,v as ie,H as re,J as ne,K as ce}from"./index-96ee7cbc.js";import{$ as D}from"./slick-theme-a09cb2c3.js";const le={name:"WebsiteCategories",computed:{...Z("websiteCategories",{categories:s=>s.items,loading:s=>s.loading,error:s=>s.error})},created(){this.loadCategories()},methods:{...ee("websiteCategories",{fetchCategories:"fetchWebsiteCategories"}),getProductImage(s){if(!s.image)return"/placeholder-image.jpg";const o=s.image,_=`${M}/public/storage/`;if(o.startsWith(_))return o;if(o.startsWith(M)){const h=o.substring(M.length);return`${_}${h.startsWith("/")?h.substring(1):h}`}return o.startsWith("http")?o:`${_}${o}`},async loadCategories(){try{await this.fetchCategories(),await te();const s=D(this.$refs.slider);s.hasClass("slick-initialized")&&s.slick("unslick"),s.slick({slidesToShow:7,slidesToScroll:1,rtl:this.$i18n.locale==="ar",responsive:[{breakpoint:1200,settings:{slidesToShow:5}},{breakpoint:992,settings:{slidesToShow:4}},{breakpoint:768,settings:{slidesToShow:3}},{breakpoint:576,settings:{slidesToShow:2}},{breakpoint:400,settings:{slidesToShow:1}}]})}catch(s){console.error("Failed to load categories:",s)}},scrollLeft(){const s=D(this.$refs.slider);s.length&&s.hasClass("slick-initialized")&&s.slick("slickPrev")},scrollRight(){const s=D(this.$refs.slider);s.length&&s.hasClass("slick-initialized")&&s.slick("slickNext")},getAlt(s){return this.$i18n.locale==="ar"?s.name_ar:s.name}},beforeUnmount(){const s=D(this.$refs.slider);s.length&&s.hasClass("slick-initialized")&&s.slick("unslick")}},de={class:"all-categories py-4"},_e={class:"container"},ue={class:"title"},he={class:"slider-wrapper"},ge={class:"scrollers ms-3 mb-2"},ve={class:"slider",ref:"slider"},fe=["href"],pe={class:"category-content"},me=["src"],ye={key:0,class:"loading-overlay"},be={key:1,class:"error-message"};function $e(s,o,_,h,c,g){const S=$("fa");return l(),v("section",de,[e("div",_e,[e("div",ue,[m(S,{class:"fa-icon",icon:["fas","cubes"]}),e("h2",null,u(s.$t("home.categories")),1)]),e("div",he,[e("div",ge,[e("button",{class:"btn nav-button left",onClick:o[0]||(o[0]=(...d)=>g.scrollLeft&&g.scrollLeft(...d))},"â†"),e("button",{class:"btn nav-button right",onClick:o[1]||(o[1]=(...d)=>g.scrollRight&&g.scrollRight(...d))},"â†’")]),e("div",ve,[(l(!0),v(W,null,z(s.categories,d=>(l(),v("a",{key:d.id,class:"card",href:`/category/${d.id}`},[e("div",pe,[e("img",{src:g.getProductImage(d)},null,8,me),e("p",{class:j({rtl:s.$i18n.locale==="ar"})},u(s.$i18n.locale==="ar"?d.name_ar:d.name),3)])],8,fe))),128))],512),s.loading?(l(),v("div",ye,o[2]||(o[2]=[e("div",{class:"loading-spinner"},null,-1)]))):k("",!0),s.error?(l(),v("div",be,u(s.error),1)):k("",!0)])])])}const we=U(le,[["render",$e],["__scopeId","data-v-9a4f0c77"]]);const ke={name:"HomeBrands",data(){return{brands:[]}},created(){this.fetchBrands()},methods:{async fetchBrands(){try{const s=await O.get("https://backend.webenia.org/api/website/brands/section");this.brands=s.data.data}catch(s){console.error("Error fetching brands:",s)}},getImageUrl(s){return`https://backend.webenia.org/public/storage/${s}`},likeBrand(s){console.log(`Brand ${s} liked!`)}}},Se={class:"our-brands"},Pe={class:"container"},Ce={class:"title mt-5"},Fe={class:"content"},xe=["src","alt"],Ie={key:1,class:"text-muted small"};function Oe(s,o,_,h,c,g){const S=$("fa"),d=$("router-link");return l(),v("section",Se,[e("div",Pe,[e("div",Ce,[m(S,{class:"fa-icon",icon:["fas","diagram-project"]}),e("h2",null,u(s.$t("home.brands")),1)]),e("div",Fe,[(l(!0),v(W,null,z(c.brands,C=>(l(),v("div",{key:C.id,class:"brand-img"},[m(d,{to:`/brand/${C.id}`,class:"text-decoration-none"},{default:B(()=>[C.images.length?(l(),v("img",{key:0,src:g.getImageUrl(C.images[0].path),alt:C.name_en,class:"img-fluid"},null,8,xe)):(l(),v("span",Ie,"No Image"))]),_:2},1032,["to"])]))),128))])])])}const Be=U(ke,[["render",Oe],["__scopeId","data-v-e9c8270b"]]);const Ve={class:"products-section"},Te={class:"container"},Le={class:"title section-header d-flex align-items-center mb-4"},Ee={class:"mb-0"},Ae={key:0,class:"text-center my-4"},Ue={key:1},Ne={class:"row g-3"},We={class:"product-card card border-0 h-100"},je={class:"position-relative overflow-hidden bg-light"},ze=["src","alt"],De={key:0,class:"sale-badge"},qe={class:"product-actions d-flex justify-content-center gap-2 w-100"},Me=["onClick","disabled"],He=["onClick"],Re=["onClick","title"],Je={class:"card-body"},Ke={class:"card-title"},Ge={class:"price-container"},Qe={key:0,class:"discount-badge"},Xe={key:1,class:"price-old"},Ye={class:"card-text card-price"},Ze={class:"d-flex justify-content-center mt-4"},et={__name:"ProductSection",setup(s){const o=V([]),_=V([]),h=V(!1),c=H(),g=R(),{locale:S,t:d}=J(),C=se(),x=t=>`https://backend.webenia.org/public/storage/${t}`,T=async()=>{try{const t=await O.get("https://backend.webenia.org/api/currencies");t.data.currencies&&(_.value=t.data.currencies)}catch(t){console.error("Error fetching currencies:",t)}},F=async()=>{try{const t=JSON.parse(localStorage.getItem("selectedCurrency"))||{code:"USD"},y=await O.get("https://backend.webenia.org/api/website/products/section",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,Currency:t.code}});y.data.status&&(o.value=y.data.data,await L())}catch(t){console.error("Error fetching products:",t),P({title:"Error",message:"Failed to load products.",type:"error"})}finally{h.value=!1}},L=async()=>{try{const t=await O.get("https://backend.webenia.org/api/favorites",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});t.data.status&&t.data.data&&c.setFavorites(t.data.data)}catch(t){console.error("Error fetching favorites:",t)}},I=t=>c.favorites.some(y=>y.product_id===t),E=t=>{var y,w;return((y=c.favorites.find(b=>b.product_id===t))==null?void 0:y.favorite_id)||((w=c.favorites.find(b=>b.product_id===t))==null?void 0:w.id)},n=async t=>{var y,w;try{if(I(t.id)){const b=E(t.id);b&&(await c.removeFromFavorites(b),P({title:d("success"),message:d("favorite_removed")||"Product removed from favorites",type:"success"}))}else{const b=await c.addToFavorites(t.id);P({title:d("success"),message:b.message||d("favorite_added")||"Product added to favorites",type:"success"})}}catch(b){console.error("Favorite error:",b),P({title:d("error"),message:((w=(y=b.response)==null?void 0:y.data)==null?void 0:w.message)||d("login_required_favorite")||"Login required to favorite product",type:"error"})}},f=async t=>{var y,w;try{let b=0;if(t.discount&&t.discount.is_active){const N=parseFloat(t.discount.discount_value),Q=parseFloat(t.price);b=Q-Q*(N/100)}else b=parseFloat(t.price);const r=await O.post("https://backend.webenia.org/api/cart-items",{product_id:t.id,quantity:1,price:b},{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});r.data.status?(P.success(r.data.message),g.incrementCount(),await g.fetchCartCount()):P.error(r.data.message)}catch(b){console.error("Error adding to cart:",b),P.error(((w=(y=b.response)==null?void 0:y.data)==null?void 0:w.message)||"Error adding product to cart")}},a=t=>{if(t.discount&&t.discount.is_active){const y=parseFloat(t.discount.discount_value),w=parseFloat(t.converted_price||t.price);return(w-w*(y/100)).toFixed(2)}return t.converted_price||t.price},i=t=>{if(t.discount&&t.discount.is_active){const y=parseFloat(t.discount.discount_value);return Math.round(y)}return 0},p=()=>{C.push("/product-listing")};return K(async()=>{await T(),await F(),window.addEventListener("currency-changed",()=>{F()})}),(t,y)=>{const w=$("fa"),b=$("router-link");return l(),v("div",Ve,[e("div",Te,[e("div",Le,[m(w,{class:"fa-icon me-2",icon:["fas","shopping-basket"]}),e("h2",Ee,u(t.$t("home.products")),1)]),h.value?(l(),v("div",Ae,"Loading products...")):(l(),v("div",Ue,[e("div",Ne,[(l(!0),v(W,null,z(o.value,r=>(l(),v("div",{key:r.id,class:"col-sm-6 col-md-4 col-lg-3"},[e("div",We,[e("div",je,[m(b,{to:`/read/products/${r.id}`},{default:B(()=>[r.images&&r.images.length?(l(),v("img",{key:0,src:x(r.images[0].path),alt:r.name_en,class:"card-img-top product-img"},null,8,ze)):k("",!0)]),_:2},1032,["to"]),r.is_available?k("",!0):(l(),v("div",De,u(t.$t("products.outOfStock")),1)),e("div",qe,[m(b,{to:`/read/products/${r.id}`,class:"btn btn-light rounded-circle shadow-sm",title:"View"},{default:B(()=>[m(w,{icon:"eye"})]),_:2},1032,["to"]),e("button",{onClick:N=>f(r),class:j(["btn btn-light shadow-sm disable",{disabled:!r.is_available}]),disabled:!r.is_available},u(t.$t("home.add-to-cart")),11,Me),e("button",{onClick:N=>f(r),class:"d-none btn rounded-circle shadow-sm btn-light enable"},[m(w,{icon:"shopping-cart"})],8,He),e("button",{onClick:N=>n(r),class:j(["btn rounded-circle shadow-sm btn-light",I(r.id)?"text-danger":""]),title:I(r.id)?"Remove from favorites":"Add to favorites"},[m(w,{icon:I(r.id)?"fas fa-heart":"far fa-heart"},null,8,["icon"])],10,Re)])]),e("div",Je,[e("h5",Ke,u(G(S)==="ar"?r.name_ar:r.name_en),1),e("div",Ge,[r.discount&&r.discount.is_active?(l(),v("span",Qe,u(i(r))+"% OFF ",1)):k("",!0),r.discount&&r.discount.is_active?(l(),v("span",Xe,u(r.converted_price)+" "+u(r.currency_code),1)):k("",!0),e("span",Ye,u(a(r))+" "+u(r.currency_code),1)])])])]))),128))]),e("div",Ze,[e("button",{class:"btn view-all-btn",onClick:p},u(t.$t("home.view-all-products")),1)])]))])])}}},tt=U(et,[["__scopeId","data-v-c0a5d687"]]);const st={class:"products-section"},ot={class:"container"},at={class:"title mt-5"},it={class:"row g-4"},rt={class:"card my-3 p-sm-4"},nt={class:"img-container rounded position-relative"},ct=["src","alt"],lt={key:0,class:"sale-badge"},dt={class:"body-container"},_t={class:"card-body"},ut={class:"card-title"},ht={class:"price-container"},gt={key:0,class:"discount-badge"},vt={key:1,class:"price-old"},ft={class:"card-text card-price"},pt={class:"product-actions d-flex justify-content-center flex-wrap gap-2"},mt=["disabled","onClick"],yt=["onClick","title"],bt={__name:"BestSelling",setup(s){const o=V([]),_=V(!1),h=V(""),c=H(),g=R(),{locale:S,t:d}=J();V([]),V({code:"USD"});const C=async()=>{try{const a=JSON.parse(localStorage.getItem("selectedCurrency"))||{code:"USD"},i=await O.get("https://backend.webenia.org/api/website/best-selling/products",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,Currency:a.code}});i.data.status&&i.data.data&&(o.value=i.data.data,await x())}catch(a){console.error("Error fetching products:",a),P({title:"Error",message:"Failed to load products.",type:"error"})}},x=async()=>{try{const a=await O.get("https://backend.webenia.org/api/favorites",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});a.data.status&&a.data.data&&c.setFavorites(a.data.data)}catch(a){console.error("Error fetching favorites:",a)}},T=a=>`https://backend.webenia.org/public/storage/${a}`,F=a=>c.favorites.some(i=>i.product_id===a),L=a=>{const i=c.favorites.find(p=>p.product_id===a);return i?i.favorite_id||i.id:null},I=async a=>{var i,p;try{if(F(a.id)){const t=L(a.id);t&&(await c.removeFromFavorites(t),P({title:d("success"),message:d("favorite_removed")||"Product removed from favorites",type:"success"}))}else{const t=await c.addToFavorites(a.id);P({title:d("success"),message:t.message||d("favorite_added")||"Product added to favorites",type:"success"})}}catch(t){console.error("Favorite error:",t),P({title:d("error"),message:((p=(i=t.response)==null?void 0:i.data)==null?void 0:p.message)||d("login_required_favorite")||"Login required to favorite product",type:"error"})}},E=async a=>{var i,p;try{let t=0;if(a.discount&&a.discount.is_active){const b=parseFloat(a.discount.discount_value),r=parseFloat(a.converted_price||a.price);t=r-r*(b/100)}else t=parseFloat(a.converted_price||a.price);const y=localStorage.getItem("user_id"),w=await O.post("https://backend.webenia.org/api/cart-items",{product_id:a.id,quantity:1,price:t,user_id:y},{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});w.data.status?(P({title:d("success"),message:w.data.message,type:"success"}),g.incrementCount(),await g.fetchCartCount()):P({title:d("error"),message:w.data.message,type:"error"})}catch(t){console.error("Error adding to cart:",t),P({title:d("error"),message:(p=(i=t.response)==null?void 0:i.data)==null?void 0:p.message,type:"error"})}},n=a=>{if(a.discount&&a.discount.is_active){const i=parseFloat(a.discount.discount_value),p=parseFloat(a.converted_price||a.price);return(p-p*(i/100)).toFixed(2)}return a.converted_price||a.price},f=a=>{if(a.discount&&a.discount.is_active){const i=parseFloat(a.discount.discount_value);return Math.round(i)}return 0};return K(()=>{C(),window.addEventListener("currency-changed",()=>{C()})}),(a,i)=>{const p=$("fa"),t=$("router-link"),y=$("el-col"),w=$("el-button"),b=$("el-dialog");return l(),v("div",st,[e("div",ot,[e("div",at,[m(p,{class:"fa-icon",icon:["fas","star"]}),e("h2",null,u(a.$t("home.best-selling")),1)]),e("div",it,[(l(!0),v(W,null,z(o.value,r=>(l(),A(y,{key:r.id,xs:24,sm:24,md:12,lg:12},{default:B(()=>[e("div",rt,[e("div",nt,[m(t,{to:`/read/products/${r.id}`},{default:B(()=>[r.images.length?(l(),v("img",{key:0,src:T(r.images[0].path),alt:r.name_en,class:"product-img card-img bg-light"},null,8,ct)):k("",!0)]),_:2},1032,["to"]),r.is_available?k("",!0):(l(),v("div",lt,u(a.$t("products.outOfStock")),1))]),e("div",dt,[e("div",_t,[e("h5",ut,u(G(S)==="ar"?r.name_ar:r.name_en),1),e("div",ht,[r.discount&&r.discount.is_active?(l(),v("span",gt,u(f(r))+"% OFF ",1)):k("",!0),r.discount&&r.discount.is_active?(l(),v("span",vt,u(r.price)+" "+u(r.currency_code),1)):k("",!0),e("span",ft,u(n(r))+" "+u(r.currency_code),1)])]),e("div",pt,[m(t,{to:`/read/products/${r.id}`,class:"btn btn-light rounded-circle shadow-sm",title:"View"},{default:B(()=>[m(p,{icon:"eye"})]),_:2},1032,["to"]),e("button",{disabled:!r.is_available,onClick:N=>E(r),class:"btn btn-light shadow-sm rounded-circle"},[m(p,{icon:"cart-plus"})],8,mt),e("button",{onClick:N=>I(r),class:j(["btn rounded-circle shadow-sm btn-light",F(r.id)?"text-danger":""]),title:F(r.id)?"Remove from favorites":"Add to favorites"},[m(p,{icon:F(r.id)?"fas fa-heart":"far fa-heart"},null,8,["icon"])],10,yt)])])])]),_:2},1024))),128))])]),m(b,{modelValue:_.value,"onUpdate:modelValue":i[1]||(i[1]=r=>_.value=r),title:"ðŸŽ‰ Success",width:"30%","before-close":()=>_.value=!1,center:!0,"close-on-click-modal":!1,"show-close":!1},{footer:B(()=>[m(w,{type:"primary",onClick:i[0]||(i[0]=r=>_.value=!1)},{default:B(()=>i[2]||(i[2]=[q("OK")])),_:1,__:[2]})]),default:B(()=>[e("span",null,u(h.value),1)]),_:1},8,["modelValue","before-close"])])}}},$t=U(bt,[["__scopeId","data-v-ee9e7e5c"]]),wt="/assets/3-adbf781a.png",kt="/assets/2-1da5d603.png",St="/assets/icon 1 -ced21c67.png",Pt="/assets/4-b68b6467.png",Ct="/assets/elegancewebsiteleft-524d19b0.png",Ft="/assets/elegancewebsiteright-4654db9e.png";const xt={name:"WhyChooseUs",data(){return{}}},It={class:"why-choose-us"},Ot={class:"container"},Bt={class:"title mt-5"},Vt={class:"row row-cols-xl-5 row-cols-lg-4 row-cols-md-3 row-cols-sm-2 row-cols-1 row--20 d-flex justify-content-around"},Tt={class:"col"},Lt={class:"service-box card"},Et={class:"title"},At={class:"col"},Ut={class:"service-box card"},Nt={class:"title"},Wt={class:"col"},jt={class:"service-box card"},zt={class:"title"},Dt={class:"col"},qt={class:"service-box card"},Mt={class:"title"};function Ht(s,o,_,h,c,g){const S=$("fa");return l(),v(W,null,[e("section",It,[e("div",Ot,[e("div",Bt,[m(S,{class:"fa-icon",icon:["fas","shopping-basket"]}),e("h2",null,u(s.$t("home.why-us")),1)]),e("div",Vt,[e("div",Tt,[e("div",Lt,[o[0]||(o[0]=e("div",{class:"icon"},[e("img",{src:wt,class:"img-fluid",alt:"Service"})],-1)),e("h6",Et,u(s.$t("home.why.fast_delivery")),1)])]),e("div",At,[e("div",Ut,[o[1]||(o[1]=e("div",{class:"icon"},[e("img",{src:kt,class:"img-fluid",alt:"Service"})],-1)),e("h6",Nt,u(s.$t("home.why.guarantee")),1)])]),e("div",Wt,[e("div",jt,[o[2]||(o[2]=e("div",{class:"icon"},[e("img",{src:St,class:"img-fluid",alt:"Service"})],-1)),e("h6",zt,u(s.$t("home.why.return_policy")),1)])]),e("div",Dt,[e("div",qt,[o[3]||(o[3]=e("div",{class:"icon"},[e("img",{src:Pt,class:"img-fluid",alt:"Service"})],-1)),e("h6",Mt,u(s.$t("home.why.pro_quality")),1)])])])])]),o[4]||(o[4]=Y('<div class="axil-poster mt-3" data-v-537f384d><div class="container" data-v-537f384d><div class="row" data-v-537f384d><div class="col-lg-6 mb--30" data-v-537f384d><div class="single-poster" data-v-537f384d><a data-v-537f384d><img src="'+Ct+'" data-v-537f384d></a></div></div><div class="col-lg-6 mb--30" data-v-537f384d><div class="single-poster" data-v-537f384d><a data-v-537f384d><img src="'+Ft+'" data-v-537f384d></a></div></div></div></div></div>',1))],64)}const Rt=U(xt,[["render",Ht],["__scopeId","data-v-537f384d"]]);const Jt={class:"products-section py-5"},Kt={class:"container"},Gt={class:"title section-header d-flex align-items-center mb-4"},Qt={class:"mb-0"},Xt={class:"row justify-content-center g-4"},Yt={class:"product-card card h-100 w-100"},Zt={class:"img-container overflow-hidden bg-light m-2 rounded-circle"},es=["src","alt"],ts={key:0,class:"sale-badge"},ss={class:"card-body"},os={class:"card-title"},as={class:"price-container"},is={key:0,class:"discount-badge"},rs={key:1,class:"price-old"},ns={class:"card-text card-price"},cs={class:"product-actions d-flex justify-content-center flex-wrap gap-2"},ls=["onClick","disabled"],ds=["onClick","title"],_s={__name:"LatestProducts",setup(s){const o=V([]);V(!1),V("");const _=H(),h=R(),{locale:c,t:g}=J(),S=async()=>{try{const n=JSON.parse(localStorage.getItem("selectedCurrency"))||{code:"USD"},f=await O.get("https://backend.webenia.org/api/website/latest/products",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,Currency:n.code}});f.data.status&&f.data.data&&(o.value=f.data.data,await d())}catch(n){console.error("Error fetching products:",n)}},d=async()=>{try{const n=await O.get("https://backend.webenia.org/api/favorites",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});n.data.status&&n.data.data&&_.setFavorites(n.data.data)}catch(n){console.error("Error fetching favorites:",n)}},C=n=>`https://backend.webenia.org/public/storage/${n}`,x=n=>_.favorites.some(f=>f.product_id===n),T=n=>{var f,a;return((f=_.favorites.find(i=>i.product_id===n))==null?void 0:f.favorite_id)||((a=_.favorites.find(i=>i.product_id===n))==null?void 0:a.id)},F=async n=>{var f,a;try{if(x(n.id)){const i=T(n.id);i&&(await _.removeFromFavorites(i),P({title:g("success"),message:g("favorite_removed")||"Product removed from favorites",type:"success"}))}else{const i=await _.addToFavorites(n.id);P({title:g("success"),message:i.message||g("favorite_added")||"Product added to favorites",type:"success"})}}catch(i){console.error("Favorite error:",i),P({title:g("error"),message:((a=(f=i.response)==null?void 0:f.data)==null?void 0:a.message)||g("login_required_favorite")||"Login required to favorite product",type:"error"})}},L=n=>{if(n.discount&&n.discount.is_active){const f=parseFloat(n.discount.discount_value),a=parseFloat(n.converted_price||n.price);return(a-a*(f/100)).toFixed(2)}return n.converted_price||n.price},I=n=>{if(n.discount&&n.discount.is_active){const f=parseFloat(n.discount.discount_value);return Math.round(f)}return 0},E=async n=>{var f,a;try{let i=0;if(n.discount&&n.discount.is_active){const y=parseFloat(n.discount.discount_value),w=parseFloat(n.converted_price||n.price);i=w-w*(y/100)}else i=parseFloat(n.converted_price||n.price);const p={product_id:n.id,quantity:1,price:i};n.amounts&&n.amounts.length>0&&(p.amount_id=n.amounts[0].id);const t=await O.post("https://backend.webenia.org/api/cart-items",p,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json",Accept:"application/json"}});t.data.status?(P({title:g("success"),message:t.data.message,type:"success"}),h.incrementCount(),await h.fetchCartCount()):P({title:g("error"),message:t.data.message,type:"error"})}catch(i){console.error("Error adding to cart:",i),P({title:g("error"),message:(a=(f=i.response)==null?void 0:f.data)==null?void 0:a.message,type:"error"})}};return K(()=>{S(),window.addEventListener("currency-changed",()=>{S()})}),(n,f)=>{const a=$("fa"),i=$("router-link"),p=$("el-col");return l(),v("div",Jt,[e("div",Kt,[e("div",Gt,[m(a,{class:"fa-icon me-2",icon:["fas","shopping-basket"]}),e("h2",Qt,u(n.$t("LatestProducts.LatestProducts")),1)]),e("div",Xt,[(l(!0),v(W,null,z(o.value,t=>(l(),A(p,{key:t.id,xs:24,sm:12,md:8,lg:6,class:"d-flex justify-content-center"},{default:B(()=>[e("div",Yt,[e("div",Zt,[m(i,{to:`/read/products/${t.id}`},{default:B(()=>[t.images.length?(l(),v("img",{key:0,src:C(t.images[0].path),alt:t.name_en,class:"product-img card-img-top"},null,8,es)):k("",!0)]),_:2},1032,["to"]),t.is_available?k("",!0):(l(),v("div",ts,u(n.$t("products.outOfStock")),1))]),e("div",ss,[e("h5",os,u(G(c)==="ar"?t.name_ar:t.name_en),1),e("div",as,[t.discount&&t.discount.is_active?(l(),v("span",is,u(I(t))+"% OFF ",1)):k("",!0),t.discount&&t.discount.is_active?(l(),v("span",rs,u(t.converted_price)+" "+u(t.currency_code),1)):k("",!0),e("span",ns,u(L(t))+" "+u(t.currency_code),1)]),e("div",cs,[m(i,{to:`/read/products/${t.id}`,class:"btn btn-light rounded-circle shadow-sm",title:"View"},{default:B(()=>[m(a,{icon:"eye"})]),_:2},1032,["to"]),e("button",{onClick:y=>E(t),disabled:!t.is_available,class:"btn btn-light shadow-sm"},u(n.$t("home.add-to-cart")),9,ls),e("button",{onClick:y=>F(t),class:j(["btn rounded-circle shadow-sm btn-light",x(t.id)?"text-danger":""]),title:x(t.id)?"Remove from favorites":"Add to favorites"},[m(a,{icon:x(t.id)?"fas fa-heart":"far fa-heart"},null,8,["icon"])],10,ds)])])])]),_:2},1024))),128))])])])}}},us=U(_s,[["__scopeId","data-v-026eee0f"]]);const hs={name:"Loader"},gs={class:"loader-svg-wrapper"};function vs(s,o,_,h,c,g){return l(),v("div",gs,o[0]||(o[0]=[e("div",{class:"loader"},null,-1)]))}const fs=U(hs,[["render",vs],["__scopeId","data-v-417d877b"]]);const ps={name:"VerifyOtp",data(){return{success:"",error:"",showOtpInput:!0,otp:""}},methods:{async handleActiveNow(){this.success="",this.error="",await this.resendOtp(),this.showOtpInput=!0},async resendOtp(){var s,o,_;try{const h=localStorage.getItem("otp_email");if(!h){this.error="No email found. Please login again.";return}const c=await O.post("https://backend.webenia.org/api/resend-otp",{email:h});(s=c.data)!=null&&s.success?this.success=((o=c.data)==null?void 0:o.message)||"OTP resent successfully.":this.error=((_=c.data)==null?void 0:_.message)||"Failed to resend OTP."}catch(h){console.error(h),this.error="Something went wrong. Please try again."}},async verifyOtp(){var h,c,g,S,d,C,x,T,F,L,I,E,n,f,a;this.success="",this.error="",this.otpMessage="";const s=Array.isArray(this.otp)?this.otp.join(""):this.otp,o=s&&/^\d{4}$/.test(s);if(!s||!o){const i=((h=this.$t)==null?void 0:h.call(this,"otp.invalidLength"))||"Please enter a valid 4-digit code";this.otpMessage=i,(g=(c=this.$toast)==null?void 0:c.error)==null||g.call(c,i);return}const _=localStorage.getItem("otp_email");if(!_){const i=((S=this.$t)==null?void 0:S.call(this,"otp.emailMissing"))||"No email found. Please login again.";this.error=i,(C=(d=this.$toast)==null?void 0:d.error)==null||C.call(d,i);return}try{const i=await O.post("https://backend.webenia.org/api/client/verify-otp",{email:_,otp:s});if(i.data.status===!0){const p={...this.user,...i.data.data.user};localStorage.setItem("user",JSON.stringify(p)),localStorage.setItem("auth_token",i.data.data.token),this.success=((x=this.$t)==null?void 0:x.call(this,"otp.success"))||"OTP verified successfully!",this.otpMessage="",window.location.reload()}else{const p=i.data.message||((T=this.$t)==null?void 0:T.call(this,"otp.failed"))||"OTP verification failed.";this.otpMessage=p,(L=(F=this.$toast)==null?void 0:F.error)==null||L.call(F,p)}}catch(i){console.error("OTP verification error:",i);const p=((E=(I=i.response)==null?void 0:I.data)==null?void 0:E.message)||((n=this.$t)==null?void 0:n.call(this,"otp.error"))||"OTP verification failed";this.otpMessage=p,(a=(f=this.$toast)==null?void 0:f.error)==null||a.call(f,p)}}}},ms={class:"modal-overlay d-flex justify-content-center align-items-center"},ys={class:"cart-modal bg-white rounded-4 shadow p-4 position-relative"},bs={class:"cart-content overflow-auto d-flex align-items-center flex-column",style:{"max-height":"70vh"}},$s={class:"w-50 d-flex align-items-center flex-column text-center"},ws={key:0,class:"w-100 d-flex flex-column align-items-center mt-3"},ks={key:1,class:"success-message"},Ss={key:2,class:"error-message"};function Ps(s,o,_,h,c,g){const S=$("fa");return l(),v("div",ms,[e("div",ys,[o[6]||(o[6]=e("div",{class:"mb-4 d-flex justify-content-center align-items-center w-100 logo-container"},[e("img",{src:oe,alt:"Logo"})],-1)),e("button",{class:"close-btn",onClick:o[0]||(o[0]=d=>s.$emit("close"))},"Ã—"),e("div",bs,[e("div",$s,[o[4]||(o[4]=e("p",{class:"text-center mb-4"},"sorry to say",-1)),m(S,{icon:"circle-exclamation",size:"xl",class:"icon mb-2"}),o[5]||(o[5]=e("h5",null,[q("Enter the "),e("span",null,"OTP"),q(" sent in the email to "),e("span",null,"active"),q(" your "),e("span",null,"account")],-1)),e("button",{type:"button",onClick:o[1]||(o[1]=(...d)=>g.handleActiveNow&&g.handleActiveNow(...d)),class:"login-btn btn my-4"},"active now")]),c.showOtpInput?(l(),v("div",ws,[ae(e("input",{"onUpdate:modelValue":o[2]||(o[2]=d=>c.otp=d),type:"text",maxlength:"6",placeholder:"Enter OTP",class:"form-control mb-2",style:{"max-width":"200px","text-align":"center"}},null,512),[[ie,c.otp]]),e("button",{type:"button",onClick:o[3]||(o[3]=(...d)=>g.verifyOtp&&g.verifyOtp(...d)),class:"btn btn-success mb-2"},"Verify OTP")])):k("",!0),c.success?(l(),v("div",ks,u(c.success),1)):k("",!0),c.error?(l(),v("div",Ss,u(c.error),1)):k("",!0)])])])}const X=U(ps,[["render",Ps]]),Cs="/assets/slider1-d6efcb08.png",Fs="/assets/slider2-c32800b9.png",xs="/assets/Slider3-24a08685.png";const Is={name:"Home",components:{Header:re,Categories:we,HomeBrands:Be,LatestProducts:us,Products:tt,BestSelling:$t,WhyChooseUs:Rt,Footer:ne,Loader:fs,VerifyOtp:X,VerifyOtpPopup:X},computed:{showVerifyOtp(){return this.user&&!this.user.is_verified},direction(){return ce.global.locale==="ar"?"rtl":"ltr"}},data(){return{showBrand:!1,showOurProducts:!1,showLatestProducts:!1,showBestSelling:!1,loading:!0,user:null,token:null,showVerifyOtpPopup:!1}},mounted(){this.fetchSettings(),localStorage.getItem("showVerifyOtpPopup")==="true"&&(this.showVerifyOtpPopup=!0,localStorage.removeItem("showVerifyOtpPopup"))},methods:{async fetchSettings(){try{const _=(await(await fetch("https://backend.webenia.org/api/settings")).json()).data,h=c=>{const g=_.find(S=>S.key===c);return g&&g.value==="1"};this.showBrand=h("show_brand"),this.showOurProducts=h("show_our_products"),this.showLatestProducts=h("show_latest_products"),this.showBestSelling=h("show_best_selling_products")}catch(s){console.error("Failed to fetch settings:",s)}finally{setTimeout(()=>{this.loading=!1},3e3)}},scrollLeft(){const s=window.innerWidth,_=this.$refs.slider.querySelector(".card").offsetWidth;s<=440?this.$refs.slider.scrollBy({left:-(_*2+26),behavior:"smooth"}):s<=768?this.$refs.slider.scrollBy({left:-(_*3+50),behavior:"smooth"}):s<=1200?this.$refs.slider.scrollBy({left:-(_*4+50),behavior:"smooth"}):this.$refs.slider.scrollBy({left:-(_*7+30),behavior:"smooth"})},scrollRight(){const s=window.innerWidth,_=this.$refs.slider.querySelector(".card").offsetWidth;s<=440?this.$refs.slider.scrollBy({left:_*2+26,behavior:"smooth"}):s<=768?this.$refs.slider.scrollBy({left:_*3+50,behavior:"smooth"}):s<=1200?this.$refs.slider.scrollBy({left:_*4+50,behavior:"smooth"}):this.$refs.slider.scrollBy({left:_*7+30,behavior:"smooth"})}},created(){const s=localStorage.getItem("auth_user"),o=localStorage.getItem("token");s&&(this.user=JSON.parse(s)),o&&(this.token=o)}},Os={class:"home"};function Bs(s,o,_,h,c,g){const S=$("Loader"),d=$("Header"),C=$("VerifyOtp"),x=$("verify-otp-popup"),T=$("Categories"),F=$("HomeBrands"),L=$("Products"),I=$("LatestProducts"),E=$("BestSelling"),n=$("WhyChooseUs"),f=$("Footer");return l(),v("div",Os,[c.loading?(l(),A(S,{key:0})):k("",!0),m(d),g.showVerifyOtp?(l(),A(C,{key:1,user:c.user,token:c.token},null,8,["user","token"])):k("",!0),c.showVerifyOtpPopup?(l(),A(x,{key:2,onClose:o[0]||(o[0]=a=>c.showVerifyOtpPopup=!1)})):k("",!0),o[1]||(o[1]=Y('<section class="hero-section" data-v-d44e6281><div id="carouselExample" class="carousel slide" data-v-d44e6281><div class="carousel-inner" data-v-d44e6281><div class="carousel-item active" data-v-d44e6281><img src="'+Cs+'" class="d-block w-100" alt="..." data-v-d44e6281></div><div class="carousel-item" data-v-d44e6281><img src="'+Fs+'" class="d-block w-100" alt="..." data-v-d44e6281></div><div class="carousel-item" data-v-d44e6281><img src="'+xs+'" class="d-block w-100" alt="..." data-v-d44e6281></div></div><button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev" data-v-d44e6281><span class="carousel-control-prev-icon" aria-hidden="true" data-v-d44e6281></span><span class="visually-hidden" data-v-d44e6281>Previous</span></button><button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next" data-v-d44e6281><span class="carousel-control-next-icon" aria-hidden="true" data-v-d44e6281></span><span class="visually-hidden" data-v-d44e6281>Next</span></button></div></section>',1)),m(T),c.showBrand?(l(),A(F,{key:3})):k("",!0),c.showOurProducts?(l(),A(L,{key:4})):k("",!0),c.showLatestProducts?(l(),A(I,{key:5})):k("",!0),c.showBestSelling?(l(),A(E,{key:6})):k("",!0),m(n),m(f)])}const Ls=U(Is,[["render",Bs],["__scopeId","data-v-d44e6281"]]);export{Ls as default};
