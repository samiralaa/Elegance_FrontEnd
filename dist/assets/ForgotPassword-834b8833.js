import{_,b as p,r as u,o as d,c as m,a as o,t as i,g as w,w as v,v as b,n as P,f as y,e as k,m as D,l as $}from"./index-01aaf835.js";import{_ as E}from"./perfume-banner-e9b7c37b.js";const S="http://elegance_backend.test/api",M={name:"ForgotPassword",data(){return{formData:{email:""},errors:{email:""},loading:!1}},methods:{validateEmail(s){s?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)?this.errors.email="":this.errors.email=this.$t("forgotPassword.validation.emailInvalid"):this.errors.email=this.$t("forgotPassword.validation.emailRequired")},async handleSubmit(){var s,t,c,h,e,l,n,a;if(this.validateEmail(this.formData.email),!this.errors.email)try{this.loading=!0;const r=await p.post(`${S}/forgot-password`,{email:this.formData.email});if(r.data.status==="success")(t=(s=this.$toast)==null?void 0:s.success)==null||t.call(s,r.data.message||this.$t("forgotPassword.successMessage")),localStorage.setItem("otp_email",this.formData.email),this.$router.push("/verify-otp");else throw new Error(r.data.message||this.$t("forgotPassword.errorMessage"))}catch(r){if(console.error("Forgot password error:",r),(h=(c=r.response)==null?void 0:c.data)!=null&&h.errors){const g=r.response.data.errors;Object.keys(g).forEach(f=>{this.errors.hasOwnProperty(f)&&(this.errors[f]=g[f][0])})}else(a=(e=this.$toast)==null?void 0:e.error)==null||a.call(e,((n=(l=r.response)==null?void 0:l.data)==null?void 0:n.message)||this.$t("forgotPassword.errorMessage"))}finally{this.loading=!1}}},watch:{"formData.email"(s){this.validateEmail(s)}}},V={class:"join-us-container"},j={class:"join-us-content"},x={class:"form-header"},C={class:"elegant-title"},F={class:"elegant-description"},I={class:"form-group"},N={for:"email"},R=["placeholder"],B={key:0,class:"error-message"},q=["disabled"],O={key:0},T={key:1,class:"loading-spinner"},U={class:"register-section"};function z(s,t,c,h,e,l){const n=u("router-link");return d(),m("div",V,[t[2]||(t[2]=o("div",{class:"banner-section"},[o("img",{src:E,alt:"Elegance Perfume",class:"banner-image"})],-1)),o("div",j,[o("div",x,[o("h1",C,i(s.$t("forgotPassword.title")),1),o("p",F,i(s.$t("forgotPassword.description")),1)]),o("form",{onSubmit:t[1]||(t[1]=w((...a)=>l.handleSubmit&&l.handleSubmit(...a),["prevent"])),class:"join-form"},[o("div",I,[o("label",N,i(s.$t("forgotPassword.email")),1),v(o("input",{type:"email",id:"email","onUpdate:modelValue":t[0]||(t[0]=a=>e.formData.email=a),placeholder:s.$t("forgotPassword.emailPlaceholder"),class:P({error:e.errors.email,valid:e.formData.email&&!e.errors.email}),required:""},null,10,R),[[b,e.formData.email]]),e.errors.email?(d(),m("span",B,i(e.errors.email),1)):y("",!0)]),o("button",{type:"submit",class:"submit-btn",disabled:e.loading},[e.loading?(d(),m("span",T)):(d(),m("span",O,i(s.$t("forgotPassword.submit")),1))],8,q),o("div",U,[o("p",null,[k(n,{to:"account/login",class:"link"},{default:D(()=>[$(i(s.$t("forgotPassword.loginHere")),1)]),_:1})])])],32)])])}const L=_(M,[["render",z],["__scopeId","data-v-0a5fc9e1"]]);export{L as default};
