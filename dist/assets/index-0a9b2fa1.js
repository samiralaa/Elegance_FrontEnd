import{_ as k,x as m,D as B,r as n,V as U,o as f,c as A,a as w,e as a,m as o,b as i,l as c,w as D,i as E,a5 as N}from"./index-943297ff.js";const C={class:"units-container"},$={class:"header"},V="https://backend.webenia.org",z={__name:"index",setup(F){const d=m([]),s=m(!1),u=`${V}/api/units`,_=async()=>{s.value=!0;try{const t=JSON.parse(localStorage.getItem("tokenData"));if(!t||!t.token)throw new Error("Authentication token not found");i.defaults.headers.common.Authorization=`Bearer ${t.token}`;const e=await i.get(u);if(e.data.status)d.value=e.data.data;else throw new Error(e.data.message||"Failed to fetch units")}catch(t){console.error("Fetch units error:",t)}finally{s.value=!1}};B(()=>{_()});const g=t=>{console.log("Update unit:",t)},v=async t=>{try{await N.confirm("Are you sure you want to delete this unit?","Warning",{confirmButtonText:"Yes",cancelButtonText:"No",type:"warning"});const e=await i.delete(`${u}/${t.id}`);if(e.data.status)console.log("Unit deleted successfully"),_();else throw new Error(e.data.message||"Failed to delete unit")}catch(e){console.error("Delete unit error:",e)}};return(t,e)=>{const l=n("el-button"),r=n("el-table-column"),h=n("el-table"),x=n("el-card"),y=U("loading");return f(),A("div",C,[w("div",$,[e[1]||(e[1]=w("h2",null,"Units List",-1)),a(l,{type:"primary",to:"/units/create",tag:"router-link"},{default:o(()=>e[0]||(e[0]=[c("Add Unit")])),_:1,__:[0]})]),a(x,{class:"units-table"},{default:o(()=>[D((f(),E(h,{data:d.value,style:{width:"100%"}},{default:o(()=>[a(r,{prop:"name_ar",label:"Name (Arabic)"}),a(r,{prop:"name_en",label:"Name (English)"}),a(r,{label:"Actions"},{default:o(p=>[a(l,{type:"text",size:"small",onClick:b=>g(p.row)},{default:o(()=>e[2]||(e[2]=[c("Update")])),_:2,__:[2]},1032,["onClick"]),a(l,{type:"text",size:"small",onClick:b=>v(p.row)},{default:o(()=>e[3]||(e[3]=[c("Delete")])),_:2,__:[3]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[y,s.value]])]),_:1})])}}},L=k(z,[["__scopeId","data-v-1c4ac316"]]);export{L as default};
