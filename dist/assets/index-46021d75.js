import{_ as E,J as x,u as f,z as D,r as l,a2 as F,o as w,c as N,a as y,t as s,e as a,l as n,b as u,U as _,m as c,g as z,j as I,a1 as R}from"./index-23e6863a.js";const S={class:"currencies-container"},U={class:"header"},M="http://elegance_backend.test",T={__name:"index",setup(V){const g=x(),m=f([]),i=f(!1),p=`${M}/api/currencies`,h=async()=>{i.value=!0;try{const e=JSON.parse(localStorage.getItem("tokenData"));if(!e||!e.token)throw new Error("Authentication token not found");u.defaults.headers.common.Authorization=`Bearer ${e.token}`;const t=await u.get(p);if(t.data&&Array.isArray(t.data))m.value=t.data;else throw new Error("Invalid response format")}catch(e){console.error("Fetch currencies error:",e),_.error(e.message||"Failed to fetch currencies")}finally{i.value=!1}};D(()=>{h()});const b=e=>{g.push({name:"currencies.edit",params:{id:e.id}})},v=async e=>{try{await R.confirm("Are you sure you want to delete this currency?","Warning",{confirmButtonText:"Yes",cancelButtonText:"No",type:"warning"});const t=await u.delete(`${p}/${e.id}`);if(t.data.status)_.success("Currency deleted successfully"),await h();else throw new Error(t.data.message||"Failed to delete currency")}catch(t){t!=="cancel"&&(console.error("Delete currency error:",t),_.error(t.message||"Failed to delete currency"))}};return(e,t)=>{const d=l("el-button"),o=l("el-table-column"),$=l("el-tag"),k=l("el-table"),B=l("el-card"),A=F("loading");return w(),N("div",S,[y("div",U,[y("h2",null,s(e.$t("currencies.title")),1),a(d,{type:"primary",to:"/currencies/create",tag:"router-link"},{default:n(()=>[c(s(e.$t("currencies.addNew")),1)]),_:1})]),a(B,{class:"currencies-table"},{default:n(()=>[z((w(),I(k,{data:m.value,style:{width:"100%"}},{default:n(()=>[a(o,{prop:"name_ar",label:e.$t("currencies.nameAr"),"min-width":"150"},null,8,["label"]),a(o,{prop:"name_en",label:e.$t("currencies.nameEn"),"min-width":"150"},null,8,["label"]),a(o,{prop:"exchange_rate",label:e.$t("currencies.exchangeRate"),"min-width":"120"},{default:n(r=>[c(s(parseFloat(r.row.exchange_rate).toFixed(2)),1)]),_:1},8,["label"]),a(o,{label:e.$t("currencies.status"),"min-width":"100"},{default:n(r=>[a($,{type:r.row.is_deleted?"danger":"success",size:"small"},{default:n(()=>[c(s(r.row.is_deleted?e.$t("currencies.deleted"):e.$t("currencies.active")),1)]),_:2},1032,["type"])]),_:1},8,["label"]),a(o,{label:e.$t("common.actions"),"min-width":"150",fixed:"right"},{default:n(r=>[a(d,{type:"primary",size:"small",onClick:C=>b(r.row),disabled:r.row.is_deleted},{default:n(()=>[c(s(e.$t("common.edit")),1)]),_:2},1032,["onClick","disabled"]),a(d,{type:"danger",size:"small",onClick:C=>v(r.row),disabled:r.row.is_deleted},{default:n(()=>[c(s(e.$t("common.delete")),1)]),_:2},1032,["onClick","disabled"])]),_:1},8,["label"])]),_:1},8,["data"])),[[A,i.value]])]),_:1})])}}},L=E(T,[["__scopeId","data-v-a9387642"]]);export{L as default};
