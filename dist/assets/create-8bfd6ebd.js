import{_ as G,C as H,x as i,L as K,D as Q,r as c,o as d,c as f,e as a,m as o,b as _,W as w,a as C,t as U,i as g,f as F,F as b,l as A,d as P}from"./index-bdf199cb.js";const X={class:"product-create-container"},Z={class:"el-upload__text"},y="https://backend.webenia.org",x={__name:"create",setup(ee){const B=H(),h=i(null),r=i({name_en:"",name_ar:"",price:"",is_available:1,description_en:"",description_ar:"",category_id:null,currency_id:null,country_id:null,parent_id:null}),p=i({unit_id:null,weight:null,price:null}),V=i(!1),$=i([]),S=i([]),N=i([]),D=i([]),R=i([]),E=i([]),q={name_en:[{required:!0,message:"Please input product name (EN)",trigger:"blur"}],price:[{required:!0,message:"Please input product price",trigger:"blur"}],category_id:[{required:!0,message:"Please select a category",trigger:"change"}],currency_id:[{required:!0,message:"Please select a currency",trigger:"change"}],country_id:[{required:!0,message:"Please select a country",trigger:"change"}]},I=async()=>{var t,e;try{const n=JSON.parse(localStorage.getItem("tokenData"));_.defaults.headers.common.Authorization=`Bearer ${n.token}`;const[u,s,k,m,v]=await Promise.all([_.get(`${y}/api/categories`),_.get(`${y}/api/currencies`),_.get(`${y}/api/countries`),_.get(`${y}/api/products`),_.get(`${y}/api/units`)]);S.value=u.data.data||[],N.value=s.data||[],D.value=k.data.data||[],R.value=m.data.data||[],E.value=v.data.data||[]}catch(n){w.error(((e=(t=n.response)==null?void 0:t.data)==null?void 0:e.message)||"Failed to load form options")}},L=K(()=>N.value.filter(t=>!t.is_deleted)),O=t=>(localStorage.getItem("lang")||"en")==="ar"?t.name_ar:t.name_en,z=(t,e)=>$.value=e,J=(t,e)=>$.value=e,M=()=>{h.value.validate(async t=>{if(t)try{const e=new FormData;for(const s in r.value)r.value[s]!==null&&e.append(s,r.value[s]);$.value.forEach(s=>e.append("images[]",s.raw)),V.value&&(e.append("unit_id",p.value.unit_id),e.append("weight",p.value.weight),e.append("price",p.value.price));const n=JSON.parse(localStorage.getItem("tokenData"));_.defaults.headers.common.Authorization=`Bearer ${n.token}`;const u=await _.post(`${y}/api/products`,e,{headers:{"Content-Type":"multipart/form-data"}});if(u.data.status)w.success("Product created successfully"),B.push("/products");else throw new Error(u.data.message||"Failed to create product")}catch(e){w.error(e.message||"Failed to create product")}})};return Q(I),(t,e)=>{const n=c("el-input"),u=c("el-form-item"),s=c("el-switch"),k=c("el-divider"),m=c("el-option"),v=c("el-select"),T=c("el-upload"),W=c("el-button"),Y=c("el-form"),j=c("el-card");return d(),f("div",X,[a(j,{class:"product-card"},{default:o(()=>[C("h2",null,U(t.$t("Products.CreateProduct")),1),a(Y,{model:r.value,ref_key:"formRef",ref:h,rules:q,"label-width":"120px",enctype:"multipart/form-data"},{default:o(()=>[a(u,{label:t.$t("Products.NameEn"),prop:"name_en"},{default:o(()=>[a(n,{modelValue:r.value.name_en,"onUpdate:modelValue":e[0]||(e[0]=l=>r.value.name_en=l)},null,8,["modelValue"])]),_:1},8,["label"]),a(u,{label:t.$t("Products.NameAr"),prop:"name_ar"},{default:o(()=>[a(n,{modelValue:r.value.name_ar,"onUpdate:modelValue":e[1]||(e[1]=l=>r.value.name_ar=l)},null,8,["modelValue"])]),_:1},8,["label"]),V.value?F("",!0):(d(),g(u,{key:0,label:t.$t("Products.Price"),prop:"price"},{default:o(()=>[a(n,{modelValue:r.value.price,"onUpdate:modelValue":e[2]||(e[2]=l=>r.value.price=l),type:"number"},null,8,["modelValue"])]),_:1},8,["label"])),a(u,{label:"Needs Amount?"},{default:o(()=>[a(s,{modelValue:V.value,"onUpdate:modelValue":e[3]||(e[3]=l=>V.value=l),"active-text":"Yes","inactive-text":"No"},null,8,["modelValue"])]),_:1}),V.value?(d(),f(b,{key:1},[a(k,{"content-position":"left"},{default:o(()=>e[14]||(e[14]=[A("Amount Info")])),_:1,__:[14]}),a(u,{label:"Unit"},{default:o(()=>[a(v,{modelValue:p.value.unit_id,"onUpdate:modelValue":e[4]||(e[4]=l=>p.value.unit_id=l),placeholder:"Select Unit"},{default:o(()=>[(d(!0),f(b,null,P(E.value,l=>(d(),g(m,{key:l.id,label:l.name_en,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(u,{label:"Weight"},{default:o(()=>[a(n,{modelValue:p.value.weight,"onUpdate:modelValue":e[5]||(e[5]=l=>p.value.weight=l),type:"number",placeholder:"Enter weight"},null,8,["modelValue"])]),_:1}),a(u,{label:"Price"},{default:o(()=>[a(n,{modelValue:p.value.price,"onUpdate:modelValue":e[6]||(e[6]=l=>p.value.price=l),type:"number",placeholder:"Enter price"},null,8,["modelValue"])]),_:1})],64)):F("",!0),a(u,{label:t.$t("Products.Availability"),prop:"is_available"},{default:o(()=>[a(s,{modelValue:r.value.is_available,"onUpdate:modelValue":e[7]||(e[7]=l=>r.value.is_available=l),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])]),_:1},8,["label"]),a(u,{label:t.$t("Products.DescriptionEn"),prop:"description_en"},{default:o(()=>[a(n,{type:"textarea",modelValue:r.value.description_en,"onUpdate:modelValue":e[8]||(e[8]=l=>r.value.description_en=l)},null,8,["modelValue"])]),_:1},8,["label"]),a(u,{label:t.$t("Products.DescriptionAr"),prop:"description_ar"},{default:o(()=>[a(n,{type:"textarea",modelValue:r.value.description_ar,"onUpdate:modelValue":e[9]||(e[9]=l=>r.value.description_ar=l)},null,8,["modelValue"])]),_:1},8,["label"]),a(u,{label:t.$t("Products.Category"),prop:"category_id"},{default:o(()=>[a(v,{modelValue:r.value.category_id,"onUpdate:modelValue":e[10]||(e[10]=l=>r.value.category_id=l),placeholder:t.$t("Products.SelectCategory"),filterable:"",clearable:""},{default:o(()=>[(d(!0),f(b,null,P(S.value,l=>(d(),g(m,{key:l.id,label:l.name_en||l.name_ar,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),a(u,{label:t.$t("Products.Currency"),prop:"currency_id"},{default:o(()=>[a(v,{modelValue:r.value.currency_id,"onUpdate:modelValue":e[11]||(e[11]=l=>r.value.currency_id=l),placeholder:t.$t("Products.SelectCurrency"),filterable:"",clearable:""},{default:o(()=>[(d(!0),f(b,null,P(L.value,l=>(d(),g(m,{key:l.id,label:O(l),value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),a(u,{label:t.$t("Products.Country"),prop:"country_id"},{default:o(()=>[a(v,{modelValue:r.value.country_id,"onUpdate:modelValue":e[12]||(e[12]=l=>r.value.country_id=l),placeholder:t.$t("Products.SelectCountry"),filterable:"",clearable:""},{default:o(()=>[(d(!0),f(b,null,P(D.value,l=>(d(),g(m,{key:l.id,label:l.name_en||l.name_ar,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),a(u,{label:t.$t("Products.ParentProduct"),prop:"parent_id"},{default:o(()=>[a(v,{modelValue:r.value.parent_id,"onUpdate:modelValue":e[13]||(e[13]=l=>r.value.parent_id=l),placeholder:t.$t("Products.SelectParentProduct"),clearable:""},{default:o(()=>[a(m,{label:t.$t("Products.None"),value:null},null,8,["label"]),(d(!0),f(b,null,P(R.value,l=>(d(),g(m,{key:l.id,label:l.name_en,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),a(u,{label:t.$t("Products.Images"),prop:"images"},{default:o(()=>[a(T,{class:"upload-demo",drag:"",action:"","auto-upload":!1,limit:5,"file-list":$.value,"list-type":"picture","on-change":z,"on-remove":J},{default:o(()=>[e[15]||(e[15]=C("i",{class:"el-icon-upload"},null,-1)),C("div",Z,U(t.$t("Products.DropFiles")),1)]),_:1,__:[15]},8,["file-list"])]),_:1},8,["label"]),a(u,null,{default:o(()=>[a(W,{type:"primary",onClick:M},{default:o(()=>[A(U(t.$t("Products.CreateButton")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}},ae=G(x,[["__scopeId","data-v-6cccd555"]]);export{ae as default};
