import{_ as u,H as f,b as m,o as i,c as l,a as s,t as a,g,w,p as h,f as n,m as c}from"./index-9d1791a5.js";const k={components:{Header:f},data(){return{email:"",password:"",password_confirmation:"",loading:!1,error:null,success:null,showPassword:!1,showConfirmPassword:!1}},mounted(){const r=localStorage.getItem("user");if(r)try{const o=JSON.parse(r);this.email=o.email||""}catch{this.email=localStorage.getItem("user_email")||""}else this.email=localStorage.getItem("user_email")||""},methods:{async resetPassword(){var r,o;if(this.error=null,this.success=null,this.password!==this.password_confirmation){this.error=this.$t("profile.passwordsDoNotMatch");return}if(this.password.length<8){this.error=this.$t("profile.passwordTooShort");return}if(!this.email){this.error="Email is required.";return}this.loading=!0;try{await m.post("api/reset-password",{email:this.email,password:this.password,password_confirmation:this.password_confirmation}),this.success=this.$t("profile.passwordResetSuccess"),this.password="",this.password_confirmation="",setTimeout(()=>{this.goBackToProfile()},2e3)}catch(p){this.token="",this.error=((o=(r=p.response)==null?void 0:r.data)==null?void 0:o.message)||this.$t("profile.passwordResetFailed")}finally{this.loading=!1}},goBackToProfile(){this.$router.push({name:"Profile"})}}},_={class:"reset-password-outer"},P={class:"reset-password-card"},v={class:"reset-password-header"},y={class:"form-group password-group"},b={for:"password"},M={class:"password-input-wrapper"},B=["type","placeholder"],C={key:0,width:"20",height:"20",fill:"none",viewBox:"0 0 24 24"},S={key:1,width:"20",height:"20",fill:"none",viewBox:"0 0 24 24"},x={class:"form-group password-group"},T={for:"password_confirmation"},D={class:"password-input-wrapper"},N=["type","placeholder"],V={key:0,width:"20",height:"20",fill:"none",viewBox:"0 0 24 24"},A={key:1,width:"20",height:"20",fill:"none",viewBox:"0 0 24 24"},I=["disabled"],R={key:0,class:"loader-small"},q={key:0,class:"error-message"},H={key:1,class:"success-message"},j={class:"back-to-profile"};function z(r,o,p,E,e,d){return i(),l("div",_,[s("div",P,[s("div",v,[s("h2",null,a(r.$t("profile.resetPassword")),1),s("p",null,a(r.$t("profile.resetPasswordDesc")),1)]),s("form",{onSubmit:o[4]||(o[4]=g((...t)=>d.resetPassword&&d.resetPassword(...t),["prevent"])),class:"reset-password-form"},[s("div",y,[s("label",b,a(r.$t("profile.newPassword")),1),s("div",M,[w(s("input",{type:e.showPassword?"text":"password","onUpdate:modelValue":o[0]||(o[0]=t=>e.password=t),id:"password",required:"",placeholder:r.$t("profile.newPasswordPlaceholder")},null,8,B),[[h,e.password]]),s("button",{type:"button",class:"toggle-password",onClick:o[1]||(o[1]=t=>e.showPassword=!e.showPassword),tabindex:"-1"},[e.showPassword?(i(),l("svg",C,o[6]||(o[6]=[s("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z",stroke:"#667eea","stroke-width":"2"},null,-1),s("circle",{cx:"12",cy:"12",r:"3",stroke:"#667eea","stroke-width":"2"},null,-1)]))):(i(),l("svg",S,o[7]||(o[7]=[s("path",{d:"M17.94 17.94A10.94 10.94 0 0112 19c-7 0-11-7-11-7a21.77 21.77 0 015.06-6.06M9.88 9.88A3 3 0 0112 9c1.66 0 3 1.34 3 3 0 .52-.13 1.01-.35 1.43",stroke:"#667eea","stroke-width":"2"},null,-1),s("path",{d:"M1 1l22 22",stroke:"#667eea","stroke-width":"2"},null,-1)])))])])]),s("div",x,[s("label",T,a(r.$t("profile.confirmPassword")),1),s("div",D,[w(s("input",{type:e.showConfirmPassword?"text":"password","onUpdate:modelValue":o[2]||(o[2]=t=>e.password_confirmation=t),id:"password_confirmation",required:"",placeholder:r.$t("profile.confirmPasswordPlaceholder")},null,8,N),[[h,e.password_confirmation]]),s("button",{type:"button",class:"toggle-password",onClick:o[3]||(o[3]=t=>e.showConfirmPassword=!e.showConfirmPassword),tabindex:"-1"},[e.showConfirmPassword?(i(),l("svg",V,o[8]||(o[8]=[s("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z",stroke:"#667eea","stroke-width":"2"},null,-1),s("circle",{cx:"12",cy:"12",r:"3",stroke:"#667eea","stroke-width":"2"},null,-1)]))):(i(),l("svg",A,o[9]||(o[9]=[s("path",{d:"M17.94 17.94A10.94 10.94 0 0112 19c-7 0-11-7-11-7a21.77 21.77 0 015.06-6.06M9.88 9.88A3 3 0 0112 9c1.66 0 3 1.34 3 3 0 .52-.13 1.01-.35 1.43",stroke:"#667eea","stroke-width":"2"},null,-1),s("path",{d:"M1 1l22 22",stroke:"#667eea","stroke-width":"2"},null,-1)])))])])]),s("button",{type:"submit",disabled:e.loading,class:"submit-btn"},[e.loading?(i(),l("span",R)):n("",!0),c(" "+a(e.loading?r.$t("profile.loading"):r.$t("profile.submit")),1)],8,I),e.error?(i(),l("div",q,a(e.error),1)):n("",!0),e.success?(i(),l("div",H,a(e.success),1)):n("",!0)],32),s("div",j,[s("button",{onClick:o[5]||(o[5]=(...t)=>d.goBackToProfile&&d.goBackToProfile(...t)),class:"back-btn"},[o[10]||(o[10]=s("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 24 24"},[s("path",{d:"M19 12H5M12 19l-7-7 7-7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),c(" "+a(r.$t("profile.backToProfile")),1)])])])])}const U=u(k,[["render",z],["__scopeId","data-v-c4a18724"]]);export{U as default};
