import{_ as V,D as k,y as i,r as u,o as w,c as E,e as t,p as l,a as $,t as _,m as D,b as p,V as m}from"./index-734559de.js";const R={class:"currency-create-container"},A="https://backend.webenia.org",B={__name:"create",setup(C){const f=k(),c=localStorage.getItem("lang")||"en",d=i(null),a=i({name_en:"",name_ar:"",exchange_rate:""}),g={name_en:[{required:!0,message:c==="en"?"Please input currency name (EN)":"من فضلك ادخل سعر العملة بالانجليزي",trigger:"blur"}],name_ar:[{required:!0,message:c==="en"?"Please input currency name (AR)":"من فضلك ادخل سعر العملة بالعربي",trigger:"blur"}],exchange_rate:[{required:!0,message:c==="en"?"Please input exchange rate":"من فضلك ادخل سعر الصرف",trigger:"blur"},{pattern:/^\d+(\.\d{1,2})?$/,message:c==="en"?"Exchange rate must be a valid number":"سعر الصرف يجب ان يكون رقم صحيح",trigger:"blur"}]},b=`${A}/api/currencies`,y=()=>{d.value.validate(async o=>{if(o)try{const e=new FormData;e.append("name_en",a.value.name_en),e.append("name_ar",a.value.name_ar),e.append("exchange_rate",a.value.exchange_rate);const r=JSON.parse(localStorage.getItem("tokenData"));if(!r||!r.token)throw new Error("Authentication token not found");p.defaults.headers.common.Authorization=`Bearer ${r.token}`;const n=await p.post(b,e,{headers:{"Content-Type":"multipart/form-data"}});if(n.data.status)m.success("Currency created successfully"),f.push("/currencies");else throw new Error(n.data.message||"Failed to create currency")}catch(e){if(e.response&&e.response.status===422){const r=e.response.data.errors;for(const n in r)m.error(r[n][0])}else m.error(e.message||"Failed to create currency")}else return!1})};return(o,e)=>{const r=u("el-input"),n=u("el-form-item"),v=u("el-button"),h=u("el-form"),x=u("el-card");return w(),E("div",R,[t(x,{class:"currency-card"},{default:l(()=>[$("h2",null,_(o.$t("input.currencies.add-currency")),1),t(h,{model:a.value,ref_key:"formRef",ref:d,rules:g,"label-width":"120px"},{default:l(()=>[t(n,{label:o.$t("input.currencies.name-en"),prop:"name_en"},{default:l(()=>[t(r,{modelValue:a.value.name_en,"onUpdate:modelValue":e[0]||(e[0]=s=>a.value.name_en=s)},null,8,["modelValue"])]),_:1},8,["label"]),t(n,{label:o.$t("input.currencies.name-ar"),prop:"name_ar"},{default:l(()=>[t(r,{modelValue:a.value.name_ar,"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.name_ar=s)},null,8,["modelValue"])]),_:1},8,["label"]),t(n,{label:o.$t("input.currencies.exchangeRate"),prop:"exchange_rate"},{default:l(()=>[t(r,{modelValue:a.value.exchange_rate,"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.exchange_rate=s)},null,8,["modelValue"])]),_:1},8,["label"]),t(n,null,{default:l(()=>[t(v,{type:"primary",onClick:y},{default:l(()=>[D(_(o.$t("input.currencies.create")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}},S=V(B,[["__scopeId","data-v-44b55c05"]]);export{S as default};
