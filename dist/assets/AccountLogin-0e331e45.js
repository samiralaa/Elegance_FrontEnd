import{_,b as f,r as w,o as c,c as u,a as s,t as i,g as v,f as b,w as p,v as k,m as y,e as g,p as h,l as m}from"./index-96ee7cbc.js";import{_ as U}from"./perfume-banner-e9b7c37b.js";const j={name:"JoinUs",data(){return{formData:{email:"",password:""},showPassword:!1,errorMessage:""}},methods:{async handleSubmit(){var e,o,l,d,a,n;try{const t=await f.post("https://backend.webenia.org/api/login",this.formData);if(t.data.is_verified===!1){localStorage.setItem("otp_email",this.formData.email),localStorage.setItem("showVerifyOtpPopup","true"),this.$router.push("/");return}if(t.data.token&&t.data.user){const r={token:t.data.token,user:t.data.user};localStorage.setItem("auth_token",r.token),localStorage.setItem("auth_user",JSON.stringify(r.user)),this.$store.commit("auth/SET_AUTH",r),await this.$store.dispatch("cart/loadCart"),this.$router.push("/"),this.errorMessage=""}else this.errorMessage=t.data.message||"Login failed."}catch(t){this.errorMessage=((o=(e=t.response)==null?void 0:e.data)==null?void 0:o.message)||((n=(a=(d=(l=t.response)==null?void 0:l.data)==null?void 0:d.errors)==null?void 0:a.email)==null?void 0:n[0])||t.message||"Login failed."}},togglePassword(){this.showPassword=!this.showPassword}}},P={class:"join-us-container"},D={class:"join-us-content"},S={class:"form-header"},M={class:"elegant-title"},V={class:"elegant-description"},$={key:0,class:"error-message"},C={class:"form-group"},I={for:"email"},N={class:"form-group"},L={for:"password"},T={class:"password-input-container"},A=["type"],B={class:"form-links"},E={type:"submit",class:"submit-btn"},q={class:"register-section"};function H(e,o,l,d,a,n){const t=w("router-link");return c(),u("div",P,[o[4]||(o[4]=s("div",{class:"banner-section"},[s("img",{src:U,alt:"Elegance Perfume",class:"banner-image"})],-1)),s("div",D,[s("div",S,[s("h1",M,i(e.$t("joinUs.title")),1),s("p",V,i(e.$t("joinUs.description")),1)]),s("form",{onSubmit:o[3]||(o[3]=v((...r)=>n.handleSubmit&&n.handleSubmit(...r),["prevent"])),class:"join-form"},[a.errorMessage?(c(),u("div",$,i(a.errorMessage),1)):b("",!0),s("div",C,[s("label",I,i(e.$t("joinUs.email")),1),p(s("input",{type:"email",id:"email","onUpdate:modelValue":o[0]||(o[0]=r=>a.formData.email=r),required:""},null,512),[[k,a.formData.email]])]),s("div",N,[s("label",L,i(e.$t("joinUs.password")),1),s("div",T,[p(s("input",{type:a.showPassword?"text":"password",id:"password","onUpdate:modelValue":o[1]||(o[1]=r=>a.formData.password=r),required:""},null,8,A),[[y,a.formData.password]]),s("button",{type:"button",class:"show-password-btn",onClick:o[2]||(o[2]=(...r)=>n.togglePassword&&n.togglePassword(...r))},i(a.showPassword?e.$t("joinUs.hidePassword"):e.$t("joinUs.showPassword")),1)])]),s("div",B,[g(t,{to:"/forgot-password",class:"link"},{default:h(()=>[m(i(e.$t("joinUs.forgotPassword")),1)]),_:1})]),s("button",E,i(e.$t("joinUs.login")),1),s("div",q,[s("p",null,[m(i(e.$t("joinUs.notMember"))+" ",1),g(t,{to:"/register",class:"link"},{default:h(()=>[m(i(e.$t("joinUs.registerHere")),1)]),_:1})])])],32)])])}const z=_(j,[["render",H],["__scopeId","data-v-daff7e34"]]);export{z as default};
