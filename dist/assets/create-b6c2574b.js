import{_ as X,C as Z,D as x,y as p,L as ee,E as le,r as c,o as i,c as b,e as t,p as r,b as m,W as S,a as N,t as k,F as f,m as C,d as $,k as V,f as I}from"./index-3d2ca9dc.js";const ae={class:"product-create-container"},te={class:"el-upload__text"},h="https://backend.webenia.org",re={__name:"create",setup(oe){const{t:y}=Z(),G=x(),q=p(null),o=p({name_en:"",name_ar:"",price:"",is_available:1,description_en:"",description_ar:"",category_id:null,currency_id:null,country_id:null,parent_id:null,brand_id:null}),n=p({unit_id:null,weight:null,price:null}),P=localStorage.getItem("lang")||"en",_=p(!1),U=p([]),A=p([]),B=p([]),D=p([]),E=p([]),R=p([]),F=p([]),L={name_en:[{required:!0,message:y("Validation.ProductNameEn"),trigger:"blur"}],price:[{required:!0,message:y("Validation.ProductPrice"),trigger:"blur"}],category_id:[{required:!0,message:y("Validation.SelectCategory"),trigger:"change"}],currency_id:[{required:!0,message:y("Validation.SelectCurrency"),trigger:"change"}],country_id:[{required:!0,message:y("Validation.SelectCountry"),trigger:"change"}],brand_id:[{required:!0,message:y("Validation.SelectBrand"),trigger:"change"}],name_en:[{required:!0,message:P==="en"?"Please input product name (EN)":"من فضلك ادخل اسم المنتج بالانجليزي",trigger:"blur"}],price:[{required:!0,message:P==="en"?"Please input product price":"من فضلك ادخل سعر المنتج",trigger:"blur"}],category_id:[{required:!0,message:P==="en"?"Please select a category":"من فضلك اختر فئة",trigger:"change"}],currency_id:[{required:!0,message:P==="en"?"Please select a currency":"من فضلك اختر عملة",trigger:"change"}],country_id:[{required:!0,message:P==="en"?"Please select a country":"من فضلك اختر بلد",trigger:"change"}],brand_id:[{required:!0,message:P==="en"?"Please select a brand":"من فضلك اختر براند",trigger:"change"}]},O=async()=>{var a,e;try{const d=JSON.parse(localStorage.getItem("tokenData"));m.defaults.headers.common.Authorization=`Bearer ${d.token}`;const[u,s,w,g,v]=await Promise.all([m.get(`${h}/api/categories`),m.get(`${h}/api/currencies`),m.get(`${h}/api/countries`),m.get(`${h}/api/products`),m.get(`${h}/api/units`)]);A.value=u.data.data||[],B.value=s.data||[],D.value=w.data.data||[],E.value=g.data.data||[],R.value=v.data.data||[]}catch(d){S.error(((e=(a=d.response)==null?void 0:a.data)==null?void 0:e.message)||"Failed to load form options")}},W=async()=>{try{const a=JSON.parse(localStorage.getItem("tokenData"));m.defaults.headers.common.Authorization=`Bearer ${a.token}`;const e=await m.get("https://backend.webenia.org/api/brands");F.value=Array.isArray(e.data.data)?e.data.data:[e.data.data]}catch{S.error("Failed to load brands")}},z=ee(()=>B.value.filter(a=>!a.is_deleted)),J=a=>(localStorage.getItem("lang")||"en")==="ar"?a.name_ar:a.name_en,M=(a,e)=>U.value=e,T=(a,e)=>U.value=e,Y=()=>{q.value.validate(async a=>{if(a)try{const e=new FormData;for(const s in o.value)o.value[s]!==null&&e.append(s,o.value[s]);U.value.forEach(s=>e.append("images[]",s.raw)),_.value&&(e.append("unit_id",n.value.unit_id),e.append("weight",n.value.weight),e.append("price",n.value.price));const d=JSON.parse(localStorage.getItem("tokenData"));m.defaults.headers.common.Authorization=`Bearer ${d.token}`;const u=await m.post(`${h}/api/products`,e,{headers:{"Content-Type":"multipart/form-data"}});if(u.data.status)S.success("Product created successfully"),G.push("/products");else throw new Error(u.data.message||"Failed to create product")}catch(e){S.error(e.message||"Failed to create product")}})};return le(()=>{O(),W()}),(a,e)=>{const d=c("el-input"),u=c("el-form-item"),s=c("el-switch"),w=c("el-divider"),g=c("el-select"),v=c("el-option"),j=c("el-upload"),H=c("el-button"),K=c("el-form"),Q=c("el-card");return i(),b("div",ae,[t(Q,{class:"product-card"},{default:r(()=>[N("h2",null,k(a.$t("Products.CreateProduct")),1),t(K,{model:o.value,ref_key:"formRef",ref:q,rules:L,"label-width":"120px",enctype:"multipart/form-data"},{default:r(()=>[t(u,{label:a.$t("Products.NameEn"),prop:"name_en"},{default:r(()=>[t(d,{modelValue:o.value.name_en,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.name_en=l)},null,8,["modelValue"])]),_:1},8,["label"]),t(u,{label:a.$t("Products.NameAr"),prop:"name_ar"},{default:r(()=>[t(d,{modelValue:o.value.name_ar,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.name_ar=l)},null,8,["modelValue"])]),_:1},8,["label"]),t(u,{label:a.$t("Products.Availability"),prop:"is_available"},{default:r(()=>[t(s,{modelValue:o.value.is_available,"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.is_available=l),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])]),_:1},8,["label"]),t(u,{label:a.$t("General.NeedsAmount")},{default:r(()=>[t(s,{modelValue:_.value,"onUpdate:modelValue":e[3]||(e[3]=l=>_.value=l),"active-text":a.$t("General.Yes"),"inactive-text":a.$t("General.No")},null,8,["modelValue","active-text","inactive-text"])]),_:1},8,["label"]),t(u,{label:a.$t("Products.Needs-Amount"),prop:"amountRequired"},{default:r(()=>[t(s,{modelValue:_.value,"onUpdate:modelValue":e[4]||(e[4]=l=>_.value=l),"active-text":"Yes","inactive-text":"No"},null,8,["modelValue"])]),_:1},8,["label"]),_.value?(i(),b(f,{key:0},[t(w,{"content-position":"left"},{default:r(()=>[C(k(a.$t("General.AmountInfo")),1)]),_:1}),t(u,{label:a.$t("General.Unit"),prop:"unit_id"},{default:r(()=>[t(g,{modelValue:n.value.unit_id,"onUpdate:modelValue":e[5]||(e[5]=l=>n.value.unit_id=l),placeholder:a.$t("General.SelectUnit")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(w,{"content-position":"left"},{default:r(()=>[C(k(a.$t("Products.Amount-Info")),1)]),_:1}),e[19]||(e[19]=C(" < ")),t(u,{label:a.$t("Products.Unit")},{default:r(()=>[t(g,{modelValue:n.value.unit_id,"onUpdate:modelValue":e[6]||(e[6]=l=>n.value.unit_id=l),placeholder:a.$t("Products.select-unit"),filterable:"",clearable:""},{default:r(()=>[(i(!0),b(f,null,$(R.value,l=>(i(),V(v,{key:l.id,label:l.name_en,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(u,{label:a.$t("General.Weight"),prop:"weight"},{default:r(()=>[t(d,{modelValue:n.value.weight,"onUpdate:modelValue":e[7]||(e[7]=l=>n.value.weight=l),type:"number",placeholder:a.$t("General.EnterWeight")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(u,{label:a.$t("Products.Price"),prop:"price"},{default:r(()=>[t(d,{modelValue:n.value.price,"onUpdate:modelValue":e[8]||(e[8]=l=>n.value.price=l),type:"number",placeholder:a.$t("General.EnterPrice")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(u,{label:a.$t("Products.Weight")},{default:r(()=>[t(d,{modelValue:n.value.weight,"onUpdate:modelValue":e[9]||(e[9]=l=>n.value.weight=l),type:"number",placeholder:a.$t("Products.select-weight")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(u,{label:a.$t("Products.Price")},{default:r(()=>[t(d,{modelValue:n.value.price,"onUpdate:modelValue":e[10]||(e[10]=l=>n.value.price=l),type:"number",placeholder:a.$t("Products.select-price")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])],64)):I("",!0),_.value?I("",!0):(i(),V(u,{key:1,label:a.$t("Products.Price"),prop:"price"},{default:r(()=>[t(d,{modelValue:o.value.price,"onUpdate:modelValue":e[11]||(e[11]=l=>o.value.price=l),type:"number"},null,8,["modelValue"])]),_:1},8,["label"])),t(u,{label:a.$t("Products.DescriptionEn"),prop:"description_en"},{default:r(()=>[t(d,{type:"textarea",modelValue:o.value.description_en,"onUpdate:modelValue":e[12]||(e[12]=l=>o.value.description_en=l)},null,8,["modelValue"])]),_:1},8,["label"]),t(u,{label:a.$t("Products.DescriptionAr"),prop:"description_ar"},{default:r(()=>[t(d,{type:"textarea",modelValue:o.value.description_ar,"onUpdate:modelValue":e[13]||(e[13]=l=>o.value.description_ar=l)},null,8,["modelValue"])]),_:1},8,["label"]),t(u,{label:a.$t("Products.Category"),prop:"category_id"},{default:r(()=>[t(g,{modelValue:o.value.category_id,"onUpdate:modelValue":e[14]||(e[14]=l=>o.value.category_id=l),placeholder:a.$t("Products.SelectCategory"),filterable:"",clearable:""},{default:r(()=>[(i(!0),b(f,null,$(A.value,l=>(i(),V(v,{key:l.id,label:l.name_en||l.name_ar,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(u,{label:a.$t("Products.Brand"),prop:"brand_id"},{default:r(()=>[t(g,{modelValue:o.value.brand_id,"onUpdate:modelValue":e[15]||(e[15]=l=>o.value.brand_id=l),placeholder:"Select Brand",filterable:"",clearable:""},{default:r(()=>[(i(!0),b(f,null,$(F.value,l=>(i(),V(v,{key:l.id,label:l.name_en,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(u,{label:a.$t("Products.Currency"),prop:"currency_id"},{default:r(()=>[t(g,{modelValue:o.value.currency_id,"onUpdate:modelValue":e[16]||(e[16]=l=>o.value.currency_id=l),placeholder:a.$t("Products.SelectCurrency"),filterable:"",clearable:""},{default:r(()=>[(i(!0),b(f,null,$(z.value,l=>(i(),V(v,{key:l.id,label:J(l),value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(u,{label:a.$t("Products.Country"),prop:"country_id"},{default:r(()=>[t(g,{modelValue:o.value.country_id,"onUpdate:modelValue":e[17]||(e[17]=l=>o.value.country_id=l),placeholder:a.$t("Products.SelectCountry"),filterable:"",clearable:""},{default:r(()=>[(i(!0),b(f,null,$(D.value,l=>(i(),V(v,{key:l.id,label:l.name_en||l.name_ar,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(u,{label:a.$t("Products.ParentProduct"),prop:"parent_id"},{default:r(()=>[t(g,{modelValue:o.value.parent_id,"onUpdate:modelValue":e[18]||(e[18]=l=>o.value.parent_id=l),placeholder:a.$t("Products.SelectParentProduct"),clearable:""},{default:r(()=>[t(v,{label:a.$t("Products.None"),value:null},null,8,["label"]),(i(!0),b(f,null,$(E.value,l=>(i(),V(v,{key:l.id,label:l.name_en,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(u,{label:a.$t("Products.Images"),prop:"images"},{default:r(()=>[t(j,{class:"upload-demo",drag:"",action:"","auto-upload":!1,limit:5,"file-list":U.value,"list-type":"picture","on-change":M,"on-remove":T},{default:r(()=>[e[20]||(e[20]=N("i",{class:"el-icon-upload"},null,-1)),N("div",te,k(a.$t("Products.DropFiles")),1)]),_:1,__:[20]},8,["file-list"])]),_:1},8,["label"]),t(u,null,{default:r(()=>[t(H,{type:"primary",onClick:Y},{default:r(()=>[C(k(a.$t("Products.CreateButton")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}},ne=X(re,[["__scopeId","data-v-e733aa02"]]);export{ne as default};
