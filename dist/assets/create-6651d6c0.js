import{_ as g,b as m,o as c,c as p,a as e,t as i,w as f,g as d,i as u,v as _,F as h,d as b,f as v}from"./index-dcf94f18.js";const w={name:"CreateCategory",data(){return{form:{name:"",name_ar:"",description:"",description_ar:"",brand_id:"",image:null},imagePreview:null,brands:[]}},created(){this.fetchBrands()},methods:{async fetchBrands(){try{const t=JSON.parse(localStorage.getItem("tokenData"));t!=null&&t.token&&(m.defaults.headers.common.Authorization=`Bearer ${t.token}`);const r=await m.get("https://backend.webenia.org/api/brands");if(r.data.status){const l=r.data.data;this.brands=Array.isArray(l)?l:[l]}else throw new Error(r.data.message||"Failed to fetch brands")}catch(t){console.error("Error fetching brands:",t),alert("Failed to load brands")}},onFileChange(t){const r=t.target.files[0];r?(this.form.image=r,this.imagePreview=URL.createObjectURL(r)):(this.form.image=null,this.imagePreview=null)},async submitCategory(){var t,r,l;try{const s=new FormData;s.append("name_en",this.form.name),s.append("name_ar",this.form.name_ar),s.append("description_en",this.form.description),s.append("description_ar",this.form.description_ar),s.append("brand_id",this.form.brand_id),this.form.image&&s.append("image",this.form.image);const a=JSON.parse(localStorage.getItem("tokenData"));a!=null&&a.token&&(m.defaults.headers.common.Authorization=`Bearer ${a.token}`);const n=await m.post("https://backend.webenia.org/api/categories",s,{headers:{"Content-Type":"multipart/form-data"}});if((t=n.data)!=null&&t.status&&((r=n.data)!=null&&r.data))alert("Category created successfully!"),this.form={name:"",name_ar:"",description:"",description_ar:"",brand_id:"",image:null},this.imagePreview=null;else throw new Error(((l=n.data)==null?void 0:l.message)||"Failed to create category")}catch(s){console.error("Error creating category:",s),alert(s.message||"An error occurred while creating the category.")}}}},y={class:"category-create"},C={class:"form-card"},k={class:"form-title"},B={class:"form-group"},F={class:"form-group"},A={class:"form-group"},P={class:"form-group"},S={class:"form-group"},E={disabled:"",value:""},U=["value"],V={class:"form-group"},q={class:"file-input-wrapper"},D={key:0,class:"image-preview-container"},I={class:"preview-title"},N={class:"image-preview"},L=["src"],M={type:"submit",class:"submit-button"};function O(t,r,l,s,a,n){return c(),p("div",y,[e("div",C,[e("h2",k,i(t.$t("Categories.AddCategory")),1),e("form",{onSubmit:r[6]||(r[6]=f((...o)=>n.submitCategory&&n.submitCategory(...o),["prevent"]))},[e("div",B,[e("label",null,i(t.$t("Categories.NameEn")),1),d(e("input",{"onUpdate:modelValue":r[0]||(r[0]=o=>a.form.name=o),required:"",class:"form-input"},null,512),[[u,a.form.name]])]),e("div",F,[e("label",null,i(t.$t("Categories.NameAr")),1),d(e("input",{"onUpdate:modelValue":r[1]||(r[1]=o=>a.form.name_ar=o),required:"",class:"form-input"},null,512),[[u,a.form.name_ar]])]),e("div",A,[e("label",null,i(t.$t("Categories.DescriptionEn")),1),d(e("textarea",{"onUpdate:modelValue":r[2]||(r[2]=o=>a.form.description=o),required:"",class:"form-input form-textarea"},null,512),[[u,a.form.description]])]),e("div",P,[e("label",null,i(t.$t("Categories.DescriptionAr")),1),d(e("textarea",{"onUpdate:modelValue":r[3]||(r[3]=o=>a.form.description_ar=o),required:"",class:"form-input form-textarea"},null,512),[[u,a.form.description_ar]])]),e("div",S,[e("label",null,i(t.$t("Categories.Brand")),1),d(e("select",{"onUpdate:modelValue":r[4]||(r[4]=o=>a.form.brand_id=o),required:"",class:"form-input form-select"},[e("option",E,i(t.$t("Categories.SelectBrand")),1),(c(!0),p(h,null,b(a.brands,o=>(c(),p("option",{key:o.id,value:o.id},i(o.name_en),9,U))),128))],512),[[_,a.form.brand_id]])]),e("div",V,[e("label",null,i(t.$t("Categories.Image")),1),e("div",q,[e("input",{type:"file",onChange:r[5]||(r[5]=(...o)=>n.onFileChange&&n.onFileChange(...o)),accept:"image/*",required:"",class:"form-input file-input"},null,32)])]),a.imagePreview?(c(),p("div",D,[e("p",I,i(t.$t("Categories.ImagePreview")),1),e("div",N,[e("img",{src:a.imagePreview,alt:"Image Preview"},null,8,L)])])):v("",!0),e("button",M,i(t.$t("Categories.CreateButton")),1)],32)])])}const J=g(w,[["render",O],["__scopeId","data-v-7201bec6"]]);export{J as default};
